import{S as yn,i as wn,s as kn,n as fr,d as ct,J as vn,K as xn,L as Yt,M as zt,N as mt,e as cr,f as Te,h as B,O as gt,H as Ot,G as V,P as Me,j as X,k as dt,Q as bt,m as ut,l as Lt,o as J,q as ht,p as Ut,z as Cn,I as En,R as We,T as fn}from"../chunks/W0BAji1W.js";import"../chunks/IHki7fMi.js";function dr(O){return(O==null?void 0:O.length)!==void 0?O:Array.from(O)}const Sn=!0,Wn=Object.freeze(Object.defineProperty({__proto__:null,prerender:Sn},Symbol.toStringTag,{value:"Module"}));var ur=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function In(O){return O&&O.__esModule&&Object.prototype.hasOwnProperty.call(O,"default")?O.default:O}function hr(O){throw new Error('Could not dynamically require "'+O+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var gn={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(O,G){(function(i){O.exports=i()})(function(){return function i(S,y,h){function s(d,g){if(!y[d]){if(!S[d]){var m=typeof hr=="function"&&hr;if(!g&&m)return m(d,!0);if(e)return e(d,!0);var v=new Error("Cannot find module '"+d+"'");throw v.code="MODULE_NOT_FOUND",v}var a=y[d]={exports:{}};S[d][0].call(a.exports,function(_){var n=S[d][1][_];return s(n||_)},a,a.exports,i,S,y,h)}return y[d].exports}for(var e=typeof hr=="function"&&hr,o=0;o<h.length;o++)s(h[o]);return s}({1:[function(i,S,y){var h=i("./utils"),s=i("./support"),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";y.encode=function(o){for(var d,g,m,v,a,_,n,f=[],l=0,p=o.length,w=p,E=h.getTypeOf(o)!=="string";l<o.length;)w=p-l,m=E?(d=o[l++],g=l<p?o[l++]:0,l<p?o[l++]:0):(d=o.charCodeAt(l++),g=l<p?o.charCodeAt(l++):0,l<p?o.charCodeAt(l++):0),v=d>>2,a=(3&d)<<4|g>>4,_=1<w?(15&g)<<2|m>>6:64,n=2<w?63&m:64,f.push(e.charAt(v)+e.charAt(a)+e.charAt(_)+e.charAt(n));return f.join("")},y.decode=function(o){var d,g,m,v,a,_,n=0,f=0,l="data:";if(o.substr(0,l.length)===l)throw new Error("Invalid base64 input, it looks like a data url.");var p,w=3*(o=o.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(o.charAt(o.length-1)===e.charAt(64)&&w--,o.charAt(o.length-2)===e.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(p=s.uint8array?new Uint8Array(0|w):new Array(0|w);n<o.length;)d=e.indexOf(o.charAt(n++))<<2|(v=e.indexOf(o.charAt(n++)))>>4,g=(15&v)<<4|(a=e.indexOf(o.charAt(n++)))>>2,m=(3&a)<<6|(_=e.indexOf(o.charAt(n++))),p[f++]=d,a!==64&&(p[f++]=g),_!==64&&(p[f++]=m);return p}},{"./support":30,"./utils":32}],2:[function(i,S,y){var h=i("./external"),s=i("./stream/DataWorker"),e=i("./stream/Crc32Probe"),o=i("./stream/DataLengthProbe");function d(g,m,v,a,_){this.compressedSize=g,this.uncompressedSize=m,this.crc32=v,this.compression=a,this.compressedContent=_}d.prototype={getContentWorker:function(){var g=new s(h.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),m=this;return g.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),g},getCompressedWorker:function(){return new s(h.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(g,m,v){return g.pipe(new e).pipe(new o("uncompressedSize")).pipe(m.compressWorker(v)).pipe(new o("compressedSize")).withStreamInfo("compression",m)},S.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(i,S,y){var h=i("./stream/GenericWorker");y.STORE={magic:"\0\0",compressWorker:function(){return new h("STORE compression")},uncompressWorker:function(){return new h("STORE decompression")}},y.DEFLATE=i("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(i,S,y){var h=i("./utils"),s=function(){for(var e,o=[],d=0;d<256;d++){e=d;for(var g=0;g<8;g++)e=1&e?3988292384^e>>>1:e>>>1;o[d]=e}return o}();S.exports=function(e,o){return e!==void 0&&e.length?h.getTypeOf(e)!=="string"?function(d,g,m,v){var a=s,_=v+m;d^=-1;for(var n=v;n<_;n++)d=d>>>8^a[255&(d^g[n])];return-1^d}(0|o,e,e.length,0):function(d,g,m,v){var a=s,_=v+m;d^=-1;for(var n=v;n<_;n++)d=d>>>8^a[255&(d^g.charCodeAt(n))];return-1^d}(0|o,e,e.length,0):0}},{"./utils":32}],5:[function(i,S,y){y.base64=!1,y.binary=!1,y.dir=!1,y.createFolders=!0,y.date=null,y.compression=null,y.compressionOptions=null,y.comment=null,y.unixPermissions=null,y.dosPermissions=null},{}],6:[function(i,S,y){var h=null;h=typeof Promise<"u"?Promise:i("lie"),S.exports={Promise:h}},{lie:37}],7:[function(i,S,y){var h=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=i("pako"),e=i("./utils"),o=i("./stream/GenericWorker"),d=h?"uint8array":"array";function g(m,v){o.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=v,this.meta={}}y.magic="\b\0",e.inherits(g,o),g.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(e.transformTo(d,m.data),!1)},g.prototype.flush=function(){o.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},g.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},g.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(v){m.push({data:v,meta:m.meta})}},y.compressWorker=function(m){return new g("Deflate",m)},y.uncompressWorker=function(){return new g("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(i,S,y){function h(a,_){var n,f="";for(n=0;n<_;n++)f+=String.fromCharCode(255&a),a>>>=8;return f}function s(a,_,n,f,l,p){var w,E,x=a.file,j=a.compression,P=p!==d.utf8encode,M=e.transformTo("string",p(x.name)),T=e.transformTo("string",d.utf8encode(x.name)),K=x.comment,rt=e.transformTo("string",p(K)),b=e.transformTo("string",d.utf8encode(K)),N=T.length!==x.name.length,r=b.length!==K.length,U="",it="",Z="",lt=x.dir,W=x.date,at={crc32:0,compressedSize:0,uncompressedSize:0};_&&!n||(at.crc32=a.crc32,at.compressedSize=a.compressedSize,at.uncompressedSize=a.uncompressedSize);var A=0;_&&(A|=8),P||!N&&!r||(A|=2048);var z=0,Q=0;lt&&(z|=16),l==="UNIX"?(Q=798,z|=function(Y,_t){var wt=Y;return Y||(wt=_t?16893:33204),(65535&wt)<<16}(x.unixPermissions,lt)):(Q=20,z|=function(Y){return 63&(Y||0)}(x.dosPermissions)),w=W.getUTCHours(),w<<=6,w|=W.getUTCMinutes(),w<<=5,w|=W.getUTCSeconds()/2,E=W.getUTCFullYear()-1980,E<<=4,E|=W.getUTCMonth()+1,E<<=5,E|=W.getUTCDate(),N&&(it=h(1,1)+h(g(M),4)+T,U+="up"+h(it.length,2)+it),r&&(Z=h(1,1)+h(g(rt),4)+b,U+="uc"+h(Z.length,2)+Z);var q="";return q+=`
\0`,q+=h(A,2),q+=j.magic,q+=h(w,2),q+=h(E,2),q+=h(at.crc32,4),q+=h(at.compressedSize,4),q+=h(at.uncompressedSize,4),q+=h(M.length,2),q+=h(U.length,2),{fileRecord:m.LOCAL_FILE_HEADER+q+M+U,dirRecord:m.CENTRAL_FILE_HEADER+h(Q,2)+q+h(rt.length,2)+"\0\0\0\0"+h(z,4)+h(f,4)+M+U+rt}}var e=i("../utils"),o=i("../stream/GenericWorker"),d=i("../utf8"),g=i("../crc32"),m=i("../signature");function v(a,_,n,f){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=n,this.encodeFileName=f,this.streamFiles=a,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}e.inherits(v,o),v.prototype.push=function(a){var _=a.meta.percent||0,n=this.entriesCount,f=this._sources.length;this.accumulate?this.contentBuffer.push(a):(this.bytesWritten+=a.data.length,o.prototype.push.call(this,{data:a.data,meta:{currentFile:this.currentFile,percent:n?(_+100*(n-f-1))/n:100}}))},v.prototype.openedSource=function(a){this.currentSourceOffset=this.bytesWritten,this.currentFile=a.file.name;var _=this.streamFiles&&!a.file.dir;if(_){var n=s(a,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(a){this.accumulate=!1;var _=this.streamFiles&&!a.file.dir,n=s(a,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),_)this.push({data:function(f){return m.DATA_DESCRIPTOR+h(f.crc32,4)+h(f.compressedSize,4)+h(f.uncompressedSize,4)}(a),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var a=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var n=this.bytesWritten-a,f=function(l,p,w,E,x){var j=e.transformTo("string",x(E));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+h(l,2)+h(l,2)+h(p,4)+h(w,4)+h(j.length,2)+j}(this.dirRecords.length,n,a,this.zipComment,this.encodeFileName);this.push({data:f,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(a){this._sources.push(a);var _=this;return a.on("data",function(n){_.processChunk(n)}),a.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),a.on("error",function(n){_.error(n)}),this},v.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(a){var _=this._sources;if(!o.prototype.error.call(this,a))return!1;for(var n=0;n<_.length;n++)try{_[n].error(a)}catch{}return!0},v.prototype.lock=function(){o.prototype.lock.call(this);for(var a=this._sources,_=0;_<a.length;_++)a[_].lock()},S.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(i,S,y){var h=i("../compressions"),s=i("./ZipFileWorker");y.generateWorker=function(e,o,d){var g=new s(o.streamFiles,d,o.platform,o.encodeFileName),m=0;try{e.forEach(function(v,a){m++;var _=function(p,w){var E=p||w,x=h[E];if(!x)throw new Error(E+" is not a valid compression method !");return x}(a.options.compression,o.compression),n=a.options.compressionOptions||o.compressionOptions||{},f=a.dir,l=a.date;a._compressWorker(_,n).withStreamInfo("file",{name:v,dir:f,date:l,comment:a.comment||"",unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions}).pipe(g)}),g.entriesCount=m}catch(v){g.error(v)}return g}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(i,S,y){function h(){if(!(this instanceof h))return new h;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new h;for(var e in this)typeof this[e]!="function"&&(s[e]=this[e]);return s}}(h.prototype=i("./object")).loadAsync=i("./load"),h.support=i("./support"),h.defaults=i("./defaults"),h.version="3.10.1",h.loadAsync=function(s,e){return new h().loadAsync(s,e)},h.external=i("./external"),S.exports=h},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(i,S,y){var h=i("./utils"),s=i("./external"),e=i("./utf8"),o=i("./zipEntries"),d=i("./stream/Crc32Probe"),g=i("./nodejsUtils");function m(v){return new s.Promise(function(a,_){var n=v.decompressed.getContentWorker().pipe(new d);n.on("error",function(f){_(f)}).on("end",function(){n.streamInfo.crc32!==v.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):a()}).resume()})}S.exports=function(v,a){var _=this;return a=h.extend(a||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:e.utf8decode}),g.isNode&&g.isStream(v)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):h.prepareContent("the loaded zip file",v,!0,a.optimizedBinaryString,a.base64).then(function(n){var f=new o(a);return f.load(n),f}).then(function(n){var f=[s.Promise.resolve(n)],l=n.files;if(a.checkCRC32)for(var p=0;p<l.length;p++)f.push(m(l[p]));return s.Promise.all(f)}).then(function(n){for(var f=n.shift(),l=f.files,p=0;p<l.length;p++){var w=l[p],E=w.fileNameStr,x=h.resolve(w.fileNameStr);_.file(x,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:a.createFolders}),w.dir||(_.file(x).unsafeOriginalName=E)}return f.zipComment.length&&(_.comment=f.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(i,S,y){var h=i("../utils"),s=i("../stream/GenericWorker");function e(o,d){s.call(this,"Nodejs stream input adapter for "+o),this._upstreamEnded=!1,this._bindStream(d)}h.inherits(e,s),e.prototype._bindStream=function(o){var d=this;(this._stream=o).pause(),o.on("data",function(g){d.push({data:g,meta:{percent:0}})}).on("error",function(g){d.isPaused?this.generatedError=g:d.error(g)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},e.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},e.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},S.exports=e},{"../stream/GenericWorker":28,"../utils":32}],13:[function(i,S,y){var h=i("readable-stream").Readable;function s(e,o,d){h.call(this,o),this._helper=e;var g=this;e.on("data",function(m,v){g.push(m)||g._helper.pause(),d&&d(v)}).on("error",function(m){g.emit("error",m)}).on("end",function(){g.push(null)})}i("../utils").inherits(s,h),s.prototype._read=function(){this._helper.resume()},S.exports=s},{"../utils":32,"readable-stream":16}],14:[function(i,S,y){S.exports={isNode:typeof Buffer<"u",newBufferFrom:function(h,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(h,s);if(typeof h=="number")throw new Error('The "data" argument must not be a number');return new Buffer(h,s)},allocBuffer:function(h){if(Buffer.alloc)return Buffer.alloc(h);var s=new Buffer(h);return s.fill(0),s},isBuffer:function(h){return Buffer.isBuffer(h)},isStream:function(h){return h&&typeof h.on=="function"&&typeof h.pause=="function"&&typeof h.resume=="function"}}},{}],15:[function(i,S,y){function h(x,j,P){var M,T=e.getTypeOf(j),K=e.extend(P||{},g);K.date=K.date||new Date,K.compression!==null&&(K.compression=K.compression.toUpperCase()),typeof K.unixPermissions=="string"&&(K.unixPermissions=parseInt(K.unixPermissions,8)),K.unixPermissions&&16384&K.unixPermissions&&(K.dir=!0),K.dosPermissions&&16&K.dosPermissions&&(K.dir=!0),K.dir&&(x=l(x)),K.createFolders&&(M=f(x))&&p.call(this,M,!0);var rt=T==="string"&&K.binary===!1&&K.base64===!1;P&&P.binary!==void 0||(K.binary=!rt),(j instanceof m&&j.uncompressedSize===0||K.dir||!j||j.length===0)&&(K.base64=!1,K.binary=!0,j="",K.compression="STORE",T="string");var b=null;b=j instanceof m||j instanceof o?j:_.isNode&&_.isStream(j)?new n(x,j):e.prepareContent(x,j,K.binary,K.optimizedBinaryString,K.base64);var N=new v(x,b,K);this.files[x]=N}var s=i("./utf8"),e=i("./utils"),o=i("./stream/GenericWorker"),d=i("./stream/StreamHelper"),g=i("./defaults"),m=i("./compressedObject"),v=i("./zipObject"),a=i("./generate"),_=i("./nodejsUtils"),n=i("./nodejs/NodejsStreamInputAdapter"),f=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var j=x.lastIndexOf("/");return 0<j?x.substring(0,j):""},l=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},p=function(x,j){return j=j!==void 0?j:g.createFolders,x=l(x),this.files[x]||h.call(this,x,null,{dir:!0,createFolders:j}),this.files[x]};function w(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var j,P,M;for(j in this.files)M=this.files[j],(P=j.slice(this.root.length,j.length))&&j.slice(0,this.root.length)===this.root&&x(P,M)},filter:function(x){var j=[];return this.forEach(function(P,M){x(P,M)&&j.push(M)}),j},file:function(x,j,P){if(arguments.length!==1)return x=this.root+x,h.call(this,x,j,P),this;if(w(x)){var M=x;return this.filter(function(K,rt){return!rt.dir&&M.test(K)})}var T=this.files[this.root+x];return T&&!T.dir?T:null},folder:function(x){if(!x)return this;if(w(x))return this.filter(function(T,K){return K.dir&&x.test(T)});var j=this.root+x,P=p.call(this,j),M=this.clone();return M.root=P.name,M},remove:function(x){x=this.root+x;var j=this.files[x];if(j||(x.slice(-1)!=="/"&&(x+="/"),j=this.files[x]),j&&!j.dir)delete this.files[x];else for(var P=this.filter(function(T,K){return K.name.slice(0,x.length)===x}),M=0;M<P.length;M++)delete this.files[P[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var j,P={};try{if((P=e.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=P.type.toLowerCase(),P.compression=P.compression.toUpperCase(),P.type==="binarystring"&&(P.type="string"),!P.type)throw new Error("No output type specified.");e.checkSupport(P.type),P.platform!=="darwin"&&P.platform!=="freebsd"&&P.platform!=="linux"&&P.platform!=="sunos"||(P.platform="UNIX"),P.platform==="win32"&&(P.platform="DOS");var M=P.comment||this.comment||"";j=a.generateWorker(this,P,M)}catch(T){(j=new o("error")).error(T)}return new d(j,P.type||"string",P.mimeType)},generateAsync:function(x,j){return this.generateInternalStream(x).accumulate(j)},generateNodeStream:function(x,j){return(x=x||{}).type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(j)}};S.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(i,S,y){S.exports=i("stream")},{stream:void 0}],17:[function(i,S,y){var h=i("./DataReader");function s(e){h.call(this,e);for(var o=0;o<this.data.length;o++)e[o]=255&e[o]}i("../utils").inherits(s,h),s.prototype.byteAt=function(e){return this.data[this.zero+e]},s.prototype.lastIndexOfSignature=function(e){for(var o=e.charCodeAt(0),d=e.charCodeAt(1),g=e.charCodeAt(2),m=e.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===o&&this.data[v+1]===d&&this.data[v+2]===g&&this.data[v+3]===m)return v-this.zero;return-1},s.prototype.readAndCheckSignature=function(e){var o=e.charCodeAt(0),d=e.charCodeAt(1),g=e.charCodeAt(2),m=e.charCodeAt(3),v=this.readData(4);return o===v[0]&&d===v[1]&&g===v[2]&&m===v[3]},s.prototype.readData=function(e){if(this.checkOffset(e),e===0)return[];var o=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,o},S.exports=s},{"../utils":32,"./DataReader":18}],18:[function(i,S,y){var h=i("../utils");function s(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var o,d=0;for(this.checkOffset(e),o=this.index+e-1;o>=this.index;o--)d=(d<<8)+this.byteAt(o);return this.index+=e,d},readString:function(e){return h.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},S.exports=s},{"../utils":32}],19:[function(i,S,y){var h=i("./Uint8ArrayReader");function s(e){h.call(this,e)}i("../utils").inherits(s,h),s.prototype.readData=function(e){this.checkOffset(e);var o=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,o},S.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(i,S,y){var h=i("./DataReader");function s(e){h.call(this,e)}i("../utils").inherits(s,h),s.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},s.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},s.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},s.prototype.readData=function(e){this.checkOffset(e);var o=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,o},S.exports=s},{"../utils":32,"./DataReader":18}],21:[function(i,S,y){var h=i("./ArrayReader");function s(e){h.call(this,e)}i("../utils").inherits(s,h),s.prototype.readData=function(e){if(this.checkOffset(e),e===0)return new Uint8Array(0);var o=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,o},S.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(i,S,y){var h=i("../utils"),s=i("../support"),e=i("./ArrayReader"),o=i("./StringReader"),d=i("./NodeBufferReader"),g=i("./Uint8ArrayReader");S.exports=function(m){var v=h.getTypeOf(m);return h.checkSupport(v),v!=="string"||s.uint8array?v==="nodebuffer"?new d(m):s.uint8array?new g(h.transformTo("uint8array",m)):new e(h.transformTo("array",m)):new o(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(i,S,y){y.LOCAL_FILE_HEADER="PK",y.CENTRAL_FILE_HEADER="PK",y.CENTRAL_DIRECTORY_END="PK",y.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",y.ZIP64_CENTRAL_DIRECTORY_END="PK",y.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(i,S,y){var h=i("./GenericWorker"),s=i("../utils");function e(o){h.call(this,"ConvertWorker to "+o),this.destType=o}s.inherits(e,h),e.prototype.processChunk=function(o){this.push({data:s.transformTo(this.destType,o.data),meta:o.meta})},S.exports=e},{"../utils":32,"./GenericWorker":28}],25:[function(i,S,y){var h=i("./GenericWorker"),s=i("../crc32");function e(){h.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}i("../utils").inherits(e,h),e.prototype.processChunk=function(o){this.streamInfo.crc32=s(o.data,this.streamInfo.crc32||0),this.push(o)},S.exports=e},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(i,S,y){var h=i("../utils"),s=i("./GenericWorker");function e(o){s.call(this,"DataLengthProbe for "+o),this.propName=o,this.withStreamInfo(o,0)}h.inherits(e,s),e.prototype.processChunk=function(o){if(o){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+o.data.length}s.prototype.processChunk.call(this,o)},S.exports=e},{"../utils":32,"./GenericWorker":28}],27:[function(i,S,y){var h=i("../utils"),s=i("./GenericWorker");function e(o){s.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,o.then(function(g){d.dataIsReady=!0,d.data=g,d.max=g&&g.length||0,d.type=h.getTypeOf(g),d.isPaused||d._tickAndRepeat()},function(g){d.error(g)})}h.inherits(e,s),e.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},e.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,h.delay(this._tickAndRepeat,[],this)),!0)},e.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(h.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},e.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var o=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":o=this.data.substring(this.index,d);break;case"uint8array":o=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":o=this.data.slice(this.index,d)}return this.index=d,this.push({data:o,meta:{percent:this.max?this.index/this.max*100:0}})},S.exports=e},{"../utils":32,"./GenericWorker":28}],28:[function(i,S,y){function h(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}h.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,e){return this._listeners[s].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,e){if(this._listeners[s])for(var o=0;o<this._listeners[s].length;o++)this._listeners[s][o].call(this,e)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var e=this;return s.on("data",function(o){e.processChunk(o)}),s.on("end",function(){e.end()}),s.on("error",function(o){e.error(o)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,e){return this.extraStreamInfo[s]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},S.exports=h},{}],29:[function(i,S,y){var h=i("../utils"),s=i("./ConvertWorker"),e=i("./GenericWorker"),o=i("../base64"),d=i("../support"),g=i("../external"),m=null;if(d.nodestream)try{m=i("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(_,n){return new g.Promise(function(f,l){var p=[],w=_._internalType,E=_._outputType,x=_._mimeType;_.on("data",function(j,P){p.push(j),n&&n(P)}).on("error",function(j){p=[],l(j)}).on("end",function(){try{var j=function(P,M,T){switch(P){case"blob":return h.newBlob(h.transformTo("arraybuffer",M),T);case"base64":return o.encode(M);default:return h.transformTo(P,M)}}(E,function(P,M){var T,K=0,rt=null,b=0;for(T=0;T<M.length;T++)b+=M[T].length;switch(P){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(rt=new Uint8Array(b),T=0;T<M.length;T++)rt.set(M[T],K),K+=M[T].length;return rt;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+P+"'")}}(w,p),x);f(j)}catch(P){l(P)}p=[]}).resume()})}function a(_,n,f){var l=n;switch(n){case"blob":case"arraybuffer":l="uint8array";break;case"base64":l="string"}try{this._internalType=l,this._outputType=n,this._mimeType=f,h.checkSupport(l),this._worker=_.pipe(new s(l)),_.lock()}catch(p){this._worker=new e("error"),this._worker.error(p)}}a.prototype={accumulate:function(_){return v(this,_)},on:function(_,n){var f=this;return _==="data"?this._worker.on(_,function(l){n.call(f,l.data,l.meta)}):this._worker.on(_,function(){h.delay(n,arguments,f)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(h.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},_)}},S.exports=a},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(i,S,y){if(y.base64=!0,y.array=!0,y.string=!0,y.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",y.nodebuffer=typeof Buffer<"u",y.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")y.blob=!1;else{var h=new ArrayBuffer(0);try{y.blob=new Blob([h],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(h),y.blob=s.getBlob("application/zip").size===0}catch{y.blob=!1}}}try{y.nodestream=!!i("readable-stream").Readable}catch{y.nodestream=!1}},{"readable-stream":16}],31:[function(i,S,y){for(var h=i("./utils"),s=i("./support"),e=i("./nodejsUtils"),o=i("./stream/GenericWorker"),d=new Array(256),g=0;g<256;g++)d[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;d[254]=d[254]=1;function m(){o.call(this,"utf-8 decode"),this.leftOver=null}function v(){o.call(this,"utf-8 encode")}y.utf8encode=function(a){return s.nodebuffer?e.newBufferFrom(a,"utf-8"):function(_){var n,f,l,p,w,E=_.length,x=0;for(p=0;p<E;p++)(64512&(f=_.charCodeAt(p)))==55296&&p+1<E&&(64512&(l=_.charCodeAt(p+1)))==56320&&(f=65536+(f-55296<<10)+(l-56320),p++),x+=f<128?1:f<2048?2:f<65536?3:4;for(n=s.uint8array?new Uint8Array(x):new Array(x),p=w=0;w<x;p++)(64512&(f=_.charCodeAt(p)))==55296&&p+1<E&&(64512&(l=_.charCodeAt(p+1)))==56320&&(f=65536+(f-55296<<10)+(l-56320),p++),f<128?n[w++]=f:(f<2048?n[w++]=192|f>>>6:(f<65536?n[w++]=224|f>>>12:(n[w++]=240|f>>>18,n[w++]=128|f>>>12&63),n[w++]=128|f>>>6&63),n[w++]=128|63&f);return n}(a)},y.utf8decode=function(a){return s.nodebuffer?h.transformTo("nodebuffer",a).toString("utf-8"):function(_){var n,f,l,p,w=_.length,E=new Array(2*w);for(n=f=0;n<w;)if((l=_[n++])<128)E[f++]=l;else if(4<(p=d[l]))E[f++]=65533,n+=p-1;else{for(l&=p===2?31:p===3?15:7;1<p&&n<w;)l=l<<6|63&_[n++],p--;1<p?E[f++]=65533:l<65536?E[f++]=l:(l-=65536,E[f++]=55296|l>>10&1023,E[f++]=56320|1023&l)}return E.length!==f&&(E.subarray?E=E.subarray(0,f):E.length=f),h.applyFromCharCode(E)}(a=h.transformTo(s.uint8array?"uint8array":"array",a))},h.inherits(m,o),m.prototype.processChunk=function(a){var _=h.transformTo(s.uint8array?"uint8array":"array",a.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var n=_;(_=new Uint8Array(n.length+this.leftOver.length)).set(this.leftOver,0),_.set(n,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var f=function(p,w){var E;for((w=w||p.length)>p.length&&(w=p.length),E=w-1;0<=E&&(192&p[E])==128;)E--;return E<0||E===0?w:E+d[p[E]]>w?E:w}(_),l=_;f!==_.length&&(s.uint8array?(l=_.subarray(0,f),this.leftOver=_.subarray(f,_.length)):(l=_.slice(0,f),this.leftOver=_.slice(f,_.length))),this.push({data:y.utf8decode(l),meta:a.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:y.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},y.Utf8DecodeWorker=m,h.inherits(v,o),v.prototype.processChunk=function(a){this.push({data:y.utf8encode(a.data),meta:a.meta})},y.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(i,S,y){var h=i("./support"),s=i("./base64"),e=i("./nodejsUtils"),o=i("./external");function d(n){return n}function g(n,f){for(var l=0;l<n.length;++l)f[l]=255&n.charCodeAt(l);return f}i("setimmediate"),y.newBlob=function(n,f){y.checkSupport("blob");try{return new Blob([n],{type:f})}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return l.append(n),l.getBlob(f)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(n,f,l){var p=[],w=0,E=n.length;if(E<=l)return String.fromCharCode.apply(null,n);for(;w<E;)f==="array"||f==="nodebuffer"?p.push(String.fromCharCode.apply(null,n.slice(w,Math.min(w+l,E)))):p.push(String.fromCharCode.apply(null,n.subarray(w,Math.min(w+l,E)))),w+=l;return p.join("")},stringifyByChar:function(n){for(var f="",l=0;l<n.length;l++)f+=String.fromCharCode(n[l]);return f},applyCanBeUsed:{uint8array:function(){try{return h.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return h.nodebuffer&&String.fromCharCode.apply(null,e.allocBuffer(1)).length===1}catch{return!1}}()}};function v(n){var f=65536,l=y.getTypeOf(n),p=!0;if(l==="uint8array"?p=m.applyCanBeUsed.uint8array:l==="nodebuffer"&&(p=m.applyCanBeUsed.nodebuffer),p)for(;1<f;)try{return m.stringifyByChunk(n,l,f)}catch{f=Math.floor(f/2)}return m.stringifyByChar(n)}function a(n,f){for(var l=0;l<n.length;l++)f[l]=n[l];return f}y.applyFromCharCode=v;var _={};_.string={string:d,array:function(n){return g(n,new Array(n.length))},arraybuffer:function(n){return _.string.uint8array(n).buffer},uint8array:function(n){return g(n,new Uint8Array(n.length))},nodebuffer:function(n){return g(n,e.allocBuffer(n.length))}},_.array={string:v,array:d,arraybuffer:function(n){return new Uint8Array(n).buffer},uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return e.newBufferFrom(n)}},_.arraybuffer={string:function(n){return v(new Uint8Array(n))},array:function(n){return a(new Uint8Array(n),new Array(n.byteLength))},arraybuffer:d,uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return e.newBufferFrom(new Uint8Array(n))}},_.uint8array={string:v,array:function(n){return a(n,new Array(n.length))},arraybuffer:function(n){return n.buffer},uint8array:d,nodebuffer:function(n){return e.newBufferFrom(n)}},_.nodebuffer={string:v,array:function(n){return a(n,new Array(n.length))},arraybuffer:function(n){return _.nodebuffer.uint8array(n).buffer},uint8array:function(n){return a(n,new Uint8Array(n.length))},nodebuffer:d},y.transformTo=function(n,f){if(f=f||"",!n)return f;y.checkSupport(n);var l=y.getTypeOf(f);return _[l][n](f)},y.resolve=function(n){for(var f=n.split("/"),l=[],p=0;p<f.length;p++){var w=f[p];w==="."||w===""&&p!==0&&p!==f.length-1||(w===".."?l.pop():l.push(w))}return l.join("/")},y.getTypeOf=function(n){return typeof n=="string"?"string":Object.prototype.toString.call(n)==="[object Array]"?"array":h.nodebuffer&&e.isBuffer(n)?"nodebuffer":h.uint8array&&n instanceof Uint8Array?"uint8array":h.arraybuffer&&n instanceof ArrayBuffer?"arraybuffer":void 0},y.checkSupport=function(n){if(!h[n.toLowerCase()])throw new Error(n+" is not supported by this platform")},y.MAX_VALUE_16BITS=65535,y.MAX_VALUE_32BITS=-1,y.pretty=function(n){var f,l,p="";for(l=0;l<(n||"").length;l++)p+="\\x"+((f=n.charCodeAt(l))<16?"0":"")+f.toString(16).toUpperCase();return p},y.delay=function(n,f,l){setImmediate(function(){n.apply(l||null,f||[])})},y.inherits=function(n,f){function l(){}l.prototype=f.prototype,n.prototype=new l},y.extend=function(){var n,f,l={};for(n=0;n<arguments.length;n++)for(f in arguments[n])Object.prototype.hasOwnProperty.call(arguments[n],f)&&l[f]===void 0&&(l[f]=arguments[n][f]);return l},y.prepareContent=function(n,f,l,p,w){return o.Promise.resolve(f).then(function(E){return h.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader<"u"?new o.Promise(function(x,j){var P=new FileReader;P.onload=function(M){x(M.target.result)},P.onerror=function(M){j(M.target.error)},P.readAsArrayBuffer(E)}):E}).then(function(E){var x=y.getTypeOf(E);return x?(x==="arraybuffer"?E=y.transformTo("uint8array",E):x==="string"&&(w?E=s.decode(E):l&&p!==!0&&(E=function(j){return g(j,h.uint8array?new Uint8Array(j.length):new Array(j.length))}(E))),E):o.Promise.reject(new Error("Can't read the data of '"+n+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(i,S,y){var h=i("./reader/readerFor"),s=i("./utils"),e=i("./signature"),o=i("./zipEntry"),d=i("./support");function g(m){this.files=[],this.loadOptions=m}g.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(v)+", expected "+s.pretty(m)+")")}},isSignature:function(m,v){var a=this.reader.index;this.reader.setIndex(m);var _=this.reader.readString(4)===v;return this.reader.setIndex(a),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),v=d.uint8array?"uint8array":"array",a=s.transformTo(v,m);this.zipComment=this.loadOptions.decodeFileName(a)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,v,a,_=this.zip64EndOfCentralSize-44;0<_;)m=this.reader.readInt(2),v=this.reader.readInt(4),a=this.reader.readData(v),this.zip64ExtensibleData[m]={id:m,length:v,value:a}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,v;for(m=0;m<this.files.length;m++)v=this.files[m],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(e.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(e.CENTRAL_FILE_HEADER);)(m=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(e.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,e.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var v=m;if(this.checkSignature(e.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,e.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var a=this.centralDirOffset+this.centralDirSize;this.zip64&&(a+=20,a+=12+this.zip64EndOfCentralSize);var _=v-a;if(0<_)this.isSignature(v,e.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(m){this.reader=h(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},S.exports=g},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(i,S,y){var h=i("./reader/readerFor"),s=i("./utils"),e=i("./compressedObject"),o=i("./crc32"),d=i("./utf8"),g=i("./compressions"),m=i("./support");function v(a,_){this.options=a,this.loadOptions=_}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(a){var _,n;if(a.skip(22),this.fileNameLength=a.readInt(2),n=a.readInt(2),this.fileName=a.readData(this.fileNameLength),a.skip(n),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(f){for(var l in g)if(Object.prototype.hasOwnProperty.call(g,l)&&g[l].magic===f)return g[l];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new e(this.compressedSize,this.uncompressedSize,this.crc32,_,a.readData(this.compressedSize))},readCentralPart:function(a){this.versionMadeBy=a.readInt(2),a.skip(2),this.bitFlag=a.readInt(2),this.compressionMethod=a.readString(2),this.date=a.readDate(),this.crc32=a.readInt(4),this.compressedSize=a.readInt(4),this.uncompressedSize=a.readInt(4);var _=a.readInt(2);if(this.extraFieldsLength=a.readInt(2),this.fileCommentLength=a.readInt(2),this.diskNumberStart=a.readInt(2),this.internalFileAttributes=a.readInt(2),this.externalFileAttributes=a.readInt(4),this.localHeaderOffset=a.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");a.skip(_),this.readExtraFields(a),this.parseZIP64ExtraField(a),this.fileComment=a.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var a=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),a==0&&(this.dosPermissions=63&this.externalFileAttributes),a==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var a=h(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=a.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=a.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=a.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=a.readInt(4))}},readExtraFields:function(a){var _,n,f,l=a.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});a.index+4<l;)_=a.readInt(2),n=a.readInt(2),f=a.readData(n),this.extraFields[_]={id:_,length:n,value:f};a.setIndex(l)},handleUTF8:function(){var a=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var n=s.transformTo(a,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var f=this.findExtraFieldUnicodeComment();if(f!==null)this.fileCommentStr=f;else{var l=s.transformTo(a,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(l)}}},findExtraFieldUnicodePath:function(){var a=this.extraFields[28789];if(a){var _=h(a.value);return _.readInt(1)!==1||o(this.fileName)!==_.readInt(4)?null:d.utf8decode(_.readData(a.length-5))}return null},findExtraFieldUnicodeComment:function(){var a=this.extraFields[25461];if(a){var _=h(a.value);return _.readInt(1)!==1||o(this.fileComment)!==_.readInt(4)?null:d.utf8decode(_.readData(a.length-5))}return null}},S.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(i,S,y){function h(_,n,f){this.name=_,this.dir=f.dir,this.date=f.date,this.comment=f.comment,this.unixPermissions=f.unixPermissions,this.dosPermissions=f.dosPermissions,this._data=n,this._dataBinary=f.binary,this.options={compression:f.compression,compressionOptions:f.compressionOptions}}var s=i("./stream/StreamHelper"),e=i("./stream/DataWorker"),o=i("./utf8"),d=i("./compressedObject"),g=i("./stream/GenericWorker");h.prototype={internalStream:function(_){var n=null,f="string";try{if(!_)throw new Error("No output type specified.");var l=(f=_.toLowerCase())==="string"||f==="text";f!=="binarystring"&&f!=="text"||(f="string"),n=this._decompressWorker();var p=!this._dataBinary;p&&!l&&(n=n.pipe(new o.Utf8EncodeWorker)),!p&&l&&(n=n.pipe(new o.Utf8DecodeWorker))}catch(w){(n=new g("error")).error(w)}return new s(n,f,"")},async:function(_,n){return this.internalStream(_).accumulate(n)},nodeStream:function(_,n){return this.internalStream(_||"nodebuffer").toNodejsStream(n)},_compressWorker:function(_,n){if(this._data instanceof d&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var f=this._decompressWorker();return this._dataBinary||(f=f.pipe(new o.Utf8EncodeWorker)),d.createWorkerFrom(f,_,n)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof g?this._data:new e(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},a=0;a<m.length;a++)h.prototype[m[a]]=v;S.exports=h},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(i,S,y){(function(h){var s,e,o=h.MutationObserver||h.WebKitMutationObserver;if(o){var d=0,g=new o(_),m=h.document.createTextNode("");g.observe(m,{characterData:!0}),s=function(){m.data=d=++d%2}}else if(h.setImmediate||h.MessageChannel===void 0)s="document"in h&&"onreadystatechange"in h.document.createElement("script")?function(){var n=h.document.createElement("script");n.onreadystatechange=function(){_(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},h.document.documentElement.appendChild(n)}:function(){setTimeout(_,0)};else{var v=new h.MessageChannel;v.port1.onmessage=_,s=function(){v.port2.postMessage(0)}}var a=[];function _(){var n,f;e=!0;for(var l=a.length;l;){for(f=a,a=[],n=-1;++n<l;)f[n]();l=a.length}e=!1}S.exports=function(n){a.push(n)!==1||e||s()}}).call(this,typeof ur<"u"?ur:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(i,S,y){var h=i("immediate");function s(){}var e={},o=["REJECTED"],d=["FULFILLED"],g=["PENDING"];function m(l){if(typeof l!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,l!==s&&n(this,l)}function v(l,p,w){this.promise=l,typeof p=="function"&&(this.onFulfilled=p,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function a(l,p,w){h(function(){var E;try{E=p(w)}catch(x){return e.reject(l,x)}E===l?e.reject(l,new TypeError("Cannot resolve promise with itself")):e.resolve(l,E)})}function _(l){var p=l&&l.then;if(l&&(typeof l=="object"||typeof l=="function")&&typeof p=="function")return function(){p.apply(l,arguments)}}function n(l,p){var w=!1;function E(P){w||(w=!0,e.reject(l,P))}function x(P){w||(w=!0,e.resolve(l,P))}var j=f(function(){p(x,E)});j.status==="error"&&E(j.value)}function f(l,p){var w={};try{w.value=l(p),w.status="success"}catch(E){w.status="error",w.value=E}return w}(S.exports=m).prototype.finally=function(l){if(typeof l!="function")return this;var p=this.constructor;return this.then(function(w){return p.resolve(l()).then(function(){return w})},function(w){return p.resolve(l()).then(function(){throw w})})},m.prototype.catch=function(l){return this.then(null,l)},m.prototype.then=function(l,p){if(typeof l!="function"&&this.state===d||typeof p!="function"&&this.state===o)return this;var w=new this.constructor(s);return this.state!==g?a(w,this.state===d?l:p,this.outcome):this.queue.push(new v(w,l,p)),w},v.prototype.callFulfilled=function(l){e.resolve(this.promise,l)},v.prototype.otherCallFulfilled=function(l){a(this.promise,this.onFulfilled,l)},v.prototype.callRejected=function(l){e.reject(this.promise,l)},v.prototype.otherCallRejected=function(l){a(this.promise,this.onRejected,l)},e.resolve=function(l,p){var w=f(_,p);if(w.status==="error")return e.reject(l,w.value);var E=w.value;if(E)n(l,E);else{l.state=d,l.outcome=p;for(var x=-1,j=l.queue.length;++x<j;)l.queue[x].callFulfilled(p)}return l},e.reject=function(l,p){l.state=o,l.outcome=p;for(var w=-1,E=l.queue.length;++w<E;)l.queue[w].callRejected(p);return l},m.resolve=function(l){return l instanceof this?l:e.resolve(new this(s),l)},m.reject=function(l){var p=new this(s);return e.reject(p,l)},m.all=function(l){var p=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=l.length,E=!1;if(!w)return this.resolve([]);for(var x=new Array(w),j=0,P=-1,M=new this(s);++P<w;)T(l[P],P);return M;function T(K,rt){p.resolve(K).then(function(b){x[rt]=b,++j!==w||E||(E=!0,e.resolve(M,x))},function(b){E||(E=!0,e.reject(M,b))})}},m.race=function(l){var p=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=l.length,E=!1;if(!w)return this.resolve([]);for(var x=-1,j=new this(s);++x<w;)P=l[x],p.resolve(P).then(function(M){E||(E=!0,e.resolve(j,M))},function(M){E||(E=!0,e.reject(j,M))});var P;return j}},{immediate:36}],38:[function(i,S,y){var h={};(0,i("./lib/utils/common").assign)(h,i("./lib/deflate"),i("./lib/inflate"),i("./lib/zlib/constants")),S.exports=h},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(i,S,y){var h=i("./zlib/deflate"),s=i("./utils/common"),e=i("./utils/strings"),o=i("./zlib/messages"),d=i("./zlib/zstream"),g=Object.prototype.toString,m=0,v=-1,a=0,_=8;function n(l){if(!(this instanceof n))return new n(l);this.options=s.assign({level:v,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:a,to:""},l||{});var p=this.options;p.raw&&0<p.windowBits?p.windowBits=-p.windowBits:p.gzip&&0<p.windowBits&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var w=h.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(w!==m)throw new Error(o[w]);if(p.header&&h.deflateSetHeader(this.strm,p.header),p.dictionary){var E;if(E=typeof p.dictionary=="string"?e.string2buf(p.dictionary):g.call(p.dictionary)==="[object ArrayBuffer]"?new Uint8Array(p.dictionary):p.dictionary,(w=h.deflateSetDictionary(this.strm,E))!==m)throw new Error(o[w]);this._dict_set=!0}}function f(l,p){var w=new n(p);if(w.push(l,!0),w.err)throw w.msg||o[w.err];return w.result}n.prototype.push=function(l,p){var w,E,x=this.strm,j=this.options.chunkSize;if(this.ended)return!1;E=p===~~p?p:p===!0?4:0,typeof l=="string"?x.input=e.string2buf(l):g.call(l)==="[object ArrayBuffer]"?x.input=new Uint8Array(l):x.input=l,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new s.Buf8(j),x.next_out=0,x.avail_out=j),(w=h.deflate(x,E))!==1&&w!==m)return this.onEnd(w),!(this.ended=!0);x.avail_out!==0&&(x.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(e.buf2binstring(s.shrinkBuf(x.output,x.next_out))):this.onData(s.shrinkBuf(x.output,x.next_out)))}while((0<x.avail_in||x.avail_out===0)&&w!==1);return E===4?(w=h.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===m):E!==2||(this.onEnd(m),!(x.avail_out=0))},n.prototype.onData=function(l){this.chunks.push(l)},n.prototype.onEnd=function(l){l===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=l,this.msg=this.strm.msg},y.Deflate=n,y.deflate=f,y.deflateRaw=function(l,p){return(p=p||{}).raw=!0,f(l,p)},y.gzip=function(l,p){return(p=p||{}).gzip=!0,f(l,p)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(i,S,y){var h=i("./zlib/inflate"),s=i("./utils/common"),e=i("./utils/strings"),o=i("./zlib/constants"),d=i("./zlib/messages"),g=i("./zlib/zstream"),m=i("./zlib/gzheader"),v=Object.prototype.toString;function a(n){if(!(this instanceof a))return new a(n);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},n||{});var f=this.options;f.raw&&0<=f.windowBits&&f.windowBits<16&&(f.windowBits=-f.windowBits,f.windowBits===0&&(f.windowBits=-15)),!(0<=f.windowBits&&f.windowBits<16)||n&&n.windowBits||(f.windowBits+=32),15<f.windowBits&&f.windowBits<48&&!(15&f.windowBits)&&(f.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var l=h.inflateInit2(this.strm,f.windowBits);if(l!==o.Z_OK)throw new Error(d[l]);this.header=new m,h.inflateGetHeader(this.strm,this.header)}function _(n,f){var l=new a(f);if(l.push(n,!0),l.err)throw l.msg||d[l.err];return l.result}a.prototype.push=function(n,f){var l,p,w,E,x,j,P=this.strm,M=this.options.chunkSize,T=this.options.dictionary,K=!1;if(this.ended)return!1;p=f===~~f?f:f===!0?o.Z_FINISH:o.Z_NO_FLUSH,typeof n=="string"?P.input=e.binstring2buf(n):v.call(n)==="[object ArrayBuffer]"?P.input=new Uint8Array(n):P.input=n,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new s.Buf8(M),P.next_out=0,P.avail_out=M),(l=h.inflate(P,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&T&&(j=typeof T=="string"?e.string2buf(T):v.call(T)==="[object ArrayBuffer]"?new Uint8Array(T):T,l=h.inflateSetDictionary(this.strm,j)),l===o.Z_BUF_ERROR&&K===!0&&(l=o.Z_OK,K=!1),l!==o.Z_STREAM_END&&l!==o.Z_OK)return this.onEnd(l),!(this.ended=!0);P.next_out&&(P.avail_out!==0&&l!==o.Z_STREAM_END&&(P.avail_in!==0||p!==o.Z_FINISH&&p!==o.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=e.utf8border(P.output,P.next_out),E=P.next_out-w,x=e.buf2string(P.output,w),P.next_out=E,P.avail_out=M-E,E&&s.arraySet(P.output,P.output,w,E,0),this.onData(x)):this.onData(s.shrinkBuf(P.output,P.next_out)))),P.avail_in===0&&P.avail_out===0&&(K=!0)}while((0<P.avail_in||P.avail_out===0)&&l!==o.Z_STREAM_END);return l===o.Z_STREAM_END&&(p=o.Z_FINISH),p===o.Z_FINISH?(l=h.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===o.Z_OK):p!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(P.avail_out=0))},a.prototype.onData=function(n){this.chunks.push(n)},a.prototype.onEnd=function(n){n===o.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg},y.Inflate=a,y.inflate=_,y.inflateRaw=function(n,f){return(f=f||{}).raw=!0,_(n,f)},y.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(i,S,y){var h=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";y.assign=function(o){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var g=d.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(var m in g)g.hasOwnProperty(m)&&(o[m]=g[m])}}return o},y.shrinkBuf=function(o,d){return o.length===d?o:o.subarray?o.subarray(0,d):(o.length=d,o)};var s={arraySet:function(o,d,g,m,v){if(d.subarray&&o.subarray)o.set(d.subarray(g,g+m),v);else for(var a=0;a<m;a++)o[v+a]=d[g+a]},flattenChunks:function(o){var d,g,m,v,a,_;for(d=m=0,g=o.length;d<g;d++)m+=o[d].length;for(_=new Uint8Array(m),d=v=0,g=o.length;d<g;d++)a=o[d],_.set(a,v),v+=a.length;return _}},e={arraySet:function(o,d,g,m,v){for(var a=0;a<m;a++)o[v+a]=d[g+a]},flattenChunks:function(o){return[].concat.apply([],o)}};y.setTyped=function(o){o?(y.Buf8=Uint8Array,y.Buf16=Uint16Array,y.Buf32=Int32Array,y.assign(y,s)):(y.Buf8=Array,y.Buf16=Array,y.Buf32=Array,y.assign(y,e))},y.setTyped(h)},{}],42:[function(i,S,y){var h=i("./common"),s=!0,e=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{e=!1}for(var o=new h.Buf8(256),d=0;d<256;d++)o[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function g(m,v){if(v<65537&&(m.subarray&&e||!m.subarray&&s))return String.fromCharCode.apply(null,h.shrinkBuf(m,v));for(var a="",_=0;_<v;_++)a+=String.fromCharCode(m[_]);return a}o[254]=o[254]=1,y.string2buf=function(m){var v,a,_,n,f,l=m.length,p=0;for(n=0;n<l;n++)(64512&(a=m.charCodeAt(n)))==55296&&n+1<l&&(64512&(_=m.charCodeAt(n+1)))==56320&&(a=65536+(a-55296<<10)+(_-56320),n++),p+=a<128?1:a<2048?2:a<65536?3:4;for(v=new h.Buf8(p),n=f=0;f<p;n++)(64512&(a=m.charCodeAt(n)))==55296&&n+1<l&&(64512&(_=m.charCodeAt(n+1)))==56320&&(a=65536+(a-55296<<10)+(_-56320),n++),a<128?v[f++]=a:(a<2048?v[f++]=192|a>>>6:(a<65536?v[f++]=224|a>>>12:(v[f++]=240|a>>>18,v[f++]=128|a>>>12&63),v[f++]=128|a>>>6&63),v[f++]=128|63&a);return v},y.buf2binstring=function(m){return g(m,m.length)},y.binstring2buf=function(m){for(var v=new h.Buf8(m.length),a=0,_=v.length;a<_;a++)v[a]=m.charCodeAt(a);return v},y.buf2string=function(m,v){var a,_,n,f,l=v||m.length,p=new Array(2*l);for(a=_=0;a<l;)if((n=m[a++])<128)p[_++]=n;else if(4<(f=o[n]))p[_++]=65533,a+=f-1;else{for(n&=f===2?31:f===3?15:7;1<f&&a<l;)n=n<<6|63&m[a++],f--;1<f?p[_++]=65533:n<65536?p[_++]=n:(n-=65536,p[_++]=55296|n>>10&1023,p[_++]=56320|1023&n)}return g(p,_)},y.utf8border=function(m,v){var a;for((v=v||m.length)>m.length&&(v=m.length),a=v-1;0<=a&&(192&m[a])==128;)a--;return a<0||a===0?v:a+o[m[a]]>v?a:v}},{"./common":41}],43:[function(i,S,y){S.exports=function(h,s,e,o){for(var d=65535&h|0,g=h>>>16&65535|0,m=0;e!==0;){for(e-=m=2e3<e?2e3:e;g=g+(d=d+s[o++]|0)|0,--m;);d%=65521,g%=65521}return d|g<<16|0}},{}],44:[function(i,S,y){S.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(i,S,y){var h=function(){for(var s,e=[],o=0;o<256;o++){s=o;for(var d=0;d<8;d++)s=1&s?3988292384^s>>>1:s>>>1;e[o]=s}return e}();S.exports=function(s,e,o,d){var g=h,m=d+o;s^=-1;for(var v=d;v<m;v++)s=s>>>8^g[255&(s^e[v])];return-1^s}},{}],46:[function(i,S,y){var h,s=i("../utils/common"),e=i("./trees"),o=i("./adler32"),d=i("./crc32"),g=i("./messages"),m=0,v=4,a=0,_=-2,n=-1,f=4,l=2,p=8,w=9,E=286,x=30,j=19,P=2*E+1,M=15,T=3,K=258,rt=K+T+1,b=42,N=113,r=1,U=2,it=3,Z=4;function lt(t,D){return t.msg=g[D],D}function W(t){return(t<<1)-(4<t?9:0)}function at(t){for(var D=t.length;0<=--D;)t[D]=0}function A(t){var D=t.state,I=D.pending;I>t.avail_out&&(I=t.avail_out),I!==0&&(s.arraySet(t.output,D.pending_buf,D.pending_out,I,t.next_out),t.next_out+=I,D.pending_out+=I,t.total_out+=I,t.avail_out-=I,D.pending-=I,D.pending===0&&(D.pending_out=0))}function z(t,D){e._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,D),t.block_start=t.strstart,A(t.strm)}function Q(t,D){t.pending_buf[t.pending++]=D}function q(t,D){t.pending_buf[t.pending++]=D>>>8&255,t.pending_buf[t.pending++]=255&D}function Y(t,D){var I,c,u=t.max_chain_length,k=t.strstart,R=t.prev_length,L=t.nice_match,C=t.strstart>t.w_size-rt?t.strstart-(t.w_size-rt):0,F=t.window,$=t.w_mask,H=t.prev,tt=t.strstart+K,yt=F[k+R-1],ot=F[k+R];t.prev_length>=t.good_match&&(u>>=2),L>t.lookahead&&(L=t.lookahead);do if(F[(I=D)+R]===ot&&F[I+R-1]===yt&&F[I]===F[k]&&F[++I]===F[k+1]){k+=2,I++;do;while(F[++k]===F[++I]&&F[++k]===F[++I]&&F[++k]===F[++I]&&F[++k]===F[++I]&&F[++k]===F[++I]&&F[++k]===F[++I]&&F[++k]===F[++I]&&F[++k]===F[++I]&&k<tt);if(c=K-(tt-k),k=tt-K,R<c){if(t.match_start=D,L<=(R=c))break;yt=F[k+R-1],ot=F[k+R]}}while((D=H[D&$])>C&&--u!=0);return R<=t.lookahead?R:t.lookahead}function _t(t){var D,I,c,u,k,R,L,C,F,$,H=t.w_size;do{if(u=t.window_size-t.lookahead-t.strstart,t.strstart>=H+(H-rt)){for(s.arraySet(t.window,t.window,H,H,0),t.match_start-=H,t.strstart-=H,t.block_start-=H,D=I=t.hash_size;c=t.head[--D],t.head[D]=H<=c?c-H:0,--I;);for(D=I=H;c=t.prev[--D],t.prev[D]=H<=c?c-H:0,--I;);u+=H}if(t.strm.avail_in===0)break;if(R=t.strm,L=t.window,C=t.strstart+t.lookahead,F=u,$=void 0,$=R.avail_in,F<$&&($=F),I=$===0?0:(R.avail_in-=$,s.arraySet(L,R.input,R.next_in,$,C),R.state.wrap===1?R.adler=o(R.adler,L,$,C):R.state.wrap===2&&(R.adler=d(R.adler,L,$,C)),R.next_in+=$,R.total_in+=$,$),t.lookahead+=I,t.lookahead+t.insert>=T)for(k=t.strstart-t.insert,t.ins_h=t.window[k],t.ins_h=(t.ins_h<<t.hash_shift^t.window[k+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[k+T-1])&t.hash_mask,t.prev[k&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=k,k++,t.insert--,!(t.lookahead+t.insert<T)););}while(t.lookahead<rt&&t.strm.avail_in!==0)}function wt(t,D){for(var I,c;;){if(t.lookahead<rt){if(_t(t),t.lookahead<rt&&D===m)return r;if(t.lookahead===0)break}if(I=0,t.lookahead>=T&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),I!==0&&t.strstart-I<=t.w_size-rt&&(t.match_length=Y(t,I)),t.match_length>=T)if(c=e._tr_tally(t,t.strstart-t.match_start,t.match_length-T),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=T){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else c=e._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(c&&(z(t,!1),t.strm.avail_out===0))return r}return t.insert=t.strstart<T-1?t.strstart:T-1,D===v?(z(t,!0),t.strm.avail_out===0?it:Z):t.last_lit&&(z(t,!1),t.strm.avail_out===0)?r:U}function ft(t,D){for(var I,c,u;;){if(t.lookahead<rt){if(_t(t),t.lookahead<rt&&D===m)return r;if(t.lookahead===0)break}if(I=0,t.lookahead>=T&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=T-1,I!==0&&t.prev_length<t.max_lazy_match&&t.strstart-I<=t.w_size-rt&&(t.match_length=Y(t,I),t.match_length<=5&&(t.strategy===1||t.match_length===T&&4096<t.strstart-t.match_start)&&(t.match_length=T-1)),t.prev_length>=T&&t.match_length<=t.prev_length){for(u=t.strstart+t.lookahead-T,c=e._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-T),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=u&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=T-1,t.strstart++,c&&(z(t,!1),t.strm.avail_out===0))return r}else if(t.match_available){if((c=e._tr_tally(t,0,t.window[t.strstart-1]))&&z(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return r}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(c=e._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<T-1?t.strstart:T-1,D===v?(z(t,!0),t.strm.avail_out===0?it:Z):t.last_lit&&(z(t,!1),t.strm.avail_out===0)?r:U}function st(t,D,I,c,u){this.good_length=t,this.max_lazy=D,this.nice_length=I,this.max_chain=c,this.func=u}function vt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=p,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*P),this.dyn_dtree=new s.Buf16(2*(2*x+1)),this.bl_tree=new s.Buf16(2*(2*j+1)),at(this.dyn_ltree),at(this.dyn_dtree),at(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(M+1),this.heap=new s.Buf16(2*E+1),at(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*E+1),at(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function xt(t){var D;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=l,(D=t.state).pending=0,D.pending_out=0,D.wrap<0&&(D.wrap=-D.wrap),D.status=D.wrap?b:N,t.adler=D.wrap===2?0:1,D.last_flush=m,e._tr_init(D),a):lt(t,_)}function pt(t){var D=xt(t);return D===a&&function(I){I.window_size=2*I.w_size,at(I.head),I.max_lazy_match=h[I.level].max_lazy,I.good_match=h[I.level].good_length,I.nice_match=h[I.level].nice_length,I.max_chain_length=h[I.level].max_chain,I.strstart=0,I.block_start=0,I.lookahead=0,I.insert=0,I.match_length=I.prev_length=T-1,I.match_available=0,I.ins_h=0}(t.state),D}function Ct(t,D,I,c,u,k){if(!t)return _;var R=1;if(D===n&&(D=6),c<0?(R=0,c=-c):15<c&&(R=2,c-=16),u<1||w<u||I!==p||c<8||15<c||D<0||9<D||k<0||f<k)return lt(t,_);c===8&&(c=9);var L=new vt;return(t.state=L).strm=t,L.wrap=R,L.gzhead=null,L.w_bits=c,L.w_size=1<<L.w_bits,L.w_mask=L.w_size-1,L.hash_bits=u+7,L.hash_size=1<<L.hash_bits,L.hash_mask=L.hash_size-1,L.hash_shift=~~((L.hash_bits+T-1)/T),L.window=new s.Buf8(2*L.w_size),L.head=new s.Buf16(L.hash_size),L.prev=new s.Buf16(L.w_size),L.lit_bufsize=1<<u+6,L.pending_buf_size=4*L.lit_bufsize,L.pending_buf=new s.Buf8(L.pending_buf_size),L.d_buf=1*L.lit_bufsize,L.l_buf=3*L.lit_bufsize,L.level=D,L.strategy=k,L.method=I,pt(t)}h=[new st(0,0,0,0,function(t,D){var I=65535;for(I>t.pending_buf_size-5&&(I=t.pending_buf_size-5);;){if(t.lookahead<=1){if(_t(t),t.lookahead===0&&D===m)return r;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var c=t.block_start+I;if((t.strstart===0||t.strstart>=c)&&(t.lookahead=t.strstart-c,t.strstart=c,z(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-rt&&(z(t,!1),t.strm.avail_out===0))return r}return t.insert=0,D===v?(z(t,!0),t.strm.avail_out===0?it:Z):(t.strstart>t.block_start&&(z(t,!1),t.strm.avail_out),r)}),new st(4,4,8,4,wt),new st(4,5,16,8,wt),new st(4,6,32,32,wt),new st(4,4,16,16,ft),new st(8,16,32,32,ft),new st(8,16,128,128,ft),new st(8,32,128,256,ft),new st(32,128,258,1024,ft),new st(32,258,258,4096,ft)],y.deflateInit=function(t,D){return Ct(t,D,p,15,8,0)},y.deflateInit2=Ct,y.deflateReset=pt,y.deflateResetKeep=xt,y.deflateSetHeader=function(t,D){return t&&t.state?t.state.wrap!==2?_:(t.state.gzhead=D,a):_},y.deflate=function(t,D){var I,c,u,k;if(!t||!t.state||5<D||D<0)return t?lt(t,_):_;if(c=t.state,!t.output||!t.input&&t.avail_in!==0||c.status===666&&D!==v)return lt(t,t.avail_out===0?-5:_);if(c.strm=t,I=c.last_flush,c.last_flush=D,c.status===b)if(c.wrap===2)t.adler=0,Q(c,31),Q(c,139),Q(c,8),c.gzhead?(Q(c,(c.gzhead.text?1:0)+(c.gzhead.hcrc?2:0)+(c.gzhead.extra?4:0)+(c.gzhead.name?8:0)+(c.gzhead.comment?16:0)),Q(c,255&c.gzhead.time),Q(c,c.gzhead.time>>8&255),Q(c,c.gzhead.time>>16&255),Q(c,c.gzhead.time>>24&255),Q(c,c.level===9?2:2<=c.strategy||c.level<2?4:0),Q(c,255&c.gzhead.os),c.gzhead.extra&&c.gzhead.extra.length&&(Q(c,255&c.gzhead.extra.length),Q(c,c.gzhead.extra.length>>8&255)),c.gzhead.hcrc&&(t.adler=d(t.adler,c.pending_buf,c.pending,0)),c.gzindex=0,c.status=69):(Q(c,0),Q(c,0),Q(c,0),Q(c,0),Q(c,0),Q(c,c.level===9?2:2<=c.strategy||c.level<2?4:0),Q(c,3),c.status=N);else{var R=p+(c.w_bits-8<<4)<<8;R|=(2<=c.strategy||c.level<2?0:c.level<6?1:c.level===6?2:3)<<6,c.strstart!==0&&(R|=32),R+=31-R%31,c.status=N,q(c,R),c.strstart!==0&&(q(c,t.adler>>>16),q(c,65535&t.adler)),t.adler=1}if(c.status===69)if(c.gzhead.extra){for(u=c.pending;c.gzindex<(65535&c.gzhead.extra.length)&&(c.pending!==c.pending_buf_size||(c.gzhead.hcrc&&c.pending>u&&(t.adler=d(t.adler,c.pending_buf,c.pending-u,u)),A(t),u=c.pending,c.pending!==c.pending_buf_size));)Q(c,255&c.gzhead.extra[c.gzindex]),c.gzindex++;c.gzhead.hcrc&&c.pending>u&&(t.adler=d(t.adler,c.pending_buf,c.pending-u,u)),c.gzindex===c.gzhead.extra.length&&(c.gzindex=0,c.status=73)}else c.status=73;if(c.status===73)if(c.gzhead.name){u=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>u&&(t.adler=d(t.adler,c.pending_buf,c.pending-u,u)),A(t),u=c.pending,c.pending===c.pending_buf_size)){k=1;break}k=c.gzindex<c.gzhead.name.length?255&c.gzhead.name.charCodeAt(c.gzindex++):0,Q(c,k)}while(k!==0);c.gzhead.hcrc&&c.pending>u&&(t.adler=d(t.adler,c.pending_buf,c.pending-u,u)),k===0&&(c.gzindex=0,c.status=91)}else c.status=91;if(c.status===91)if(c.gzhead.comment){u=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>u&&(t.adler=d(t.adler,c.pending_buf,c.pending-u,u)),A(t),u=c.pending,c.pending===c.pending_buf_size)){k=1;break}k=c.gzindex<c.gzhead.comment.length?255&c.gzhead.comment.charCodeAt(c.gzindex++):0,Q(c,k)}while(k!==0);c.gzhead.hcrc&&c.pending>u&&(t.adler=d(t.adler,c.pending_buf,c.pending-u,u)),k===0&&(c.status=103)}else c.status=103;if(c.status===103&&(c.gzhead.hcrc?(c.pending+2>c.pending_buf_size&&A(t),c.pending+2<=c.pending_buf_size&&(Q(c,255&t.adler),Q(c,t.adler>>8&255),t.adler=0,c.status=N)):c.status=N),c.pending!==0){if(A(t),t.avail_out===0)return c.last_flush=-1,a}else if(t.avail_in===0&&W(D)<=W(I)&&D!==v)return lt(t,-5);if(c.status===666&&t.avail_in!==0)return lt(t,-5);if(t.avail_in!==0||c.lookahead!==0||D!==m&&c.status!==666){var L=c.strategy===2?function(C,F){for(var $;;){if(C.lookahead===0&&(_t(C),C.lookahead===0)){if(F===m)return r;break}if(C.match_length=0,$=e._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++,$&&(z(C,!1),C.strm.avail_out===0))return r}return C.insert=0,F===v?(z(C,!0),C.strm.avail_out===0?it:Z):C.last_lit&&(z(C,!1),C.strm.avail_out===0)?r:U}(c,D):c.strategy===3?function(C,F){for(var $,H,tt,yt,ot=C.window;;){if(C.lookahead<=K){if(_t(C),C.lookahead<=K&&F===m)return r;if(C.lookahead===0)break}if(C.match_length=0,C.lookahead>=T&&0<C.strstart&&(H=ot[tt=C.strstart-1])===ot[++tt]&&H===ot[++tt]&&H===ot[++tt]){yt=C.strstart+K;do;while(H===ot[++tt]&&H===ot[++tt]&&H===ot[++tt]&&H===ot[++tt]&&H===ot[++tt]&&H===ot[++tt]&&H===ot[++tt]&&H===ot[++tt]&&tt<yt);C.match_length=K-(yt-tt),C.match_length>C.lookahead&&(C.match_length=C.lookahead)}if(C.match_length>=T?($=e._tr_tally(C,1,C.match_length-T),C.lookahead-=C.match_length,C.strstart+=C.match_length,C.match_length=0):($=e._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++),$&&(z(C,!1),C.strm.avail_out===0))return r}return C.insert=0,F===v?(z(C,!0),C.strm.avail_out===0?it:Z):C.last_lit&&(z(C,!1),C.strm.avail_out===0)?r:U}(c,D):h[c.level].func(c,D);if(L!==it&&L!==Z||(c.status=666),L===r||L===it)return t.avail_out===0&&(c.last_flush=-1),a;if(L===U&&(D===1?e._tr_align(c):D!==5&&(e._tr_stored_block(c,0,0,!1),D===3&&(at(c.head),c.lookahead===0&&(c.strstart=0,c.block_start=0,c.insert=0))),A(t),t.avail_out===0))return c.last_flush=-1,a}return D!==v?a:c.wrap<=0?1:(c.wrap===2?(Q(c,255&t.adler),Q(c,t.adler>>8&255),Q(c,t.adler>>16&255),Q(c,t.adler>>24&255),Q(c,255&t.total_in),Q(c,t.total_in>>8&255),Q(c,t.total_in>>16&255),Q(c,t.total_in>>24&255)):(q(c,t.adler>>>16),q(c,65535&t.adler)),A(t),0<c.wrap&&(c.wrap=-c.wrap),c.pending!==0?a:1)},y.deflateEnd=function(t){var D;return t&&t.state?(D=t.state.status)!==b&&D!==69&&D!==73&&D!==91&&D!==103&&D!==N&&D!==666?lt(t,_):(t.state=null,D===N?lt(t,-3):a):_},y.deflateSetDictionary=function(t,D){var I,c,u,k,R,L,C,F,$=D.length;if(!t||!t.state||(k=(I=t.state).wrap)===2||k===1&&I.status!==b||I.lookahead)return _;for(k===1&&(t.adler=o(t.adler,D,$,0)),I.wrap=0,$>=I.w_size&&(k===0&&(at(I.head),I.strstart=0,I.block_start=0,I.insert=0),F=new s.Buf8(I.w_size),s.arraySet(F,D,$-I.w_size,I.w_size,0),D=F,$=I.w_size),R=t.avail_in,L=t.next_in,C=t.input,t.avail_in=$,t.next_in=0,t.input=D,_t(I);I.lookahead>=T;){for(c=I.strstart,u=I.lookahead-(T-1);I.ins_h=(I.ins_h<<I.hash_shift^I.window[c+T-1])&I.hash_mask,I.prev[c&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=c,c++,--u;);I.strstart=c,I.lookahead=T-1,_t(I)}return I.strstart+=I.lookahead,I.block_start=I.strstart,I.insert=I.lookahead,I.lookahead=0,I.match_length=I.prev_length=T-1,I.match_available=0,t.next_in=L,t.input=C,t.avail_in=R,I.wrap=k,a},y.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(i,S,y){S.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(i,S,y){S.exports=function(h,s){var e,o,d,g,m,v,a,_,n,f,l,p,w,E,x,j,P,M,T,K,rt,b,N,r,U;e=h.state,o=h.next_in,r=h.input,d=o+(h.avail_in-5),g=h.next_out,U=h.output,m=g-(s-h.avail_out),v=g+(h.avail_out-257),a=e.dmax,_=e.wsize,n=e.whave,f=e.wnext,l=e.window,p=e.hold,w=e.bits,E=e.lencode,x=e.distcode,j=(1<<e.lenbits)-1,P=(1<<e.distbits)-1;t:do{w<15&&(p+=r[o++]<<w,w+=8,p+=r[o++]<<w,w+=8),M=E[p&j];e:for(;;){if(p>>>=T=M>>>24,w-=T,(T=M>>>16&255)===0)U[g++]=65535&M;else{if(!(16&T)){if(!(64&T)){M=E[(65535&M)+(p&(1<<T)-1)];continue e}if(32&T){e.mode=12;break t}h.msg="invalid literal/length code",e.mode=30;break t}K=65535&M,(T&=15)&&(w<T&&(p+=r[o++]<<w,w+=8),K+=p&(1<<T)-1,p>>>=T,w-=T),w<15&&(p+=r[o++]<<w,w+=8,p+=r[o++]<<w,w+=8),M=x[p&P];r:for(;;){if(p>>>=T=M>>>24,w-=T,!(16&(T=M>>>16&255))){if(!(64&T)){M=x[(65535&M)+(p&(1<<T)-1)];continue r}h.msg="invalid distance code",e.mode=30;break t}if(rt=65535&M,w<(T&=15)&&(p+=r[o++]<<w,(w+=8)<T&&(p+=r[o++]<<w,w+=8)),a<(rt+=p&(1<<T)-1)){h.msg="invalid distance too far back",e.mode=30;break t}if(p>>>=T,w-=T,(T=g-m)<rt){if(n<(T=rt-T)&&e.sane){h.msg="invalid distance too far back",e.mode=30;break t}if(N=l,(b=0)===f){if(b+=_-T,T<K){for(K-=T;U[g++]=l[b++],--T;);b=g-rt,N=U}}else if(f<T){if(b+=_+f-T,(T-=f)<K){for(K-=T;U[g++]=l[b++],--T;);if(b=0,f<K){for(K-=T=f;U[g++]=l[b++],--T;);b=g-rt,N=U}}}else if(b+=f-T,T<K){for(K-=T;U[g++]=l[b++],--T;);b=g-rt,N=U}for(;2<K;)U[g++]=N[b++],U[g++]=N[b++],U[g++]=N[b++],K-=3;K&&(U[g++]=N[b++],1<K&&(U[g++]=N[b++]))}else{for(b=g-rt;U[g++]=U[b++],U[g++]=U[b++],U[g++]=U[b++],2<(K-=3););K&&(U[g++]=U[b++],1<K&&(U[g++]=U[b++]))}break}}break}}while(o<d&&g<v);o-=K=w>>3,p&=(1<<(w-=K<<3))-1,h.next_in=o,h.next_out=g,h.avail_in=o<d?d-o+5:5-(o-d),h.avail_out=g<v?v-g+257:257-(g-v),e.hold=p,e.bits=w}},{}],49:[function(i,S,y){var h=i("../utils/common"),s=i("./adler32"),e=i("./crc32"),o=i("./inffast"),d=i("./inftrees"),g=1,m=2,v=0,a=-2,_=1,n=852,f=592;function l(b){return(b>>>24&255)+(b>>>8&65280)+((65280&b)<<8)+((255&b)<<24)}function p(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new h.Buf16(320),this.work=new h.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(b){var N;return b&&b.state?(N=b.state,b.total_in=b.total_out=N.total=0,b.msg="",N.wrap&&(b.adler=1&N.wrap),N.mode=_,N.last=0,N.havedict=0,N.dmax=32768,N.head=null,N.hold=0,N.bits=0,N.lencode=N.lendyn=new h.Buf32(n),N.distcode=N.distdyn=new h.Buf32(f),N.sane=1,N.back=-1,v):a}function E(b){var N;return b&&b.state?((N=b.state).wsize=0,N.whave=0,N.wnext=0,w(b)):a}function x(b,N){var r,U;return b&&b.state?(U=b.state,N<0?(r=0,N=-N):(r=1+(N>>4),N<48&&(N&=15)),N&&(N<8||15<N)?a:(U.window!==null&&U.wbits!==N&&(U.window=null),U.wrap=r,U.wbits=N,E(b))):a}function j(b,N){var r,U;return b?(U=new p,(b.state=U).window=null,(r=x(b,N))!==v&&(b.state=null),r):a}var P,M,T=!0;function K(b){if(T){var N;for(P=new h.Buf32(512),M=new h.Buf32(32),N=0;N<144;)b.lens[N++]=8;for(;N<256;)b.lens[N++]=9;for(;N<280;)b.lens[N++]=7;for(;N<288;)b.lens[N++]=8;for(d(g,b.lens,0,288,P,0,b.work,{bits:9}),N=0;N<32;)b.lens[N++]=5;d(m,b.lens,0,32,M,0,b.work,{bits:5}),T=!1}b.lencode=P,b.lenbits=9,b.distcode=M,b.distbits=5}function rt(b,N,r,U){var it,Z=b.state;return Z.window===null&&(Z.wsize=1<<Z.wbits,Z.wnext=0,Z.whave=0,Z.window=new h.Buf8(Z.wsize)),U>=Z.wsize?(h.arraySet(Z.window,N,r-Z.wsize,Z.wsize,0),Z.wnext=0,Z.whave=Z.wsize):(U<(it=Z.wsize-Z.wnext)&&(it=U),h.arraySet(Z.window,N,r-U,it,Z.wnext),(U-=it)?(h.arraySet(Z.window,N,r-U,U,0),Z.wnext=U,Z.whave=Z.wsize):(Z.wnext+=it,Z.wnext===Z.wsize&&(Z.wnext=0),Z.whave<Z.wsize&&(Z.whave+=it))),0}y.inflateReset=E,y.inflateReset2=x,y.inflateResetKeep=w,y.inflateInit=function(b){return j(b,15)},y.inflateInit2=j,y.inflate=function(b,N){var r,U,it,Z,lt,W,at,A,z,Q,q,Y,_t,wt,ft,st,vt,xt,pt,Ct,t,D,I,c,u=0,k=new h.Buf8(4),R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!b||!b.state||!b.output||!b.input&&b.avail_in!==0)return a;(r=b.state).mode===12&&(r.mode=13),lt=b.next_out,it=b.output,at=b.avail_out,Z=b.next_in,U=b.input,W=b.avail_in,A=r.hold,z=r.bits,Q=W,q=at,D=v;t:for(;;)switch(r.mode){case _:if(r.wrap===0){r.mode=13;break}for(;z<16;){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}if(2&r.wrap&&A===35615){k[r.check=0]=255&A,k[1]=A>>>8&255,r.check=e(r.check,k,2,0),z=A=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&A)<<8)+(A>>8))%31){b.msg="incorrect header check",r.mode=30;break}if((15&A)!=8){b.msg="unknown compression method",r.mode=30;break}if(z-=4,t=8+(15&(A>>>=4)),r.wbits===0)r.wbits=t;else if(t>r.wbits){b.msg="invalid window size",r.mode=30;break}r.dmax=1<<t,b.adler=r.check=1,r.mode=512&A?10:12,z=A=0;break;case 2:for(;z<16;){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}if(r.flags=A,(255&r.flags)!=8){b.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){b.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=A>>8&1),512&r.flags&&(k[0]=255&A,k[1]=A>>>8&255,r.check=e(r.check,k,2,0)),z=A=0,r.mode=3;case 3:for(;z<32;){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}r.head&&(r.head.time=A),512&r.flags&&(k[0]=255&A,k[1]=A>>>8&255,k[2]=A>>>16&255,k[3]=A>>>24&255,r.check=e(r.check,k,4,0)),z=A=0,r.mode=4;case 4:for(;z<16;){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}r.head&&(r.head.xflags=255&A,r.head.os=A>>8),512&r.flags&&(k[0]=255&A,k[1]=A>>>8&255,r.check=e(r.check,k,2,0)),z=A=0,r.mode=5;case 5:if(1024&r.flags){for(;z<16;){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}r.length=A,r.head&&(r.head.extra_len=A),512&r.flags&&(k[0]=255&A,k[1]=A>>>8&255,r.check=e(r.check,k,2,0)),z=A=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(W<(Y=r.length)&&(Y=W),Y&&(r.head&&(t=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),h.arraySet(r.head.extra,U,Z,Y,t)),512&r.flags&&(r.check=e(r.check,U,Y,Z)),W-=Y,Z+=Y,r.length-=Y),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(W===0)break t;for(Y=0;t=U[Z+Y++],r.head&&t&&r.length<65536&&(r.head.name+=String.fromCharCode(t)),t&&Y<W;);if(512&r.flags&&(r.check=e(r.check,U,Y,Z)),W-=Y,Z+=Y,t)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(W===0)break t;for(Y=0;t=U[Z+Y++],r.head&&t&&r.length<65536&&(r.head.comment+=String.fromCharCode(t)),t&&Y<W;);if(512&r.flags&&(r.check=e(r.check,U,Y,Z)),W-=Y,Z+=Y,t)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;z<16;){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}if(A!==(65535&r.check)){b.msg="header crc mismatch",r.mode=30;break}z=A=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),b.adler=r.check=0,r.mode=12;break;case 10:for(;z<32;){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}b.adler=r.check=l(A),z=A=0,r.mode=11;case 11:if(r.havedict===0)return b.next_out=lt,b.avail_out=at,b.next_in=Z,b.avail_in=W,r.hold=A,r.bits=z,2;b.adler=r.check=1,r.mode=12;case 12:if(N===5||N===6)break t;case 13:if(r.last){A>>>=7&z,z-=7&z,r.mode=27;break}for(;z<3;){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}switch(r.last=1&A,z-=1,3&(A>>>=1)){case 0:r.mode=14;break;case 1:if(K(r),r.mode=20,N!==6)break;A>>>=2,z-=2;break t;case 2:r.mode=17;break;case 3:b.msg="invalid block type",r.mode=30}A>>>=2,z-=2;break;case 14:for(A>>>=7&z,z-=7&z;z<32;){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}if((65535&A)!=(A>>>16^65535)){b.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&A,z=A=0,r.mode=15,N===6)break t;case 15:r.mode=16;case 16:if(Y=r.length){if(W<Y&&(Y=W),at<Y&&(Y=at),Y===0)break t;h.arraySet(it,U,Z,Y,lt),W-=Y,Z+=Y,at-=Y,lt+=Y,r.length-=Y;break}r.mode=12;break;case 17:for(;z<14;){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}if(r.nlen=257+(31&A),A>>>=5,z-=5,r.ndist=1+(31&A),A>>>=5,z-=5,r.ncode=4+(15&A),A>>>=4,z-=4,286<r.nlen||30<r.ndist){b.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;z<3;){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}r.lens[R[r.have++]]=7&A,A>>>=3,z-=3}for(;r.have<19;)r.lens[R[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,I={bits:r.lenbits},D=d(0,r.lens,0,19,r.lencode,0,r.work,I),r.lenbits=I.bits,D){b.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;st=(u=r.lencode[A&(1<<r.lenbits)-1])>>>16&255,vt=65535&u,!((ft=u>>>24)<=z);){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}if(vt<16)A>>>=ft,z-=ft,r.lens[r.have++]=vt;else{if(vt===16){for(c=ft+2;z<c;){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}if(A>>>=ft,z-=ft,r.have===0){b.msg="invalid bit length repeat",r.mode=30;break}t=r.lens[r.have-1],Y=3+(3&A),A>>>=2,z-=2}else if(vt===17){for(c=ft+3;z<c;){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}z-=ft,t=0,Y=3+(7&(A>>>=ft)),A>>>=3,z-=3}else{for(c=ft+7;z<c;){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}z-=ft,t=0,Y=11+(127&(A>>>=ft)),A>>>=7,z-=7}if(r.have+Y>r.nlen+r.ndist){b.msg="invalid bit length repeat",r.mode=30;break}for(;Y--;)r.lens[r.have++]=t}}if(r.mode===30)break;if(r.lens[256]===0){b.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,I={bits:r.lenbits},D=d(g,r.lens,0,r.nlen,r.lencode,0,r.work,I),r.lenbits=I.bits,D){b.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,I={bits:r.distbits},D=d(m,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,I),r.distbits=I.bits,D){b.msg="invalid distances set",r.mode=30;break}if(r.mode=20,N===6)break t;case 20:r.mode=21;case 21:if(6<=W&&258<=at){b.next_out=lt,b.avail_out=at,b.next_in=Z,b.avail_in=W,r.hold=A,r.bits=z,o(b,q),lt=b.next_out,it=b.output,at=b.avail_out,Z=b.next_in,U=b.input,W=b.avail_in,A=r.hold,z=r.bits,r.mode===12&&(r.back=-1);break}for(r.back=0;st=(u=r.lencode[A&(1<<r.lenbits)-1])>>>16&255,vt=65535&u,!((ft=u>>>24)<=z);){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}if(st&&!(240&st)){for(xt=ft,pt=st,Ct=vt;st=(u=r.lencode[Ct+((A&(1<<xt+pt)-1)>>xt)])>>>16&255,vt=65535&u,!(xt+(ft=u>>>24)<=z);){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}A>>>=xt,z-=xt,r.back+=xt}if(A>>>=ft,z-=ft,r.back+=ft,r.length=vt,st===0){r.mode=26;break}if(32&st){r.back=-1,r.mode=12;break}if(64&st){b.msg="invalid literal/length code",r.mode=30;break}r.extra=15&st,r.mode=22;case 22:if(r.extra){for(c=r.extra;z<c;){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}r.length+=A&(1<<r.extra)-1,A>>>=r.extra,z-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;st=(u=r.distcode[A&(1<<r.distbits)-1])>>>16&255,vt=65535&u,!((ft=u>>>24)<=z);){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}if(!(240&st)){for(xt=ft,pt=st,Ct=vt;st=(u=r.distcode[Ct+((A&(1<<xt+pt)-1)>>xt)])>>>16&255,vt=65535&u,!(xt+(ft=u>>>24)<=z);){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}A>>>=xt,z-=xt,r.back+=xt}if(A>>>=ft,z-=ft,r.back+=ft,64&st){b.msg="invalid distance code",r.mode=30;break}r.offset=vt,r.extra=15&st,r.mode=24;case 24:if(r.extra){for(c=r.extra;z<c;){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}r.offset+=A&(1<<r.extra)-1,A>>>=r.extra,z-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){b.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(at===0)break t;if(Y=q-at,r.offset>Y){if((Y=r.offset-Y)>r.whave&&r.sane){b.msg="invalid distance too far back",r.mode=30;break}_t=Y>r.wnext?(Y-=r.wnext,r.wsize-Y):r.wnext-Y,Y>r.length&&(Y=r.length),wt=r.window}else wt=it,_t=lt-r.offset,Y=r.length;for(at<Y&&(Y=at),at-=Y,r.length-=Y;it[lt++]=wt[_t++],--Y;);r.length===0&&(r.mode=21);break;case 26:if(at===0)break t;it[lt++]=r.length,at--,r.mode=21;break;case 27:if(r.wrap){for(;z<32;){if(W===0)break t;W--,A|=U[Z++]<<z,z+=8}if(q-=at,b.total_out+=q,r.total+=q,q&&(b.adler=r.check=r.flags?e(r.check,it,q,lt-q):s(r.check,it,q,lt-q)),q=at,(r.flags?A:l(A))!==r.check){b.msg="incorrect data check",r.mode=30;break}z=A=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;z<32;){if(W===0)break t;W--,A+=U[Z++]<<z,z+=8}if(A!==(4294967295&r.total)){b.msg="incorrect length check",r.mode=30;break}z=A=0}r.mode=29;case 29:D=1;break t;case 30:D=-3;break t;case 31:return-4;case 32:default:return a}return b.next_out=lt,b.avail_out=at,b.next_in=Z,b.avail_in=W,r.hold=A,r.bits=z,(r.wsize||q!==b.avail_out&&r.mode<30&&(r.mode<27||N!==4))&&rt(b,b.output,b.next_out,q-b.avail_out)?(r.mode=31,-4):(Q-=b.avail_in,q-=b.avail_out,b.total_in+=Q,b.total_out+=q,r.total+=q,r.wrap&&q&&(b.adler=r.check=r.flags?e(r.check,it,q,b.next_out-q):s(r.check,it,q,b.next_out-q)),b.data_type=r.bits+(r.last?64:0)+(r.mode===12?128:0)+(r.mode===20||r.mode===15?256:0),(Q==0&&q===0||N===4)&&D===v&&(D=-5),D)},y.inflateEnd=function(b){if(!b||!b.state)return a;var N=b.state;return N.window&&(N.window=null),b.state=null,v},y.inflateGetHeader=function(b,N){var r;return b&&b.state&&2&(r=b.state).wrap?((r.head=N).done=!1,v):a},y.inflateSetDictionary=function(b,N){var r,U=N.length;return b&&b.state?(r=b.state).wrap!==0&&r.mode!==11?a:r.mode===11&&s(1,N,U,0)!==r.check?-3:rt(b,N,U,U)?(r.mode=31,-4):(r.havedict=1,v):a},y.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(i,S,y){var h=i("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],e=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];S.exports=function(g,m,v,a,_,n,f,l){var p,w,E,x,j,P,M,T,K,rt=l.bits,b=0,N=0,r=0,U=0,it=0,Z=0,lt=0,W=0,at=0,A=0,z=null,Q=0,q=new h.Buf16(16),Y=new h.Buf16(16),_t=null,wt=0;for(b=0;b<=15;b++)q[b]=0;for(N=0;N<a;N++)q[m[v+N]]++;for(it=rt,U=15;1<=U&&q[U]===0;U--);if(U<it&&(it=U),U===0)return _[n++]=20971520,_[n++]=20971520,l.bits=1,0;for(r=1;r<U&&q[r]===0;r++);for(it<r&&(it=r),b=W=1;b<=15;b++)if(W<<=1,(W-=q[b])<0)return-1;if(0<W&&(g===0||U!==1))return-1;for(Y[1]=0,b=1;b<15;b++)Y[b+1]=Y[b]+q[b];for(N=0;N<a;N++)m[v+N]!==0&&(f[Y[m[v+N]]++]=N);if(P=g===0?(z=_t=f,19):g===1?(z=s,Q-=257,_t=e,wt-=257,256):(z=o,_t=d,-1),b=r,j=n,lt=N=A=0,E=-1,x=(at=1<<(Z=it))-1,g===1&&852<at||g===2&&592<at)return 1;for(;;){for(M=b-lt,K=f[N]<P?(T=0,f[N]):f[N]>P?(T=_t[wt+f[N]],z[Q+f[N]]):(T=96,0),p=1<<b-lt,r=w=1<<Z;_[j+(A>>lt)+(w-=p)]=M<<24|T<<16|K|0,w!==0;);for(p=1<<b-1;A&p;)p>>=1;if(p!==0?(A&=p-1,A+=p):A=0,N++,--q[b]==0){if(b===U)break;b=m[v+f[N]]}if(it<b&&(A&x)!==E){for(lt===0&&(lt=it),j+=r,W=1<<(Z=b-lt);Z+lt<U&&!((W-=q[Z+lt])<=0);)Z++,W<<=1;if(at+=1<<Z,g===1&&852<at||g===2&&592<at)return 1;_[E=A&x]=it<<24|Z<<16|j-n|0}}return A!==0&&(_[j+A]=b-lt<<24|64<<16|0),l.bits=it,0}},{"../utils/common":41}],51:[function(i,S,y){S.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(i,S,y){var h=i("../utils/common"),s=0,e=1;function o(u){for(var k=u.length;0<=--k;)u[k]=0}var d=0,g=29,m=256,v=m+1+g,a=30,_=19,n=2*v+1,f=15,l=16,p=7,w=256,E=16,x=17,j=18,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],rt=new Array(2*(v+2));o(rt);var b=new Array(2*a);o(b);var N=new Array(512);o(N);var r=new Array(256);o(r);var U=new Array(g);o(U);var it,Z,lt,W=new Array(a);function at(u,k,R,L,C){this.static_tree=u,this.extra_bits=k,this.extra_base=R,this.elems=L,this.max_length=C,this.has_stree=u&&u.length}function A(u,k){this.dyn_tree=u,this.max_code=0,this.stat_desc=k}function z(u){return u<256?N[u]:N[256+(u>>>7)]}function Q(u,k){u.pending_buf[u.pending++]=255&k,u.pending_buf[u.pending++]=k>>>8&255}function q(u,k,R){u.bi_valid>l-R?(u.bi_buf|=k<<u.bi_valid&65535,Q(u,u.bi_buf),u.bi_buf=k>>l-u.bi_valid,u.bi_valid+=R-l):(u.bi_buf|=k<<u.bi_valid&65535,u.bi_valid+=R)}function Y(u,k,R){q(u,R[2*k],R[2*k+1])}function _t(u,k){for(var R=0;R|=1&u,u>>>=1,R<<=1,0<--k;);return R>>>1}function wt(u,k,R){var L,C,F=new Array(f+1),$=0;for(L=1;L<=f;L++)F[L]=$=$+R[L-1]<<1;for(C=0;C<=k;C++){var H=u[2*C+1];H!==0&&(u[2*C]=_t(F[H]++,H))}}function ft(u){var k;for(k=0;k<v;k++)u.dyn_ltree[2*k]=0;for(k=0;k<a;k++)u.dyn_dtree[2*k]=0;for(k=0;k<_;k++)u.bl_tree[2*k]=0;u.dyn_ltree[2*w]=1,u.opt_len=u.static_len=0,u.last_lit=u.matches=0}function st(u){8<u.bi_valid?Q(u,u.bi_buf):0<u.bi_valid&&(u.pending_buf[u.pending++]=u.bi_buf),u.bi_buf=0,u.bi_valid=0}function vt(u,k,R,L){var C=2*k,F=2*R;return u[C]<u[F]||u[C]===u[F]&&L[k]<=L[R]}function xt(u,k,R){for(var L=u.heap[R],C=R<<1;C<=u.heap_len&&(C<u.heap_len&&vt(k,u.heap[C+1],u.heap[C],u.depth)&&C++,!vt(k,L,u.heap[C],u.depth));)u.heap[R]=u.heap[C],R=C,C<<=1;u.heap[R]=L}function pt(u,k,R){var L,C,F,$,H=0;if(u.last_lit!==0)for(;L=u.pending_buf[u.d_buf+2*H]<<8|u.pending_buf[u.d_buf+2*H+1],C=u.pending_buf[u.l_buf+H],H++,L===0?Y(u,C,k):(Y(u,(F=r[C])+m+1,k),($=P[F])!==0&&q(u,C-=U[F],$),Y(u,F=z(--L),R),($=M[F])!==0&&q(u,L-=W[F],$)),H<u.last_lit;);Y(u,w,k)}function Ct(u,k){var R,L,C,F=k.dyn_tree,$=k.stat_desc.static_tree,H=k.stat_desc.has_stree,tt=k.stat_desc.elems,yt=-1;for(u.heap_len=0,u.heap_max=n,R=0;R<tt;R++)F[2*R]!==0?(u.heap[++u.heap_len]=yt=R,u.depth[R]=0):F[2*R+1]=0;for(;u.heap_len<2;)F[2*(C=u.heap[++u.heap_len]=yt<2?++yt:0)]=1,u.depth[C]=0,u.opt_len--,H&&(u.static_len-=$[2*C+1]);for(k.max_code=yt,R=u.heap_len>>1;1<=R;R--)xt(u,F,R);for(C=tt;R=u.heap[1],u.heap[1]=u.heap[u.heap_len--],xt(u,F,1),L=u.heap[1],u.heap[--u.heap_max]=R,u.heap[--u.heap_max]=L,F[2*C]=F[2*R]+F[2*L],u.depth[C]=(u.depth[R]>=u.depth[L]?u.depth[R]:u.depth[L])+1,F[2*R+1]=F[2*L+1]=C,u.heap[1]=C++,xt(u,F,1),2<=u.heap_len;);u.heap[--u.heap_max]=u.heap[1],function(ot,Bt){var Xt,Et,Tt,St,Dt,De,It=Bt.dyn_tree,Ne=Bt.max_code,Le=Bt.stat_desc.static_tree,Rt=Bt.stat_desc.has_stree,Zt=Bt.stat_desc.extra_bits,Ht=Bt.stat_desc.extra_base,ne=Bt.stat_desc.max_length,ie=0;for(St=0;St<=f;St++)ot.bl_count[St]=0;for(It[2*ot.heap[ot.heap_max]+1]=0,Xt=ot.heap_max+1;Xt<n;Xt++)ne<(St=It[2*It[2*(Et=ot.heap[Xt])+1]+1]+1)&&(St=ne,ie++),It[2*Et+1]=St,Ne<Et||(ot.bl_count[St]++,Dt=0,Ht<=Et&&(Dt=Zt[Et-Ht]),De=It[2*Et],ot.opt_len+=De*(St+Dt),Rt&&(ot.static_len+=De*(Le[2*Et+1]+Dt)));if(ie!==0){do{for(St=ne-1;ot.bl_count[St]===0;)St--;ot.bl_count[St]--,ot.bl_count[St+1]+=2,ot.bl_count[ne]--,ie-=2}while(0<ie);for(St=ne;St!==0;St--)for(Et=ot.bl_count[St];Et!==0;)Ne<(Tt=ot.heap[--Xt])||(It[2*Tt+1]!==St&&(ot.opt_len+=(St-It[2*Tt+1])*It[2*Tt],It[2*Tt+1]=St),Et--)}}(u,k),wt(F,yt,u.bl_count)}function t(u,k,R){var L,C,F=-1,$=k[1],H=0,tt=7,yt=4;for($===0&&(tt=138,yt=3),k[2*(R+1)+1]=65535,L=0;L<=R;L++)C=$,$=k[2*(L+1)+1],++H<tt&&C===$||(H<yt?u.bl_tree[2*C]+=H:C!==0?(C!==F&&u.bl_tree[2*C]++,u.bl_tree[2*E]++):H<=10?u.bl_tree[2*x]++:u.bl_tree[2*j]++,F=C,yt=(H=0)===$?(tt=138,3):C===$?(tt=6,3):(tt=7,4))}function D(u,k,R){var L,C,F=-1,$=k[1],H=0,tt=7,yt=4;for($===0&&(tt=138,yt=3),L=0;L<=R;L++)if(C=$,$=k[2*(L+1)+1],!(++H<tt&&C===$)){if(H<yt)for(;Y(u,C,u.bl_tree),--H!=0;);else C!==0?(C!==F&&(Y(u,C,u.bl_tree),H--),Y(u,E,u.bl_tree),q(u,H-3,2)):H<=10?(Y(u,x,u.bl_tree),q(u,H-3,3)):(Y(u,j,u.bl_tree),q(u,H-11,7));F=C,yt=(H=0)===$?(tt=138,3):C===$?(tt=6,3):(tt=7,4)}}o(W);var I=!1;function c(u,k,R,L){q(u,(d<<1)+(L?1:0),3),function(C,F,$,H){st(C),Q(C,$),Q(C,~$),h.arraySet(C.pending_buf,C.window,F,$,C.pending),C.pending+=$}(u,k,R)}y._tr_init=function(u){I||(function(){var k,R,L,C,F,$=new Array(f+1);for(C=L=0;C<g-1;C++)for(U[C]=L,k=0;k<1<<P[C];k++)r[L++]=C;for(r[L-1]=C,C=F=0;C<16;C++)for(W[C]=F,k=0;k<1<<M[C];k++)N[F++]=C;for(F>>=7;C<a;C++)for(W[C]=F<<7,k=0;k<1<<M[C]-7;k++)N[256+F++]=C;for(R=0;R<=f;R++)$[R]=0;for(k=0;k<=143;)rt[2*k+1]=8,k++,$[8]++;for(;k<=255;)rt[2*k+1]=9,k++,$[9]++;for(;k<=279;)rt[2*k+1]=7,k++,$[7]++;for(;k<=287;)rt[2*k+1]=8,k++,$[8]++;for(wt(rt,v+1,$),k=0;k<a;k++)b[2*k+1]=5,b[2*k]=_t(k,5);it=new at(rt,P,m+1,v,f),Z=new at(b,M,0,a,f),lt=new at(new Array(0),T,0,_,p)}(),I=!0),u.l_desc=new A(u.dyn_ltree,it),u.d_desc=new A(u.dyn_dtree,Z),u.bl_desc=new A(u.bl_tree,lt),u.bi_buf=0,u.bi_valid=0,ft(u)},y._tr_stored_block=c,y._tr_flush_block=function(u,k,R,L){var C,F,$=0;0<u.level?(u.strm.data_type===2&&(u.strm.data_type=function(H){var tt,yt=4093624447;for(tt=0;tt<=31;tt++,yt>>>=1)if(1&yt&&H.dyn_ltree[2*tt]!==0)return s;if(H.dyn_ltree[18]!==0||H.dyn_ltree[20]!==0||H.dyn_ltree[26]!==0)return e;for(tt=32;tt<m;tt++)if(H.dyn_ltree[2*tt]!==0)return e;return s}(u)),Ct(u,u.l_desc),Ct(u,u.d_desc),$=function(H){var tt;for(t(H,H.dyn_ltree,H.l_desc.max_code),t(H,H.dyn_dtree,H.d_desc.max_code),Ct(H,H.bl_desc),tt=_-1;3<=tt&&H.bl_tree[2*K[tt]+1]===0;tt--);return H.opt_len+=3*(tt+1)+5+5+4,tt}(u),C=u.opt_len+3+7>>>3,(F=u.static_len+3+7>>>3)<=C&&(C=F)):C=F=R+5,R+4<=C&&k!==-1?c(u,k,R,L):u.strategy===4||F===C?(q(u,2+(L?1:0),3),pt(u,rt,b)):(q(u,4+(L?1:0),3),function(H,tt,yt,ot){var Bt;for(q(H,tt-257,5),q(H,yt-1,5),q(H,ot-4,4),Bt=0;Bt<ot;Bt++)q(H,H.bl_tree[2*K[Bt]+1],3);D(H,H.dyn_ltree,tt-1),D(H,H.dyn_dtree,yt-1)}(u,u.l_desc.max_code+1,u.d_desc.max_code+1,$+1),pt(u,u.dyn_ltree,u.dyn_dtree)),ft(u),L&&st(u)},y._tr_tally=function(u,k,R){return u.pending_buf[u.d_buf+2*u.last_lit]=k>>>8&255,u.pending_buf[u.d_buf+2*u.last_lit+1]=255&k,u.pending_buf[u.l_buf+u.last_lit]=255&R,u.last_lit++,k===0?u.dyn_ltree[2*R]++:(u.matches++,k--,u.dyn_ltree[2*(r[R]+m+1)]++,u.dyn_dtree[2*z(k)]++),u.last_lit===u.lit_bufsize-1},y._tr_align=function(u){q(u,2,3),Y(u,w,rt),function(k){k.bi_valid===16?(Q(k,k.bi_buf),k.bi_buf=0,k.bi_valid=0):8<=k.bi_valid&&(k.pending_buf[k.pending++]=255&k.bi_buf,k.bi_buf>>=8,k.bi_valid-=8)}(u)}},{"../utils/common":41}],53:[function(i,S,y){S.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(i,S,y){(function(h){(function(s,e){if(!s.setImmediate){var o,d,g,m,v=1,a={},_=!1,n=s.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(s);f=f&&f.setTimeout?f:s,o={}.toString.call(s.process)==="[object process]"?function(E){process.nextTick(function(){p(E)})}:function(){if(s.postMessage&&!s.importScripts){var E=!0,x=s.onmessage;return s.onmessage=function(){E=!1},s.postMessage("","*"),s.onmessage=x,E}}()?(m="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",w,!1):s.attachEvent("onmessage",w),function(E){s.postMessage(m+E,"*")}):s.MessageChannel?((g=new MessageChannel).port1.onmessage=function(E){p(E.data)},function(E){g.port2.postMessage(E)}):n&&"onreadystatechange"in n.createElement("script")?(d=n.documentElement,function(E){var x=n.createElement("script");x.onreadystatechange=function(){p(E),x.onreadystatechange=null,d.removeChild(x),x=null},d.appendChild(x)}):function(E){setTimeout(p,0,E)},f.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var x=new Array(arguments.length-1),j=0;j<x.length;j++)x[j]=arguments[j+1];var P={callback:E,args:x};return a[v]=P,o(v),v++},f.clearImmediate=l}function l(E){delete a[E]}function p(E){if(_)setTimeout(p,0,E);else{var x=a[E];if(x){_=!0;try{(function(j){var P=j.callback,M=j.args;switch(M.length){case 0:P();break;case 1:P(M[0]);break;case 2:P(M[0],M[1]);break;case 3:P(M[0],M[1],M[2]);break;default:P.apply(e,M)}})(x)}finally{l(E),_=!1}}}}function w(E){E.source===s&&typeof E.data=="string"&&E.data.indexOf(m)===0&&p(+E.data.slice(m.length))}})(typeof self>"u"?h===void 0?this:h:self)}).call(this,typeof ur<"u"?ur:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(gn);var zn=gn.exports;const An=In(zn),bn={A0:[841,1189],A1:[594,841],A2:[420,594],A3:[297,420],A4:[210,297],A5:[148,210],A6:[105,148]},Vr=(O,G)=>Math.round(O*G);function On({din:O,width_cm:G,height_cm:i}){return G&&i?[G*10,i*10]:O?bn[O]:[210,297]}function Bn(O,G,i,S){const y=document.createElement("canvas");y.width=G,y.height=i;const h=y.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,G,i);const s=O.naturalWidth,e=O.naturalHeight,o=s/e,d=G/i;if(S==="stretch")h.drawImage(O,0,0,G,i);else if(S==="fit"){let g=G,m=Math.round(G/o);m>i&&(m=i,g=Math.round(i*o));const v=Math.floor((G-g)/2),a=Math.floor((i-m)/2);h.drawImage(O,v,a,g,m)}else{let g=s,m=Math.round(s/d);m>e&&(m=e,g=Math.round(e*d));const v=Math.floor((s-g)/2),a=Math.floor((e-m)/2);h.drawImage(O,v,a,g,m,0,0,G,i)}return y}function Tn(O){const G=Math.ceil(Math.sqrt(O.width*O.width+O.height*O.height)),i=document.createElement("canvas");i.width=G,i.height=G;const S=i.getContext("2d");return S.fillStyle="#fff",S.fillRect(0,0,G,G),S.translate(G/2,G/2),S.rotate(Math.PI/4),S.drawImage(O,-O.width/2,-O.height/2),i}function Dn(O,G="image/png",i){return new Promise(S=>O.toBlob(y=>S(y),G,i))}async function Rn(O,{pause:G=!0,cut:i=!0,vendorIdHex:S="",productIdHex:y="",iface:h=0,endpoint:s=1,align:e="left"}={}){if(!("usb"in navigator))throw new Error("WebUSB not supported");const o=[];if(S){const v=parseInt(S,16);if(Number.isFinite(v)){const a=y?parseInt(y,16):void 0;o.push(a?{vendorId:v,productId:a}:{vendorId:v})}}const d=await navigator.usb.requestDevice({filters:o.length?o:[{}]});await d.open(),d.configuration==null&&await d.selectConfiguration(1),await d.claimInterface(h);const g=v=>d.transferOut(s,new Uint8Array(v));await g([27,64]),await g([27,97,{left:0,center:1,right:2}[e]??0]);for(let v=0;v<O.length;v++){const a=O[v],_=Math.ceil(a.width/8),n=new Uint8Array(_*a.height);for(let j=0;j<a.height;j++)for(let P=0;P<a.width;P++){const M=(j*a.width+P)*4,T=a.data[M]<128?1:0,K=j*_+(P>>3),rt=7-(P&7);n[K]|=T<<rt}const f=0,l=_&255,p=_>>8&255,w=a.height&255,E=a.height>>8&255;await g([29,118,48,f,l,p,w,E]);const x=16384;for(let j=0;j<n.length;j+=x)await d.transferOut(s,n.subarray(j,Math.min(j+x,n.length)));if(await g([27,100,2]),G&&v<O.length-1&&!confirm(`Strip ${v+1}/${O.length} printed. Continue?`))break}i&&await g([29,86,0])}function dn(O,G,i){const S=O.slice();return S[37]=G[i],S}function pn(O,G,i){const S=O.slice();return S[40]=G[i],S}function mn(O){let G,i=O[40]+"",S;return{c(){G=J("option"),S=Ut(i),this.h()},l(y){G=X(y,"OPTION",{});var h=dt(G);S=Lt(h,i),h.forEach(ct),this.h()},h(){G.__value=O[40],mt(G,G.__value)},m(y,h){Te(y,G,h),B(G,S)},p:fr,d(y){y&&ct(G)}}}function jn(O){let G,i="Loading default image or choose a file.";return{c(){G=J("p"),G.textContent=i,this.h()},l(S){G=X(S,"P",{class:!0,"data-svelte-h":!0}),bt(G)!=="svelte-1v7zxrp"&&(G.textContent=i),this.h()},h(){V(G,"class","muted svelte-10j0yvp")},m(S,y){Te(S,G,y)},p:fr,d(S){S&&ct(G)}}}function Pn(O){let G,i="Strips",S,y,h=dr(O[4]),s=[];for(let e=0;e<h.length;e+=1)s[e]=_n(dn(O,h,e));return{c(){G=J("h3"),G.textContent=i,S=ht(),y=J("div");for(let e=0;e<s.length;e+=1)s[e].c();this.h()},l(e){G=X(e,"H3",{style:!0,class:!0,"data-svelte-h":!0}),bt(G)!=="svelte-2qujsl"&&(G.textContent=i),S=ut(e),y=X(e,"DIV",{class:!0});var o=dt(y);for(let d=0;d<s.length;d+=1)s[d].l(o);o.forEach(ct),this.h()},h(){Ot(G,"margin-top","0"),V(G,"class","svelte-10j0yvp"),V(y,"class","strips svelte-10j0yvp")},m(e,o){Te(e,G,o),Te(e,S,o),Te(e,y,o);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(y,null)},p(e,o){if(o[0]&16){h=dr(e[4]);let d;for(d=0;d<h.length;d+=1){const g=dn(e,h,d);s[d]?s[d].p(g,o):(s[d]=_n(g),s[d].c(),s[d].m(y,null))}for(;d<s.length;d+=1)s[d].d(1);s.length=h.length}},d(e){e&&(ct(G),ct(S),ct(y)),vn(s,e)}}}function _n(O){let G,i,S,y,h,s,e=O[37].name+"",o,d,g=O[37].canvas.width+"",m,v,a=O[37].canvas.height+"",_,n,f;return{c(){G=J("div"),i=J("img"),h=ht(),s=J("div"),o=Ut(e),d=Ut("  "),m=Ut(g),v=Ut(""),_=Ut(a),n=Ut("px"),f=ht(),this.h()},l(l){G=X(l,"DIV",{class:!0});var p=dt(G);i=X(p,"IMG",{src:!0,alt:!0,class:!0}),h=ut(p),s=X(p,"DIV",{class:!0});var w=dt(s);o=Lt(w,e),d=Lt(w,"  "),m=Lt(w,g),v=Lt(w,""),_=Lt(w,a),n=Lt(w,"px"),w.forEach(ct),f=ut(p),p.forEach(ct),this.h()},h(){fn(i.src,S=O[37].canvas.toDataURL())||V(i,"src",S),V(i,"alt",y=O[37].name),V(i,"class","svelte-10j0yvp"),V(s,"class","muted svelte-10j0yvp"),V(G,"class","stripItem svelte-10j0yvp")},m(l,p){Te(l,G,p),B(G,i),B(G,h),B(G,s),B(s,o),B(s,d),B(s,m),B(s,v),B(s,_),B(s,n),B(G,f)},p(l,p){p[0]&16&&!fn(i.src,S=l[37].canvas.toDataURL())&&V(i,"src",S),p[0]&16&&y!==(y=l[37].name)&&V(i,"alt",y),p[0]&16&&e!==(e=l[37].name+"")&&cr(o,e),p[0]&16&&g!==(g=l[37].canvas.width+"")&&cr(m,g),p[0]&16&&a!==(a=l[37].canvas.height+"")&&cr(_,a)},d(l){l&&ct(G)}}}function Nn(O){let G,i,S,y="Tesselate",h,s,e=`Tesselate splits images into printable strips for thermal receipt
      printers, supporting all DIN formats (A0A6) and custom banner sizes. Its
      ideal for large-format or experimental printing with standard receipt
      printers, roll printers, and thermal printers.`,o,d,g,m,v,a="DIN",_,n,f,l,p,w,E="Custom Width (cm)",x,j,P,M,T,K="Custom Height (cm)",rt,b,N,r,U,it,Z="Strip (mm)",lt,W,at,A,z="Pixel size (px)",Q,q,Y,_t,wt="Mode",ft,st,vt,xt="fit",pt,Ct="fill",t,D="stretch",I,c,u="Direction",k,R,L,C="vertical",F,$="horizontal",H,tt="diagonal",yt,ot,Bt="Dither",Xt,Et,Tt,St="floyd",Dt,De="halftone",It,Ne="none",Le,Rt,Zt,Ht,ne="Halftone cell",ie,Ft,pr,ae,be,Gr="Printer max width (px)",mr,Mt,_r,se,ye,Kr="Dots/mm",vr,jt,gr,we,ke,Jt,br,yr,Vt,oe,qr="Download",wr,le,Yr="Print",kr,xe,Ue=(O[5]?"Working":O[1])+"",Ze,xr,Pt,ue,Xr="Printer",Cr,he,ce,Ce,Jr="Vendor ID (hex)",Er,Qt,Sr,fe,Ee,Qr="Product ID (hex)",Ir,$t,zr,de,pe,Se,$r="Interface",Ar,Gt,Or,me,Ie,tn="Endpoint",Br,Kt,Tr,qt,ze,Dr,Nt,te,en="left",ee,rn="center",re,nn="right",Rr,Ae,_e,jr,Pr,Oe,ve,Nr,Lr,Be,Ur,an,Re=dr(O[6]),At=[];for(let nt=0;nt<Re.length;nt+=1)At[nt]=mn(pn(O,Re,nt));function sn(nt,kt){return nt[4].length?Pn:jn}let He=sn(O),Wt=He(O);return{c(){G=J("div"),i=J("div"),S=J("h2"),S.textContent=y,h=ht(),s=J("p"),s.textContent=e,o=ht(),d=J("div"),g=J("input"),m=ht(),v=J("label"),v.textContent=a,_=ht(),n=J("select");for(let nt=0;nt<At.length;nt+=1)At[nt].c();f=ht(),l=J("div"),p=J("div"),w=J("label"),w.textContent=E,x=ht(),j=J("input"),P=ht(),M=J("div"),T=J("label"),T.textContent=K,rt=ht(),b=J("input"),N=ht(),r=J("div"),U=J("div"),it=J("label"),it.textContent=Z,lt=ht(),W=J("input"),at=ht(),A=J("label"),A.textContent=z,Q=ht(),q=J("input"),Y=ht(),_t=J("label"),_t.textContent=wt,ft=ht(),st=J("select"),vt=J("option"),vt.textContent=xt,pt=J("option"),pt.textContent=Ct,t=J("option"),t.textContent=D,I=ht(),c=J("label"),c.textContent=u,k=ht(),R=J("select"),L=J("option"),L.textContent=C,F=J("option"),F.textContent=$,H=J("option"),H.textContent=tt,yt=ht(),ot=J("label"),ot.textContent=Bt,Xt=ht(),Et=J("select"),Tt=J("option"),Tt.textContent=St,Dt=J("option"),Dt.textContent=De,It=J("option"),It.textContent=Ne,Le=ht(),Rt=J("div"),Zt=J("div"),Ht=J("label"),Ht.textContent=ne,ie=ht(),Ft=J("input"),pr=ht(),ae=J("div"),be=J("label"),be.textContent=Gr,mr=ht(),Mt=J("input"),_r=ht(),se=J("div"),ye=J("label"),ye.textContent=Kr,vr=ht(),jt=J("input"),gr=ht(),we=J("div"),ke=J("label"),Jt=J("input"),br=Ut(" Invert"),yr=ht(),Vt=J("div"),oe=J("button"),oe.textContent=qr,wr=ht(),le=J("button"),le.textContent=Yr,kr=ht(),xe=J("p"),Ze=Ut(Ue),xr=ht(),Pt=J("div"),ue=J("h3"),ue.textContent=Xr,Cr=ht(),he=J("div"),ce=J("div"),Ce=J("label"),Ce.textContent=Jr,Er=ht(),Qt=J("input"),Sr=ht(),fe=J("div"),Ee=J("label"),Ee.textContent=Qr,Ir=ht(),$t=J("input"),zr=ht(),de=J("div"),pe=J("div"),Se=J("label"),Se.textContent=$r,Ar=ht(),Gt=J("input"),Or=ht(),me=J("div"),Ie=J("label"),Ie.textContent=tn,Br=ht(),Kt=J("input"),Tr=ht(),qt=J("div"),ze=J("label"),Dr=Ut(`Align
          `),Nt=J("select"),te=J("option"),te.textContent=en,ee=J("option"),ee.textContent=rn,re=J("option"),re.textContent=nn,Rr=ht(),Ae=J("label"),_e=J("input"),jr=Ut(" Pause"),Pr=ht(),Oe=J("label"),ve=J("input"),Nr=Ut(" Cut"),Lr=ht(),Be=J("div"),Wt.c(),this.h()},l(nt){G=X(nt,"DIV",{class:!0});var kt=dt(G);i=X(kt,"DIV",{class:!0});var et=dt(i);S=X(et,"H2",{style:!0,class:!0,"data-svelte-h":!0}),bt(S)!=="svelte-1iave8w"&&(S.textContent=y),h=ut(et),s=X(et,"P",{"data-svelte-h":!0}),bt(s)!=="svelte-1rwrzlm"&&(s.textContent=e),o=ut(et),d=X(et,"DIV",{class:!0});var Fe=dt(d);g=X(Fe,"INPUT",{type:!0,accept:!0,class:!0}),Fe.forEach(ct),m=ut(et),v=X(et,"LABEL",{class:!0,"data-svelte-h":!0}),bt(v)!=="svelte-qwiy2r"&&(v.textContent=a),_=ut(et),n=X(et,"SELECT",{class:!0});var on=dt(n);for(let Hr=0;Hr<At.length;Hr+=1)At[Hr].l(on);on.forEach(ct),f=ut(et),l=X(et,"DIV",{class:!0});var Ve=dt(l);p=X(Ve,"DIV",{style:!0});var Ge=dt(p);w=X(Ge,"LABEL",{class:!0,"data-svelte-h":!0}),bt(w)!=="svelte-13h7zre"&&(w.textContent=E),x=ut(Ge),j=X(Ge,"INPUT",{type:!0,step:!0,class:!0}),Ge.forEach(ct),P=ut(Ve),M=X(Ve,"DIV",{style:!0});var Ke=dt(M);T=X(Ke,"LABEL",{class:!0,"data-svelte-h":!0}),bt(T)!=="svelte-1aydr0b"&&(T.textContent=K),rt=ut(Ke),b=X(Ke,"INPUT",{type:!0,step:!0,class:!0}),Ke.forEach(ct),Ve.forEach(ct),N=ut(et),r=X(et,"DIV",{class:!0});var ln=dt(r);U=X(ln,"DIV",{style:!0});var qe=dt(U);it=X(qe,"LABEL",{class:!0,"data-svelte-h":!0}),bt(it)!=="svelte-1bko2kh"&&(it.textContent=Z),lt=ut(qe),W=X(qe,"INPUT",{type:!0,step:!0,min:!0,class:!0}),qe.forEach(ct),ln.forEach(ct),at=ut(et),A=X(et,"LABEL",{class:!0,"data-svelte-h":!0}),bt(A)!=="svelte-1tk1v8o"&&(A.textContent=z),Q=ut(et),q=X(et,"INPUT",{type:!0,step:!0,min:!0,class:!0}),Y=ut(et),_t=X(et,"LABEL",{class:!0,"data-svelte-h":!0}),bt(_t)!=="svelte-16wpful"&&(_t.textContent=wt),ft=ut(et),st=X(et,"SELECT",{class:!0});var Ye=dt(st);vt=X(Ye,"OPTION",{"data-svelte-h":!0}),bt(vt)!=="svelte-1ox0qsw"&&(vt.textContent=xt),pt=X(Ye,"OPTION",{"data-svelte-h":!0}),bt(pt)!=="svelte-ojnp86"&&(pt.textContent=Ct),t=X(Ye,"OPTION",{"data-svelte-h":!0}),bt(t)!=="svelte-19g2w9o"&&(t.textContent=D),Ye.forEach(ct),I=ut(et),c=X(et,"LABEL",{class:!0,"data-svelte-h":!0}),bt(c)!=="svelte-1k63le1"&&(c.textContent=u),k=ut(et),R=X(et,"SELECT",{class:!0});var Xe=dt(R);L=X(Xe,"OPTION",{"data-svelte-h":!0}),bt(L)!=="svelte-lztc1q"&&(L.textContent=C),F=X(Xe,"OPTION",{"data-svelte-h":!0}),bt(F)!=="svelte-4ixlgm"&&(F.textContent=$),H=X(Xe,"OPTION",{"data-svelte-h":!0}),bt(H)!=="svelte-1j2ut9m"&&(H.textContent=tt),Xe.forEach(ct),yt=ut(et),ot=X(et,"LABEL",{class:!0,"data-svelte-h":!0}),bt(ot)!=="svelte-1b6xat8"&&(ot.textContent=Bt),Xt=ut(et),Et=X(et,"SELECT",{class:!0});var Je=dt(Et);Tt=X(Je,"OPTION",{"data-svelte-h":!0}),bt(Tt)!=="svelte-dxg5ae"&&(Tt.textContent=St),Dt=X(Je,"OPTION",{"data-svelte-h":!0}),bt(Dt)!=="svelte-hdobsm"&&(Dt.textContent=De),It=X(Je,"OPTION",{"data-svelte-h":!0}),bt(It)!=="svelte-8dsaj2"&&(It.textContent=Ne),Je.forEach(ct),Le=ut(et),Rt=X(et,"DIV",{class:!0});var je=dt(Rt);Zt=X(je,"DIV",{style:!0});var Qe=dt(Zt);Ht=X(Qe,"LABEL",{class:!0,"data-svelte-h":!0}),bt(Ht)!=="svelte-1r22cu7"&&(Ht.textContent=ne),ie=ut(Qe),Ft=X(Qe,"INPUT",{type:!0,step:!0,class:!0}),Qe.forEach(ct),pr=ut(je),ae=X(je,"DIV",{style:!0});var $e=dt(ae);be=X($e,"LABEL",{class:!0,"data-svelte-h":!0}),bt(be)!=="svelte-brceij"&&(be.textContent=Gr),mr=ut($e),Mt=X($e,"INPUT",{type:!0,step:!0,class:!0}),$e.forEach(ct),_r=ut(je),se=X(je,"DIV",{style:!0});var tr=dt(se);ye=X(tr,"LABEL",{class:!0,"data-svelte-h":!0}),bt(ye)!=="svelte-1ciqefv"&&(ye.textContent=Kr),vr=ut(tr),jt=X(tr,"INPUT",{type:!0,step:!0,min:!0,class:!0}),tr.forEach(ct),je.forEach(ct),gr=ut(et),we=X(et,"DIV",{class:!0,style:!0});var un=dt(we);ke=X(un,"LABEL",{class:!0});var Fr=dt(ke);Jt=X(Fr,"INPUT",{type:!0,class:!0}),br=Lt(Fr," Invert"),Fr.forEach(ct),un.forEach(ct),yr=ut(et),Vt=X(et,"DIV",{class:!0,style:!0});var er=dt(Vt);oe=X(er,"BUTTON",{class:!0,"data-svelte-h":!0}),bt(oe)!=="svelte-1fy8inz"&&(oe.textContent=qr),wr=ut(er),le=X(er,"BUTTON",{class:!0,"data-svelte-h":!0}),bt(le)!=="svelte-1bc3bu5"&&(le.textContent=Yr),er.forEach(ct),kr=ut(et),xe=X(et,"P",{class:!0,style:!0});var hn=dt(xe);Ze=Lt(hn,Ue),hn.forEach(ct),xr=ut(et),Pt=X(et,"DIV",{class:!0});var ge=dt(Pt);ue=X(ge,"H3",{style:!0,class:!0,"data-svelte-h":!0}),bt(ue)!=="svelte-7nfo8s"&&(ue.textContent=Xr),Cr=ut(ge),he=X(ge,"DIV",{class:!0});var rr=dt(he);ce=X(rr,"DIV",{style:!0});var nr=dt(ce);Ce=X(nr,"LABEL",{class:!0,"data-svelte-h":!0}),bt(Ce)!=="svelte-nfk8vb"&&(Ce.textContent=Jr),Er=ut(nr),Qt=X(nr,"INPUT",{placeholder:!0,class:!0}),nr.forEach(ct),Sr=ut(rr),fe=X(rr,"DIV",{style:!0});var ir=dt(fe);Ee=X(ir,"LABEL",{class:!0,"data-svelte-h":!0}),bt(Ee)!=="svelte-1313xps"&&(Ee.textContent=Qr),Ir=ut(ir),$t=X(ir,"INPUT",{placeholder:!0,class:!0}),ir.forEach(ct),rr.forEach(ct),zr=ut(ge),de=X(ge,"DIV",{class:!0});var ar=dt(de);pe=X(ar,"DIV",{style:!0});var sr=dt(pe);Se=X(sr,"LABEL",{class:!0,"data-svelte-h":!0}),bt(Se)!=="svelte-v7kanb"&&(Se.textContent=$r),Ar=ut(sr),Gt=X(sr,"INPUT",{type:!0,min:!0,class:!0}),sr.forEach(ct),Or=ut(ar),me=X(ar,"DIV",{style:!0});var or=dt(me);Ie=X(or,"LABEL",{class:!0,"data-svelte-h":!0}),bt(Ie)!=="svelte-1pn3nlb"&&(Ie.textContent=tn),Br=ut(or),Kt=X(or,"INPUT",{type:!0,min:!0,class:!0}),or.forEach(ct),ar.forEach(ct),Tr=ut(ge),qt=X(ge,"DIV",{class:!0});var Pe=dt(qt);ze=X(Pe,"LABEL",{class:!0});var Mr=dt(ze);Dr=Lt(Mr,`Align
          `),Nt=X(Mr,"SELECT",{class:!0});var lr=dt(Nt);te=X(lr,"OPTION",{"data-svelte-h":!0}),bt(te)!=="svelte-dm3ioe"&&(te.textContent=en),ee=X(lr,"OPTION",{"data-svelte-h":!0}),bt(ee)!=="svelte-1x1wx6q"&&(ee.textContent=rn),re=X(lr,"OPTION",{"data-svelte-h":!0}),bt(re)!=="svelte-gdc71y"&&(re.textContent=nn),lr.forEach(ct),Mr.forEach(ct),Rr=ut(Pe),Ae=X(Pe,"LABEL",{class:!0});var Wr=dt(Ae);_e=X(Wr,"INPUT",{type:!0,class:!0}),jr=Lt(Wr," Pause"),Wr.forEach(ct),Pr=ut(Pe),Oe=X(Pe,"LABEL",{class:!0});var Zr=dt(Oe);ve=X(Zr,"INPUT",{type:!0,class:!0}),Nr=Lt(Zr," Cut"),Zr.forEach(ct),Pe.forEach(ct),ge.forEach(ct),et.forEach(ct),Lr=ut(kt),Be=X(kt,"DIV",{class:!0});var cn=dt(Be);Wt.l(cn),cn.forEach(ct),kt.forEach(ct),this.h()},h(){Ot(S,"margin","0 0 6px"),V(S,"class","svelte-10j0yvp"),V(g,"type","file"),V(g,"accept","image/*"),V(g,"class","svelte-10j0yvp"),V(d,"class","row svelte-10j0yvp"),V(v,"class","svelte-10j0yvp"),V(n,"class","svelte-10j0yvp"),O[2].din===void 0&&Me(()=>O[12].call(n)),V(w,"class","svelte-10j0yvp"),V(j,"type","number"),V(j,"step","0.1"),V(j,"class","svelte-10j0yvp"),Ot(p,"flex","1"),V(T,"class","svelte-10j0yvp"),V(b,"type","number"),V(b,"step","0.1"),V(b,"class","svelte-10j0yvp"),Ot(M,"flex","1"),V(l,"class","row svelte-10j0yvp"),V(it,"class","svelte-10j0yvp"),V(W,"type","number"),V(W,"step","0.1"),V(W,"min","1"),V(W,"class","svelte-10j0yvp"),Ot(U,"flex","1"),V(r,"class","row svelte-10j0yvp"),V(A,"class","svelte-10j0yvp"),V(q,"type","number"),V(q,"step","1"),V(q,"min","1"),V(q,"class","svelte-10j0yvp"),V(_t,"class","svelte-10j0yvp"),vt.__value="fit",mt(vt,vt.__value),pt.__value="fill",mt(pt,pt.__value),t.__value="stretch",mt(t,t.__value),V(st,"class","svelte-10j0yvp"),O[2].mode===void 0&&Me(()=>O[17].call(st)),V(c,"class","svelte-10j0yvp"),L.__value="vertical",mt(L,L.__value),F.__value="horizontal",mt(F,F.__value),H.__value="diagonal",mt(H,H.__value),V(R,"class","svelte-10j0yvp"),O[2].direction===void 0&&Me(()=>O[18].call(R)),V(ot,"class","svelte-10j0yvp"),Tt.__value="floyd",mt(Tt,Tt.__value),Dt.__value="halftone",mt(Dt,Dt.__value),It.__value="none",mt(It,It.__value),V(Et,"class","svelte-10j0yvp"),O[2].dither===void 0&&Me(()=>O[19].call(Et)),V(Ht,"class","svelte-10j0yvp"),V(Ft,"type","number"),V(Ft,"step","1"),V(Ft,"class","svelte-10j0yvp"),Ot(Zt,"flex","1"),V(be,"class","svelte-10j0yvp"),V(Mt,"type","number"),V(Mt,"step","1"),V(Mt,"class","svelte-10j0yvp"),Ot(ae,"flex","1"),V(ye,"class","svelte-10j0yvp"),V(jt,"type","number"),V(jt,"step","1"),V(jt,"min","1"),V(jt,"class","svelte-10j0yvp"),Ot(se,"flex","1"),V(Rt,"class","row svelte-10j0yvp"),V(Jt,"type","checkbox"),V(Jt,"class","svelte-10j0yvp"),V(ke,"class","svelte-10j0yvp"),V(we,"class","row svelte-10j0yvp"),Ot(we,"margin-top","8px"),V(oe,"class","svelte-10j0yvp"),V(le,"class","svelte-10j0yvp"),V(Vt,"class","row svelte-10j0yvp"),Ot(Vt,"margin-top","12px"),Ot(Vt,"gap","12px"),V(xe,"class","muted svelte-10j0yvp"),Ot(xe,"margin-top","8px"),Ot(ue,"margin","0 0 8px"),V(ue,"class","svelte-10j0yvp"),V(Ce,"class","svelte-10j0yvp"),V(Qt,"placeholder","e.g. 04b8"),V(Qt,"class","svelte-10j0yvp"),Ot(ce,"flex","1"),V(Ee,"class","svelte-10j0yvp"),V($t,"placeholder","optional"),V($t,"class","svelte-10j0yvp"),Ot(fe,"flex","1"),V(he,"class","row svelte-10j0yvp"),V(Se,"class","svelte-10j0yvp"),V(Gt,"type","number"),V(Gt,"min","0"),V(Gt,"class","svelte-10j0yvp"),Ot(pe,"flex","1"),V(Ie,"class","svelte-10j0yvp"),V(Kt,"type","number"),V(Kt,"min","1"),V(Kt,"class","svelte-10j0yvp"),Ot(me,"flex","1"),V(de,"class","row svelte-10j0yvp"),te.__value="left",mt(te,te.__value),ee.__value="center",mt(ee,ee.__value),re.__value="right",mt(re,re.__value),V(Nt,"class","svelte-10j0yvp"),O[3].align===void 0&&Me(()=>O[28].call(Nt)),V(ze,"class","svelte-10j0yvp"),V(_e,"type","checkbox"),V(_e,"class","svelte-10j0yvp"),V(Ae,"class","svelte-10j0yvp"),V(ve,"type","checkbox"),V(ve,"class","svelte-10j0yvp"),V(Oe,"class","svelte-10j0yvp"),V(qt,"class","row svelte-10j0yvp"),V(Pt,"class","printer-box svelte-10j0yvp"),V(i,"class","panel controls svelte-10j0yvp"),V(Be,"class","panel svelte-10j0yvp"),V(G,"class","grid svelte-10j0yvp")},m(nt,kt){Te(nt,G,kt),B(G,i),B(i,S),B(i,h),B(i,s),B(i,o),B(i,d),B(d,g),O[11](g),B(i,m),B(i,v),B(i,_),B(i,n);for(let et=0;et<At.length;et+=1)At[et]&&At[et].m(n,null);Yt(n,O[2].din,!0),B(i,f),B(i,l),B(l,p),B(p,w),B(p,x),B(p,j),mt(j,O[2].width_cm),B(l,P),B(l,M),B(M,T),B(M,rt),B(M,b),mt(b,O[2].height_cm),B(i,N),B(i,r),B(r,U),B(U,it),B(U,lt),B(U,W),mt(W,O[2].strip_mm),B(i,at),B(i,A),B(i,Q),B(i,q),mt(q,O[2].pixel_size_px),B(i,Y),B(i,_t),B(i,ft),B(i,st),B(st,vt),B(st,pt),B(st,t),Yt(st,O[2].mode,!0),B(i,I),B(i,c),B(i,k),B(i,R),B(R,L),B(R,F),B(R,H),Yt(R,O[2].direction,!0),B(i,yt),B(i,ot),B(i,Xt),B(i,Et),B(Et,Tt),B(Et,Dt),B(Et,It),Yt(Et,O[2].dither,!0),B(i,Le),B(i,Rt),B(Rt,Zt),B(Zt,Ht),B(Zt,ie),B(Zt,Ft),mt(Ft,O[2].halftone_cell),B(Rt,pr),B(Rt,ae),B(ae,be),B(ae,mr),B(ae,Mt),mt(Mt,O[2].printer_max_width_px),B(Rt,_r),B(Rt,se),B(se,ye),B(se,vr),B(se,jt),mt(jt,O[2].printer_dots_per_mm),B(i,gr),B(i,we),B(we,ke),B(ke,Jt),Jt.checked=O[2].invert,B(ke,br),B(i,yr),B(i,Vt),B(Vt,oe),B(Vt,wr),B(Vt,le),B(i,kr),B(i,xe),B(xe,Ze),B(i,xr),B(i,Pt),B(Pt,ue),B(Pt,Cr),B(Pt,he),B(he,ce),B(ce,Ce),B(ce,Er),B(ce,Qt),mt(Qt,O[3].vendorIdHex),B(he,Sr),B(he,fe),B(fe,Ee),B(fe,Ir),B(fe,$t),mt($t,O[3].productIdHex),B(Pt,zr),B(Pt,de),B(de,pe),B(pe,Se),B(pe,Ar),B(pe,Gt),mt(Gt,O[3].iface),B(de,Or),B(de,me),B(me,Ie),B(me,Br),B(me,Kt),mt(Kt,O[3].endpoint),B(Pt,Tr),B(Pt,qt),B(qt,ze),B(ze,Dr),B(ze,Nt),B(Nt,te),B(Nt,ee),B(Nt,re),Yt(Nt,O[3].align,!0),B(qt,Rr),B(qt,Ae),B(Ae,_e),_e.checked=O[3].pause,B(Ae,jr),B(qt,Pr),B(qt,Oe),B(Oe,ve),ve.checked=O[3].cut,B(Oe,Nr),B(G,Lr),B(G,Be),Wt.m(Be,null),Ur||(an=[gt(g,"change",O[7]),gt(n,"change",O[12]),gt(n,"change",O[10]),gt(j,"input",O[13]),gt(j,"change",O[10]),gt(b,"input",O[14]),gt(b,"change",O[10]),gt(W,"input",O[15]),gt(W,"change",O[10]),gt(q,"input",O[16]),gt(q,"change",O[10]),gt(st,"change",O[17]),gt(st,"change",O[10]),gt(R,"change",O[18]),gt(R,"change",O[10]),gt(Et,"change",O[19]),gt(Et,"change",O[10]),gt(Ft,"input",O[20]),gt(Ft,"change",O[10]),gt(Mt,"input",O[21]),gt(Mt,"change",O[10]),gt(jt,"input",O[22]),gt(jt,"change",O[10]),gt(Jt,"change",O[23]),gt(Jt,"change",O[10]),gt(oe,"click",O[8]),gt(le,"click",O[9]),gt(Qt,"input",O[24]),gt($t,"input",O[25]),gt(Gt,"input",O[26]),gt(Kt,"input",O[27]),gt(Nt,"change",O[28]),gt(_e,"change",O[29]),gt(ve,"change",O[30])],Ur=!0)},p(nt,kt){if(kt[0]&64){Re=dr(nt[6]);let et;for(et=0;et<Re.length;et+=1){const Fe=pn(nt,Re,et);At[et]?At[et].p(Fe,kt):(At[et]=mn(Fe),At[et].c(),At[et].m(n,null))}for(;et<At.length;et+=1)At[et].d(1);At.length=Re.length}kt[0]&68&&Yt(n,nt[2].din),kt[0]&68&&zt(j.value)!==nt[2].width_cm&&mt(j,nt[2].width_cm),kt[0]&68&&zt(b.value)!==nt[2].height_cm&&mt(b,nt[2].height_cm),kt[0]&68&&zt(W.value)!==nt[2].strip_mm&&mt(W,nt[2].strip_mm),kt[0]&68&&zt(q.value)!==nt[2].pixel_size_px&&mt(q,nt[2].pixel_size_px),kt[0]&68&&Yt(st,nt[2].mode),kt[0]&68&&Yt(R,nt[2].direction),kt[0]&68&&Yt(Et,nt[2].dither),kt[0]&68&&zt(Ft.value)!==nt[2].halftone_cell&&mt(Ft,nt[2].halftone_cell),kt[0]&68&&zt(Mt.value)!==nt[2].printer_max_width_px&&mt(Mt,nt[2].printer_max_width_px),kt[0]&68&&zt(jt.value)!==nt[2].printer_dots_per_mm&&mt(jt,nt[2].printer_dots_per_mm),kt[0]&68&&(Jt.checked=nt[2].invert),kt[0]&34&&Ue!==(Ue=(nt[5]?"Working":nt[1])+"")&&cr(Ze,Ue),kt[0]&8&&Qt.value!==nt[3].vendorIdHex&&mt(Qt,nt[3].vendorIdHex),kt[0]&8&&$t.value!==nt[3].productIdHex&&mt($t,nt[3].productIdHex),kt[0]&8&&zt(Gt.value)!==nt[3].iface&&mt(Gt,nt[3].iface),kt[0]&8&&zt(Kt.value)!==nt[3].endpoint&&mt(Kt,nt[3].endpoint),kt[0]&8&&Yt(Nt,nt[3].align),kt[0]&8&&(_e.checked=nt[3].pause),kt[0]&8&&(ve.checked=nt[3].cut),He===(He=sn(nt))&&Wt?Wt.p(nt,kt):(Wt.d(1),Wt=He(nt),Wt&&(Wt.c(),Wt.m(Be,null)))},i:fr,o:fr,d(nt){nt&&ct(G),O[11](null),vn(At,nt),Wt.d(),Ur=!1,xn(an)}}}function Ln(O,G=1){if(G=Math.max(1,Math.floor(G||1)),G<=1)return O;const{width:i,height:S,data:y}=O;for(let h=0;h<S;h+=G)for(let s=0;s<i;s+=G){const e=(h*i+s)*4,o=y[e];for(let d=h;d<Math.min(h+G,S);d++)for(let g=s;g<Math.min(s+G,i);g++){const m=(d*i+g)*4;y[m]=y[m+1]=y[m+2]=o,y[m+3]=255}}return O}function Un(O,G,i){let S=null,y="",h,s="",e={din:"A3",width_cm:void 0,height_cm:void 0,printer_dots_per_mm:8,strip_mm:60,mode:"fit",dither:"floyd",halftone_cell:8,invert:!1,direction:"vertical",printer_max_width_px:576,pixel_size_px:1},o={vendorIdHex:"",productIdHex:"",iface:0,endpoint:1,align:"left",pause:!0,cut:!0},d=[],g=!1;const m=Object.keys(bn);function v(Q){i(1,s=Q??"")}Cn(async()=>{try{y="palm.jpg",await _()}catch(Q){console.warn("Could not load default image",Q),v("Load an image to begin.")}});async function a(Q){var Y;const q=(Y=Q.target.files)==null?void 0:Y[0];q&&(y=URL.createObjectURL(q),await _())}async function _(){y&&(S=new Image,S.crossOrigin="anonymous",S.src=y,await S.decode(),await n())}async function n(){if(!S)return;i(5,g=!0),v("Processing"),i(4,d=[]);const[Q,q]=On(e),Y=Vr(Q,e.printer_dots_per_mm),_t=Vr(q,e.printer_dots_per_mm);let wt=Bn(S,Y,_t,e.mode);e.direction==="diagonal"&&(wt=Tn(wt));const st=wt.getContext("2d").getImageData(0,0,wt.width,wt.height),vt=new Worker(new URL(""+new URL("../workers/worker-Cwvvch6N.js",import.meta.url).href,import.meta.url),{type:"module"}),xt=await new Promise((t,D)=>{vt.onmessage=I=>{var c,u;if(!((c=I.data)!=null&&c.ok)){D(new Error(((u=I.data)==null?void 0:u.error)||"Worker failed")),vt.terminate();return}t(I.data.imageData),vt.terminate()},vt.onerror=I=>D(I),vt.postMessage({imageData:st,settings:e},[st.data.buffer])});Ln(xt,Number(e.pixel_size_px)||1);const pt=document.createElement("canvas");pt.width=xt.width,pt.height=xt.height,pt.getContext("2d").putImageData(xt,0,0);const Ct=Vr(e.strip_mm,e.printer_dots_per_mm);if(e.direction==="vertical"){const t=Math.ceil(pt.width/Ct);for(let D=0;D<t;D++){const I=D*Ct,c=Math.min(Ct,pt.width-I),u=pt.height,k=document.createElement("canvas");k.width=Ct,k.height=u;const R=k.getContext("2d");R.fillStyle="#fff",R.fillRect(0,0,k.width,k.height),R.drawImage(pt,I,0,c,u,0,0,c,u),d.push({canvas:k,name:`vstrip_${String(D+1).padStart(2,"0")}.png`})}}else if(e.direction==="horizontal"){const t=Math.ceil(pt.height/Ct),D=[];for(let c=0;c<t;c++){const u=c*Ct,k=Math.min(Ct,pt.height-u),R=pt.width,L=document.createElement("canvas");L.width=R,L.height=Ct;const C=L.getContext("2d");C.fillStyle="#fff",C.fillRect(0,0,R,Ct),C.drawImage(pt,0,u,R,k,0,0,R,k);const F=document.createElement("canvas");F.width=Ct,F.height=R;const $=F.getContext("2d");$.translate(Ct,0),$.rotate(Math.PI/2),$.imageSmoothingEnabled=!1,$.drawImage(L,0,0);let H=F;if(F.width!==e.printer_max_width_px){const tt=document.createElement("canvas"),yt=e.printer_max_width_px/F.width;tt.width=e.printer_max_width_px,tt.height=Math.round(F.height*yt);const ot=tt.getContext("2d");ot.imageSmoothingEnabled=!1,ot.drawImage(F,0,0,tt.width,tt.height),H=tt}D.push({canvas:H,name:`hstrip_tmp_${String(c+1).padStart(2,"0")}.png`})}const I=D.reverse();i(4,d=I.map((c,u)=>({canvas:c.canvas,name:`hstrip_${String(u+1).padStart(2,"0")}.png`})))}else{const t=pt.width,D=pt.height,I=e.printer_max_width_px,c=Math.ceil(t/I);for(let u=0;u<c;u++){const k=u*I,R=Math.min(I,t-k),L=document.createElement("canvas");L.width=I,L.height=D;const C=L.getContext("2d");C.fillStyle="#fff",C.fillRect(0,0,L.width,L.height),C.drawImage(pt,k,0,R,D,0,0,R,D),d.push({canvas:L,name:`diagstrip_${String(u+1).padStart(2,"0")}.png`})}}i(5,g=!1),v(`Generated ${d.length} strips.`)}async function f(){try{if(!d.length){v("Nothing to download. Generate strips first.");return}const Q=new An,q=Q.folder("tesselated_strips")||Q;for(const ft of d){const st=await Dn(ft.canvas);q.file(ft.name,st)}const Y=await Q.generateAsync({type:"blob"}),_t=URL.createObjectURL(Y),wt=document.createElement("a");wt.href=_t,wt.download="tesselated_strips.zip",document.body.appendChild(wt),wt.click(),wt.remove(),URL.revokeObjectURL(_t),v("ZIP downloaded.")}catch(Q){console.error(Q),v("Download failed."),alert("Download failed: "+((Q==null?void 0:Q.message)||Q))}}async function l(){try{if(!d.length){v("Nothing to print. Generate strips first.");return}const Q=d.map(q=>q.canvas.getContext("2d").getImageData(0,0,q.canvas.width,q.canvas.height));v("Opening printer"),await Rn(Q,{pause:o.pause,cut:o.cut,vendorIdHex:o.vendorIdHex,productIdHex:o.productIdHex,iface:Number(o.iface)||0,endpoint:Number(o.endpoint)||1,align:o.align}),v("Print job sent.")}catch(Q){console.error(Q),v("Print failed."),alert("Print failed: "+((Q==null?void 0:Q.message)||Q||"Check WebUSB support and your Vendor/Product IDs, interface, endpoint."))}}function p(){S&&!g&&n()}function w(Q){En[Q?"unshift":"push"](()=>{h=Q,i(0,h)})}function E(){e.din=We(this),i(2,e),i(6,m)}function x(){e.width_cm=zt(this.value),i(2,e),i(6,m)}function j(){e.height_cm=zt(this.value),i(2,e),i(6,m)}function P(){e.strip_mm=zt(this.value),i(2,e),i(6,m)}function M(){e.pixel_size_px=zt(this.value),i(2,e),i(6,m)}function T(){e.mode=We(this),i(2,e),i(6,m)}function K(){e.direction=We(this),i(2,e),i(6,m)}function rt(){e.dither=We(this),i(2,e),i(6,m)}function b(){e.halftone_cell=zt(this.value),i(2,e),i(6,m)}function N(){e.printer_max_width_px=zt(this.value),i(2,e),i(6,m)}function r(){e.printer_dots_per_mm=zt(this.value),i(2,e),i(6,m)}function U(){e.invert=this.checked,i(2,e),i(6,m)}function it(){o.vendorIdHex=this.value,i(3,o)}function Z(){o.productIdHex=this.value,i(3,o)}function lt(){o.iface=zt(this.value),i(3,o)}function W(){o.endpoint=zt(this.value),i(3,o)}function at(){o.align=We(this),i(3,o)}function A(){o.pause=this.checked,i(3,o)}function z(){o.cut=this.checked,i(3,o)}return[h,s,e,o,d,g,m,a,f,l,p,w,E,x,j,P,M,T,K,rt,b,N,r,U,it,Z,lt,W,at,A,z]}class Zn extends yn{constructor(G){super(),wn(this,G,Un,Nn,kn,{},null,[-1,-1])}}export{Zn as component,Wn as universal};
