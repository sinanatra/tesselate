import{S as yn,i as kn,s as xn,n as dr,d as ht,J as gn,K as Cn,L as qt,M as Tt,N as bt,e as fr,f as De,h as T,O as vt,H as Ot,G as J,P as je,j as Y,k as mt,Q as _t,m as lt,l as Ut,o as X,q as ut,p as Ft,z as En,I as Sn,R as Me,T as dn}from"../chunks/W0BAji1W.js";import"../chunks/IHki7fMi.js";function pr(B){return(B==null?void 0:B.length)!==void 0?B:Array.from(B)}const In=!0,Wn=Object.freeze(Object.defineProperty({__proto__:null,prerender:In},Symbol.toStringTag,{value:"Module"}));var hr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zn(B){return B&&B.__esModule&&Object.prototype.hasOwnProperty.call(B,"default")?B.default:B}function cr(B){throw new Error('Could not dynamically require "'+B+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var bn={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(B,Q){(function(i){B.exports=i()})(function(){return function i(z,w,h){function s(p,g){if(!w[p]){if(!z[p]){var _=typeof cr=="function"&&cr;if(!g&&_)return _(p,!0);if(e)return e(p,!0);var v=new Error("Cannot find module '"+p+"'");throw v.code="MODULE_NOT_FOUND",v}var a=w[p]={exports:{}};z[p][0].call(a.exports,function(m){var n=z[p][1][m];return s(n||m)},a,a.exports,i,z,w,h)}return w[p].exports}for(var e=typeof cr=="function"&&cr,o=0;o<h.length;o++)s(h[o]);return s}({1:[function(i,z,w){var h=i("./utils"),s=i("./support"),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";w.encode=function(o){for(var p,g,_,v,a,m,n,f=[],l=0,d=o.length,y=d,C=h.getTypeOf(o)!=="string";l<o.length;)y=d-l,_=C?(p=o[l++],g=l<d?o[l++]:0,l<d?o[l++]:0):(p=o.charCodeAt(l++),g=l<d?o.charCodeAt(l++):0,l<d?o.charCodeAt(l++):0),v=p>>2,a=(3&p)<<4|g>>4,m=1<y?(15&g)<<2|_>>6:64,n=2<y?63&_:64,f.push(e.charAt(v)+e.charAt(a)+e.charAt(m)+e.charAt(n));return f.join("")},w.decode=function(o){var p,g,_,v,a,m,n=0,f=0,l="data:";if(o.substr(0,l.length)===l)throw new Error("Invalid base64 input, it looks like a data url.");var d,y=3*(o=o.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(o.charAt(o.length-1)===e.charAt(64)&&y--,o.charAt(o.length-2)===e.charAt(64)&&y--,y%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=s.uint8array?new Uint8Array(0|y):new Array(0|y);n<o.length;)p=e.indexOf(o.charAt(n++))<<2|(v=e.indexOf(o.charAt(n++)))>>4,g=(15&v)<<4|(a=e.indexOf(o.charAt(n++)))>>2,_=(3&a)<<6|(m=e.indexOf(o.charAt(n++))),d[f++]=p,a!==64&&(d[f++]=g),m!==64&&(d[f++]=_);return d}},{"./support":30,"./utils":32}],2:[function(i,z,w){var h=i("./external"),s=i("./stream/DataWorker"),e=i("./stream/Crc32Probe"),o=i("./stream/DataLengthProbe");function p(g,_,v,a,m){this.compressedSize=g,this.uncompressedSize=_,this.crc32=v,this.compression=a,this.compressedContent=m}p.prototype={getContentWorker:function(){var g=new s(h.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),_=this;return g.on("end",function(){if(this.streamInfo.data_length!==_.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),g},getCompressedWorker:function(){return new s(h.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(g,_,v){return g.pipe(new e).pipe(new o("uncompressedSize")).pipe(_.compressWorker(v)).pipe(new o("compressedSize")).withStreamInfo("compression",_)},z.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(i,z,w){var h=i("./stream/GenericWorker");w.STORE={magic:"\0\0",compressWorker:function(){return new h("STORE compression")},uncompressWorker:function(){return new h("STORE decompression")}},w.DEFLATE=i("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(i,z,w){var h=i("./utils"),s=function(){for(var e,o=[],p=0;p<256;p++){e=p;for(var g=0;g<8;g++)e=1&e?3988292384^e>>>1:e>>>1;o[p]=e}return o}();z.exports=function(e,o){return e!==void 0&&e.length?h.getTypeOf(e)!=="string"?function(p,g,_,v){var a=s,m=v+_;p^=-1;for(var n=v;n<m;n++)p=p>>>8^a[255&(p^g[n])];return-1^p}(0|o,e,e.length,0):function(p,g,_,v){var a=s,m=v+_;p^=-1;for(var n=v;n<m;n++)p=p>>>8^a[255&(p^g.charCodeAt(n))];return-1^p}(0|o,e,e.length,0):0}},{"./utils":32}],5:[function(i,z,w){w.base64=!1,w.binary=!1,w.dir=!1,w.createFolders=!0,w.date=null,w.compression=null,w.compressionOptions=null,w.comment=null,w.unixPermissions=null,w.dosPermissions=null},{}],6:[function(i,z,w){var h=null;h=typeof Promise<"u"?Promise:i("lie"),z.exports={Promise:h}},{lie:37}],7:[function(i,z,w){var h=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=i("pako"),e=i("./utils"),o=i("./stream/GenericWorker"),p=h?"uint8array":"array";function g(_,v){o.call(this,"FlateWorker/"+_),this._pako=null,this._pakoAction=_,this._pakoOptions=v,this.meta={}}w.magic="\b\0",e.inherits(g,o),g.prototype.processChunk=function(_){this.meta=_.meta,this._pako===null&&this._createPako(),this._pako.push(e.transformTo(p,_.data),!1)},g.prototype.flush=function(){o.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},g.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},g.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var _=this;this._pako.onData=function(v){_.push({data:v,meta:_.meta})}},w.compressWorker=function(_){return new g("Deflate",_)},w.uncompressWorker=function(){return new g("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(i,z,w){function h(a,m){var n,f="";for(n=0;n<m;n++)f+=String.fromCharCode(255&a),a>>>=8;return f}function s(a,m,n,f,l,d){var y,C,x=a.file,R=a.compression,D=d!==p.utf8encode,Z=e.transformTo("string",d(x.name)),O=e.transformTo("string",p.utf8encode(x.name)),K=x.comment,$=e.transformTo("string",d(K)),b=e.transformTo("string",p.utf8encode(K)),N=O.length!==x.name.length,r=b.length!==K.length,L="",st="",M="",ot=x.dir,H=x.date,at={crc32:0,compressedSize:0,uncompressedSize:0};m&&!n||(at.crc32=a.crc32,at.compressedSize=a.compressedSize,at.uncompressedSize=a.uncompressedSize);var A=0;m&&(A|=8),D||!N&&!r||(A|=2048);var S=0,rt=0;ot&&(S|=16),l==="UNIX"?(rt=798,S|=function(W,gt){var wt=W;return W||(wt=gt?16893:33204),(65535&wt)<<16}(x.unixPermissions,ot)):(rt=20,S|=function(W){return 63&(W||0)}(x.dosPermissions)),y=H.getUTCHours(),y<<=6,y|=H.getUTCMinutes(),y<<=5,y|=H.getUTCSeconds()/2,C=H.getUTCFullYear()-1980,C<<=4,C|=H.getUTCMonth()+1,C<<=5,C|=H.getUTCDate(),N&&(st=h(1,1)+h(g(Z),4)+O,L+="up"+h(st.length,2)+st),r&&(M=h(1,1)+h(g($),4)+b,L+="uc"+h(M.length,2)+M);var j="";return j+=`
\0`,j+=h(A,2),j+=R.magic,j+=h(y,2),j+=h(C,2),j+=h(at.crc32,4),j+=h(at.compressedSize,4),j+=h(at.uncompressedSize,4),j+=h(Z.length,2),j+=h(L.length,2),{fileRecord:_.LOCAL_FILE_HEADER+j+Z+L,dirRecord:_.CENTRAL_FILE_HEADER+h(rt,2)+j+h($.length,2)+"\0\0\0\0"+h(S,4)+h(f,4)+Z+L+$}}var e=i("../utils"),o=i("../stream/GenericWorker"),p=i("../utf8"),g=i("../crc32"),_=i("../signature");function v(a,m,n,f){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=n,this.encodeFileName=f,this.streamFiles=a,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}e.inherits(v,o),v.prototype.push=function(a){var m=a.meta.percent||0,n=this.entriesCount,f=this._sources.length;this.accumulate?this.contentBuffer.push(a):(this.bytesWritten+=a.data.length,o.prototype.push.call(this,{data:a.data,meta:{currentFile:this.currentFile,percent:n?(m+100*(n-f-1))/n:100}}))},v.prototype.openedSource=function(a){this.currentSourceOffset=this.bytesWritten,this.currentFile=a.file.name;var m=this.streamFiles&&!a.file.dir;if(m){var n=s(a,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(a){this.accumulate=!1;var m=this.streamFiles&&!a.file.dir,n=s(a,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),m)this.push({data:function(f){return _.DATA_DESCRIPTOR+h(f.crc32,4)+h(f.compressedSize,4)+h(f.uncompressedSize,4)}(a),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var a=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var n=this.bytesWritten-a,f=function(l,d,y,C,x){var R=e.transformTo("string",x(C));return _.CENTRAL_DIRECTORY_END+"\0\0\0\0"+h(l,2)+h(l,2)+h(d,4)+h(y,4)+h(R.length,2)+R}(this.dirRecords.length,n,a,this.zipComment,this.encodeFileName);this.push({data:f,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(a){this._sources.push(a);var m=this;return a.on("data",function(n){m.processChunk(n)}),a.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),a.on("error",function(n){m.error(n)}),this},v.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(a){var m=this._sources;if(!o.prototype.error.call(this,a))return!1;for(var n=0;n<m.length;n++)try{m[n].error(a)}catch{}return!0},v.prototype.lock=function(){o.prototype.lock.call(this);for(var a=this._sources,m=0;m<a.length;m++)a[m].lock()},z.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(i,z,w){var h=i("../compressions"),s=i("./ZipFileWorker");w.generateWorker=function(e,o,p){var g=new s(o.streamFiles,p,o.platform,o.encodeFileName),_=0;try{e.forEach(function(v,a){_++;var m=function(d,y){var C=d||y,x=h[C];if(!x)throw new Error(C+" is not a valid compression method !");return x}(a.options.compression,o.compression),n=a.options.compressionOptions||o.compressionOptions||{},f=a.dir,l=a.date;a._compressWorker(m,n).withStreamInfo("file",{name:v,dir:f,date:l,comment:a.comment||"",unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions}).pipe(g)}),g.entriesCount=_}catch(v){g.error(v)}return g}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(i,z,w){function h(){if(!(this instanceof h))return new h;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new h;for(var e in this)typeof this[e]!="function"&&(s[e]=this[e]);return s}}(h.prototype=i("./object")).loadAsync=i("./load"),h.support=i("./support"),h.defaults=i("./defaults"),h.version="3.10.1",h.loadAsync=function(s,e){return new h().loadAsync(s,e)},h.external=i("./external"),z.exports=h},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(i,z,w){var h=i("./utils"),s=i("./external"),e=i("./utf8"),o=i("./zipEntries"),p=i("./stream/Crc32Probe"),g=i("./nodejsUtils");function _(v){return new s.Promise(function(a,m){var n=v.decompressed.getContentWorker().pipe(new p);n.on("error",function(f){m(f)}).on("end",function(){n.streamInfo.crc32!==v.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):a()}).resume()})}z.exports=function(v,a){var m=this;return a=h.extend(a||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:e.utf8decode}),g.isNode&&g.isStream(v)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):h.prepareContent("the loaded zip file",v,!0,a.optimizedBinaryString,a.base64).then(function(n){var f=new o(a);return f.load(n),f}).then(function(n){var f=[s.Promise.resolve(n)],l=n.files;if(a.checkCRC32)for(var d=0;d<l.length;d++)f.push(_(l[d]));return s.Promise.all(f)}).then(function(n){for(var f=n.shift(),l=f.files,d=0;d<l.length;d++){var y=l[d],C=y.fileNameStr,x=h.resolve(y.fileNameStr);m.file(x,y.decompressed,{binary:!0,optimizedBinaryString:!0,date:y.date,dir:y.dir,comment:y.fileCommentStr.length?y.fileCommentStr:null,unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions,createFolders:a.createFolders}),y.dir||(m.file(x).unsafeOriginalName=C)}return f.zipComment.length&&(m.comment=f.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(i,z,w){var h=i("../utils"),s=i("../stream/GenericWorker");function e(o,p){s.call(this,"Nodejs stream input adapter for "+o),this._upstreamEnded=!1,this._bindStream(p)}h.inherits(e,s),e.prototype._bindStream=function(o){var p=this;(this._stream=o).pause(),o.on("data",function(g){p.push({data:g,meta:{percent:0}})}).on("error",function(g){p.isPaused?this.generatedError=g:p.error(g)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},e.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},e.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},z.exports=e},{"../stream/GenericWorker":28,"../utils":32}],13:[function(i,z,w){var h=i("readable-stream").Readable;function s(e,o,p){h.call(this,o),this._helper=e;var g=this;e.on("data",function(_,v){g.push(_)||g._helper.pause(),p&&p(v)}).on("error",function(_){g.emit("error",_)}).on("end",function(){g.push(null)})}i("../utils").inherits(s,h),s.prototype._read=function(){this._helper.resume()},z.exports=s},{"../utils":32,"readable-stream":16}],14:[function(i,z,w){z.exports={isNode:typeof Buffer<"u",newBufferFrom:function(h,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(h,s);if(typeof h=="number")throw new Error('The "data" argument must not be a number');return new Buffer(h,s)},allocBuffer:function(h){if(Buffer.alloc)return Buffer.alloc(h);var s=new Buffer(h);return s.fill(0),s},isBuffer:function(h){return Buffer.isBuffer(h)},isStream:function(h){return h&&typeof h.on=="function"&&typeof h.pause=="function"&&typeof h.resume=="function"}}},{}],15:[function(i,z,w){function h(x,R,D){var Z,O=e.getTypeOf(R),K=e.extend(D||{},g);K.date=K.date||new Date,K.compression!==null&&(K.compression=K.compression.toUpperCase()),typeof K.unixPermissions=="string"&&(K.unixPermissions=parseInt(K.unixPermissions,8)),K.unixPermissions&&16384&K.unixPermissions&&(K.dir=!0),K.dosPermissions&&16&K.dosPermissions&&(K.dir=!0),K.dir&&(x=l(x)),K.createFolders&&(Z=f(x))&&d.call(this,Z,!0);var $=O==="string"&&K.binary===!1&&K.base64===!1;D&&D.binary!==void 0||(K.binary=!$),(R instanceof _&&R.uncompressedSize===0||K.dir||!R||R.length===0)&&(K.base64=!1,K.binary=!0,R="",K.compression="STORE",O="string");var b=null;b=R instanceof _||R instanceof o?R:m.isNode&&m.isStream(R)?new n(x,R):e.prepareContent(x,R,K.binary,K.optimizedBinaryString,K.base64);var N=new v(x,b,K);this.files[x]=N}var s=i("./utf8"),e=i("./utils"),o=i("./stream/GenericWorker"),p=i("./stream/StreamHelper"),g=i("./defaults"),_=i("./compressedObject"),v=i("./zipObject"),a=i("./generate"),m=i("./nodejsUtils"),n=i("./nodejs/NodejsStreamInputAdapter"),f=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var R=x.lastIndexOf("/");return 0<R?x.substring(0,R):""},l=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},d=function(x,R){return R=R!==void 0?R:g.createFolders,x=l(x),this.files[x]||h.call(this,x,null,{dir:!0,createFolders:R}),this.files[x]};function y(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var R,D,Z;for(R in this.files)Z=this.files[R],(D=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&x(D,Z)},filter:function(x){var R=[];return this.forEach(function(D,Z){x(D,Z)&&R.push(Z)}),R},file:function(x,R,D){if(arguments.length!==1)return x=this.root+x,h.call(this,x,R,D),this;if(y(x)){var Z=x;return this.filter(function(K,$){return!$.dir&&Z.test(K)})}var O=this.files[this.root+x];return O&&!O.dir?O:null},folder:function(x){if(!x)return this;if(y(x))return this.filter(function(O,K){return K.dir&&x.test(O)});var R=this.root+x,D=d.call(this,R),Z=this.clone();return Z.root=D.name,Z},remove:function(x){x=this.root+x;var R=this.files[x];if(R||(x.slice(-1)!=="/"&&(x+="/"),R=this.files[x]),R&&!R.dir)delete this.files[x];else for(var D=this.filter(function(O,K){return K.name.slice(0,x.length)===x}),Z=0;Z<D.length;Z++)delete this.files[D[Z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var R,D={};try{if((D=e.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=D.type.toLowerCase(),D.compression=D.compression.toUpperCase(),D.type==="binarystring"&&(D.type="string"),!D.type)throw new Error("No output type specified.");e.checkSupport(D.type),D.platform!=="darwin"&&D.platform!=="freebsd"&&D.platform!=="linux"&&D.platform!=="sunos"||(D.platform="UNIX"),D.platform==="win32"&&(D.platform="DOS");var Z=D.comment||this.comment||"";R=a.generateWorker(this,D,Z)}catch(O){(R=new o("error")).error(O)}return new p(R,D.type||"string",D.mimeType)},generateAsync:function(x,R){return this.generateInternalStream(x).accumulate(R)},generateNodeStream:function(x,R){return(x=x||{}).type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(R)}};z.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(i,z,w){z.exports=i("stream")},{stream:void 0}],17:[function(i,z,w){var h=i("./DataReader");function s(e){h.call(this,e);for(var o=0;o<this.data.length;o++)e[o]=255&e[o]}i("../utils").inherits(s,h),s.prototype.byteAt=function(e){return this.data[this.zero+e]},s.prototype.lastIndexOfSignature=function(e){for(var o=e.charCodeAt(0),p=e.charCodeAt(1),g=e.charCodeAt(2),_=e.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===o&&this.data[v+1]===p&&this.data[v+2]===g&&this.data[v+3]===_)return v-this.zero;return-1},s.prototype.readAndCheckSignature=function(e){var o=e.charCodeAt(0),p=e.charCodeAt(1),g=e.charCodeAt(2),_=e.charCodeAt(3),v=this.readData(4);return o===v[0]&&p===v[1]&&g===v[2]&&_===v[3]},s.prototype.readData=function(e){if(this.checkOffset(e),e===0)return[];var o=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,o},z.exports=s},{"../utils":32,"./DataReader":18}],18:[function(i,z,w){var h=i("../utils");function s(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var o,p=0;for(this.checkOffset(e),o=this.index+e-1;o>=this.index;o--)p=(p<<8)+this.byteAt(o);return this.index+=e,p},readString:function(e){return h.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},z.exports=s},{"../utils":32}],19:[function(i,z,w){var h=i("./Uint8ArrayReader");function s(e){h.call(this,e)}i("../utils").inherits(s,h),s.prototype.readData=function(e){this.checkOffset(e);var o=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,o},z.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(i,z,w){var h=i("./DataReader");function s(e){h.call(this,e)}i("../utils").inherits(s,h),s.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},s.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},s.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},s.prototype.readData=function(e){this.checkOffset(e);var o=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,o},z.exports=s},{"../utils":32,"./DataReader":18}],21:[function(i,z,w){var h=i("./ArrayReader");function s(e){h.call(this,e)}i("../utils").inherits(s,h),s.prototype.readData=function(e){if(this.checkOffset(e),e===0)return new Uint8Array(0);var o=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,o},z.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(i,z,w){var h=i("../utils"),s=i("../support"),e=i("./ArrayReader"),o=i("./StringReader"),p=i("./NodeBufferReader"),g=i("./Uint8ArrayReader");z.exports=function(_){var v=h.getTypeOf(_);return h.checkSupport(v),v!=="string"||s.uint8array?v==="nodebuffer"?new p(_):s.uint8array?new g(h.transformTo("uint8array",_)):new e(h.transformTo("array",_)):new o(_)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(i,z,w){w.LOCAL_FILE_HEADER="PK",w.CENTRAL_FILE_HEADER="PK",w.CENTRAL_DIRECTORY_END="PK",w.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",w.ZIP64_CENTRAL_DIRECTORY_END="PK",w.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(i,z,w){var h=i("./GenericWorker"),s=i("../utils");function e(o){h.call(this,"ConvertWorker to "+o),this.destType=o}s.inherits(e,h),e.prototype.processChunk=function(o){this.push({data:s.transformTo(this.destType,o.data),meta:o.meta})},z.exports=e},{"../utils":32,"./GenericWorker":28}],25:[function(i,z,w){var h=i("./GenericWorker"),s=i("../crc32");function e(){h.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}i("../utils").inherits(e,h),e.prototype.processChunk=function(o){this.streamInfo.crc32=s(o.data,this.streamInfo.crc32||0),this.push(o)},z.exports=e},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(i,z,w){var h=i("../utils"),s=i("./GenericWorker");function e(o){s.call(this,"DataLengthProbe for "+o),this.propName=o,this.withStreamInfo(o,0)}h.inherits(e,s),e.prototype.processChunk=function(o){if(o){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+o.data.length}s.prototype.processChunk.call(this,o)},z.exports=e},{"../utils":32,"./GenericWorker":28}],27:[function(i,z,w){var h=i("../utils"),s=i("./GenericWorker");function e(o){s.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,o.then(function(g){p.dataIsReady=!0,p.data=g,p.max=g&&g.length||0,p.type=h.getTypeOf(g),p.isPaused||p._tickAndRepeat()},function(g){p.error(g)})}h.inherits(e,s),e.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},e.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,h.delay(this._tickAndRepeat,[],this)),!0)},e.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(h.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},e.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var o=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":o=this.data.substring(this.index,p);break;case"uint8array":o=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":o=this.data.slice(this.index,p)}return this.index=p,this.push({data:o,meta:{percent:this.max?this.index/this.max*100:0}})},z.exports=e},{"../utils":32,"./GenericWorker":28}],28:[function(i,z,w){function h(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}h.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,e){return this._listeners[s].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,e){if(this._listeners[s])for(var o=0;o<this._listeners[s].length;o++)this._listeners[s][o].call(this,e)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var e=this;return s.on("data",function(o){e.processChunk(o)}),s.on("end",function(){e.end()}),s.on("error",function(o){e.error(o)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,e){return this.extraStreamInfo[s]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},z.exports=h},{}],29:[function(i,z,w){var h=i("../utils"),s=i("./ConvertWorker"),e=i("./GenericWorker"),o=i("../base64"),p=i("../support"),g=i("../external"),_=null;if(p.nodestream)try{_=i("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(m,n){return new g.Promise(function(f,l){var d=[],y=m._internalType,C=m._outputType,x=m._mimeType;m.on("data",function(R,D){d.push(R),n&&n(D)}).on("error",function(R){d=[],l(R)}).on("end",function(){try{var R=function(D,Z,O){switch(D){case"blob":return h.newBlob(h.transformTo("arraybuffer",Z),O);case"base64":return o.encode(Z);default:return h.transformTo(D,Z)}}(C,function(D,Z){var O,K=0,$=null,b=0;for(O=0;O<Z.length;O++)b+=Z[O].length;switch(D){case"string":return Z.join("");case"array":return Array.prototype.concat.apply([],Z);case"uint8array":for($=new Uint8Array(b),O=0;O<Z.length;O++)$.set(Z[O],K),K+=Z[O].length;return $;case"nodebuffer":return Buffer.concat(Z);default:throw new Error("concat : unsupported type '"+D+"'")}}(y,d),x);f(R)}catch(D){l(D)}d=[]}).resume()})}function a(m,n,f){var l=n;switch(n){case"blob":case"arraybuffer":l="uint8array";break;case"base64":l="string"}try{this._internalType=l,this._outputType=n,this._mimeType=f,h.checkSupport(l),this._worker=m.pipe(new s(l)),m.lock()}catch(d){this._worker=new e("error"),this._worker.error(d)}}a.prototype={accumulate:function(m){return v(this,m)},on:function(m,n){var f=this;return m==="data"?this._worker.on(m,function(l){n.call(f,l.data,l.meta)}):this._worker.on(m,function(){h.delay(n,arguments,f)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(h.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new _(this,{objectMode:this._outputType!=="nodebuffer"},m)}},z.exports=a},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(i,z,w){if(w.base64=!0,w.array=!0,w.string=!0,w.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",w.nodebuffer=typeof Buffer<"u",w.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")w.blob=!1;else{var h=new ArrayBuffer(0);try{w.blob=new Blob([h],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(h),w.blob=s.getBlob("application/zip").size===0}catch{w.blob=!1}}}try{w.nodestream=!!i("readable-stream").Readable}catch{w.nodestream=!1}},{"readable-stream":16}],31:[function(i,z,w){for(var h=i("./utils"),s=i("./support"),e=i("./nodejsUtils"),o=i("./stream/GenericWorker"),p=new Array(256),g=0;g<256;g++)p[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;p[254]=p[254]=1;function _(){o.call(this,"utf-8 decode"),this.leftOver=null}function v(){o.call(this,"utf-8 encode")}w.utf8encode=function(a){return s.nodebuffer?e.newBufferFrom(a,"utf-8"):function(m){var n,f,l,d,y,C=m.length,x=0;for(d=0;d<C;d++)(64512&(f=m.charCodeAt(d)))==55296&&d+1<C&&(64512&(l=m.charCodeAt(d+1)))==56320&&(f=65536+(f-55296<<10)+(l-56320),d++),x+=f<128?1:f<2048?2:f<65536?3:4;for(n=s.uint8array?new Uint8Array(x):new Array(x),d=y=0;y<x;d++)(64512&(f=m.charCodeAt(d)))==55296&&d+1<C&&(64512&(l=m.charCodeAt(d+1)))==56320&&(f=65536+(f-55296<<10)+(l-56320),d++),f<128?n[y++]=f:(f<2048?n[y++]=192|f>>>6:(f<65536?n[y++]=224|f>>>12:(n[y++]=240|f>>>18,n[y++]=128|f>>>12&63),n[y++]=128|f>>>6&63),n[y++]=128|63&f);return n}(a)},w.utf8decode=function(a){return s.nodebuffer?h.transformTo("nodebuffer",a).toString("utf-8"):function(m){var n,f,l,d,y=m.length,C=new Array(2*y);for(n=f=0;n<y;)if((l=m[n++])<128)C[f++]=l;else if(4<(d=p[l]))C[f++]=65533,n+=d-1;else{for(l&=d===2?31:d===3?15:7;1<d&&n<y;)l=l<<6|63&m[n++],d--;1<d?C[f++]=65533:l<65536?C[f++]=l:(l-=65536,C[f++]=55296|l>>10&1023,C[f++]=56320|1023&l)}return C.length!==f&&(C.subarray?C=C.subarray(0,f):C.length=f),h.applyFromCharCode(C)}(a=h.transformTo(s.uint8array?"uint8array":"array",a))},h.inherits(_,o),_.prototype.processChunk=function(a){var m=h.transformTo(s.uint8array?"uint8array":"array",a.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var n=m;(m=new Uint8Array(n.length+this.leftOver.length)).set(this.leftOver,0),m.set(n,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var f=function(d,y){var C;for((y=y||d.length)>d.length&&(y=d.length),C=y-1;0<=C&&(192&d[C])==128;)C--;return C<0||C===0?y:C+p[d[C]]>y?C:y}(m),l=m;f!==m.length&&(s.uint8array?(l=m.subarray(0,f),this.leftOver=m.subarray(f,m.length)):(l=m.slice(0,f),this.leftOver=m.slice(f,m.length))),this.push({data:w.utf8decode(l),meta:a.meta})},_.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:w.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},w.Utf8DecodeWorker=_,h.inherits(v,o),v.prototype.processChunk=function(a){this.push({data:w.utf8encode(a.data),meta:a.meta})},w.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(i,z,w){var h=i("./support"),s=i("./base64"),e=i("./nodejsUtils"),o=i("./external");function p(n){return n}function g(n,f){for(var l=0;l<n.length;++l)f[l]=255&n.charCodeAt(l);return f}i("setimmediate"),w.newBlob=function(n,f){w.checkSupport("blob");try{return new Blob([n],{type:f})}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return l.append(n),l.getBlob(f)}catch{throw new Error("Bug : can't construct the Blob.")}}};var _={stringifyByChunk:function(n,f,l){var d=[],y=0,C=n.length;if(C<=l)return String.fromCharCode.apply(null,n);for(;y<C;)f==="array"||f==="nodebuffer"?d.push(String.fromCharCode.apply(null,n.slice(y,Math.min(y+l,C)))):d.push(String.fromCharCode.apply(null,n.subarray(y,Math.min(y+l,C)))),y+=l;return d.join("")},stringifyByChar:function(n){for(var f="",l=0;l<n.length;l++)f+=String.fromCharCode(n[l]);return f},applyCanBeUsed:{uint8array:function(){try{return h.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return h.nodebuffer&&String.fromCharCode.apply(null,e.allocBuffer(1)).length===1}catch{return!1}}()}};function v(n){var f=65536,l=w.getTypeOf(n),d=!0;if(l==="uint8array"?d=_.applyCanBeUsed.uint8array:l==="nodebuffer"&&(d=_.applyCanBeUsed.nodebuffer),d)for(;1<f;)try{return _.stringifyByChunk(n,l,f)}catch{f=Math.floor(f/2)}return _.stringifyByChar(n)}function a(n,f){for(var l=0;l<n.length;l++)f[l]=n[l];return f}w.applyFromCharCode=v;var m={};m.string={string:p,array:function(n){return g(n,new Array(n.length))},arraybuffer:function(n){return m.string.uint8array(n).buffer},uint8array:function(n){return g(n,new Uint8Array(n.length))},nodebuffer:function(n){return g(n,e.allocBuffer(n.length))}},m.array={string:v,array:p,arraybuffer:function(n){return new Uint8Array(n).buffer},uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return e.newBufferFrom(n)}},m.arraybuffer={string:function(n){return v(new Uint8Array(n))},array:function(n){return a(new Uint8Array(n),new Array(n.byteLength))},arraybuffer:p,uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return e.newBufferFrom(new Uint8Array(n))}},m.uint8array={string:v,array:function(n){return a(n,new Array(n.length))},arraybuffer:function(n){return n.buffer},uint8array:p,nodebuffer:function(n){return e.newBufferFrom(n)}},m.nodebuffer={string:v,array:function(n){return a(n,new Array(n.length))},arraybuffer:function(n){return m.nodebuffer.uint8array(n).buffer},uint8array:function(n){return a(n,new Uint8Array(n.length))},nodebuffer:p},w.transformTo=function(n,f){if(f=f||"",!n)return f;w.checkSupport(n);var l=w.getTypeOf(f);return m[l][n](f)},w.resolve=function(n){for(var f=n.split("/"),l=[],d=0;d<f.length;d++){var y=f[d];y==="."||y===""&&d!==0&&d!==f.length-1||(y===".."?l.pop():l.push(y))}return l.join("/")},w.getTypeOf=function(n){return typeof n=="string"?"string":Object.prototype.toString.call(n)==="[object Array]"?"array":h.nodebuffer&&e.isBuffer(n)?"nodebuffer":h.uint8array&&n instanceof Uint8Array?"uint8array":h.arraybuffer&&n instanceof ArrayBuffer?"arraybuffer":void 0},w.checkSupport=function(n){if(!h[n.toLowerCase()])throw new Error(n+" is not supported by this platform")},w.MAX_VALUE_16BITS=65535,w.MAX_VALUE_32BITS=-1,w.pretty=function(n){var f,l,d="";for(l=0;l<(n||"").length;l++)d+="\\x"+((f=n.charCodeAt(l))<16?"0":"")+f.toString(16).toUpperCase();return d},w.delay=function(n,f,l){setImmediate(function(){n.apply(l||null,f||[])})},w.inherits=function(n,f){function l(){}l.prototype=f.prototype,n.prototype=new l},w.extend=function(){var n,f,l={};for(n=0;n<arguments.length;n++)for(f in arguments[n])Object.prototype.hasOwnProperty.call(arguments[n],f)&&l[f]===void 0&&(l[f]=arguments[n][f]);return l},w.prepareContent=function(n,f,l,d,y){return o.Promise.resolve(f).then(function(C){return h.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new o.Promise(function(x,R){var D=new FileReader;D.onload=function(Z){x(Z.target.result)},D.onerror=function(Z){R(Z.target.error)},D.readAsArrayBuffer(C)}):C}).then(function(C){var x=w.getTypeOf(C);return x?(x==="arraybuffer"?C=w.transformTo("uint8array",C):x==="string"&&(y?C=s.decode(C):l&&d!==!0&&(C=function(R){return g(R,h.uint8array?new Uint8Array(R.length):new Array(R.length))}(C))),C):o.Promise.reject(new Error("Can't read the data of '"+n+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(i,z,w){var h=i("./reader/readerFor"),s=i("./utils"),e=i("./signature"),o=i("./zipEntry"),p=i("./support");function g(_){this.files=[],this.loadOptions=_}g.prototype={checkSignature:function(_){if(!this.reader.readAndCheckSignature(_)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(v)+", expected "+s.pretty(_)+")")}},isSignature:function(_,v){var a=this.reader.index;this.reader.setIndex(_);var m=this.reader.readString(4)===v;return this.reader.setIndex(a),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var _=this.reader.readData(this.zipCommentLength),v=p.uint8array?"uint8array":"array",a=s.transformTo(v,_);this.zipComment=this.loadOptions.decodeFileName(a)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var _,v,a,m=this.zip64EndOfCentralSize-44;0<m;)_=this.reader.readInt(2),v=this.reader.readInt(4),a=this.reader.readData(v),this.zip64ExtensibleData[_]={id:_,length:v,value:a}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var _,v;for(_=0;_<this.files.length;_++)v=this.files[_],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(e.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var _;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(e.CENTRAL_FILE_HEADER);)(_=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(_);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var _=this.reader.lastIndexOfSignature(e.CENTRAL_DIRECTORY_END);if(_<0)throw this.isSignature(0,e.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(_);var v=_;if(this.checkSignature(e.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(_=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(_),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,e.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var a=this.centralDirOffset+this.centralDirSize;this.zip64&&(a+=20,a+=12+this.zip64EndOfCentralSize);var m=v-a;if(0<m)this.isSignature(v,e.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(_){this.reader=h(_)},load:function(_){this.prepareReader(_),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},z.exports=g},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(i,z,w){var h=i("./reader/readerFor"),s=i("./utils"),e=i("./compressedObject"),o=i("./crc32"),p=i("./utf8"),g=i("./compressions"),_=i("./support");function v(a,m){this.options=a,this.loadOptions=m}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(a){var m,n;if(a.skip(22),this.fileNameLength=a.readInt(2),n=a.readInt(2),this.fileName=a.readData(this.fileNameLength),a.skip(n),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=function(f){for(var l in g)if(Object.prototype.hasOwnProperty.call(g,l)&&g[l].magic===f)return g[l];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new e(this.compressedSize,this.uncompressedSize,this.crc32,m,a.readData(this.compressedSize))},readCentralPart:function(a){this.versionMadeBy=a.readInt(2),a.skip(2),this.bitFlag=a.readInt(2),this.compressionMethod=a.readString(2),this.date=a.readDate(),this.crc32=a.readInt(4),this.compressedSize=a.readInt(4),this.uncompressedSize=a.readInt(4);var m=a.readInt(2);if(this.extraFieldsLength=a.readInt(2),this.fileCommentLength=a.readInt(2),this.diskNumberStart=a.readInt(2),this.internalFileAttributes=a.readInt(2),this.externalFileAttributes=a.readInt(4),this.localHeaderOffset=a.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");a.skip(m),this.readExtraFields(a),this.parseZIP64ExtraField(a),this.fileComment=a.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var a=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),a==0&&(this.dosPermissions=63&this.externalFileAttributes),a==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var a=h(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=a.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=a.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=a.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=a.readInt(4))}},readExtraFields:function(a){var m,n,f,l=a.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});a.index+4<l;)m=a.readInt(2),n=a.readInt(2),f=a.readData(n),this.extraFields[m]={id:m,length:n,value:f};a.setIndex(l)},handleUTF8:function(){var a=_.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var n=s.transformTo(a,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var f=this.findExtraFieldUnicodeComment();if(f!==null)this.fileCommentStr=f;else{var l=s.transformTo(a,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(l)}}},findExtraFieldUnicodePath:function(){var a=this.extraFields[28789];if(a){var m=h(a.value);return m.readInt(1)!==1||o(this.fileName)!==m.readInt(4)?null:p.utf8decode(m.readData(a.length-5))}return null},findExtraFieldUnicodeComment:function(){var a=this.extraFields[25461];if(a){var m=h(a.value);return m.readInt(1)!==1||o(this.fileComment)!==m.readInt(4)?null:p.utf8decode(m.readData(a.length-5))}return null}},z.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(i,z,w){function h(m,n,f){this.name=m,this.dir=f.dir,this.date=f.date,this.comment=f.comment,this.unixPermissions=f.unixPermissions,this.dosPermissions=f.dosPermissions,this._data=n,this._dataBinary=f.binary,this.options={compression:f.compression,compressionOptions:f.compressionOptions}}var s=i("./stream/StreamHelper"),e=i("./stream/DataWorker"),o=i("./utf8"),p=i("./compressedObject"),g=i("./stream/GenericWorker");h.prototype={internalStream:function(m){var n=null,f="string";try{if(!m)throw new Error("No output type specified.");var l=(f=m.toLowerCase())==="string"||f==="text";f!=="binarystring"&&f!=="text"||(f="string"),n=this._decompressWorker();var d=!this._dataBinary;d&&!l&&(n=n.pipe(new o.Utf8EncodeWorker)),!d&&l&&(n=n.pipe(new o.Utf8DecodeWorker))}catch(y){(n=new g("error")).error(y)}return new s(n,f,"")},async:function(m,n){return this.internalStream(m).accumulate(n)},nodeStream:function(m,n){return this.internalStream(m||"nodebuffer").toNodejsStream(n)},_compressWorker:function(m,n){if(this._data instanceof p&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var f=this._decompressWorker();return this._dataBinary||(f=f.pipe(new o.Utf8EncodeWorker)),p.createWorkerFrom(f,m,n)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof g?this._data:new e(this._data)}};for(var _=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},a=0;a<_.length;a++)h.prototype[_[a]]=v;z.exports=h},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(i,z,w){(function(h){var s,e,o=h.MutationObserver||h.WebKitMutationObserver;if(o){var p=0,g=new o(m),_=h.document.createTextNode("");g.observe(_,{characterData:!0}),s=function(){_.data=p=++p%2}}else if(h.setImmediate||h.MessageChannel===void 0)s="document"in h&&"onreadystatechange"in h.document.createElement("script")?function(){var n=h.document.createElement("script");n.onreadystatechange=function(){m(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},h.document.documentElement.appendChild(n)}:function(){setTimeout(m,0)};else{var v=new h.MessageChannel;v.port1.onmessage=m,s=function(){v.port2.postMessage(0)}}var a=[];function m(){var n,f;e=!0;for(var l=a.length;l;){for(f=a,a=[],n=-1;++n<l;)f[n]();l=a.length}e=!1}z.exports=function(n){a.push(n)!==1||e||s()}}).call(this,typeof hr<"u"?hr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(i,z,w){var h=i("immediate");function s(){}var e={},o=["REJECTED"],p=["FULFILLED"],g=["PENDING"];function _(l){if(typeof l!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,l!==s&&n(this,l)}function v(l,d,y){this.promise=l,typeof d=="function"&&(this.onFulfilled=d,this.callFulfilled=this.otherCallFulfilled),typeof y=="function"&&(this.onRejected=y,this.callRejected=this.otherCallRejected)}function a(l,d,y){h(function(){var C;try{C=d(y)}catch(x){return e.reject(l,x)}C===l?e.reject(l,new TypeError("Cannot resolve promise with itself")):e.resolve(l,C)})}function m(l){var d=l&&l.then;if(l&&(typeof l=="object"||typeof l=="function")&&typeof d=="function")return function(){d.apply(l,arguments)}}function n(l,d){var y=!1;function C(D){y||(y=!0,e.reject(l,D))}function x(D){y||(y=!0,e.resolve(l,D))}var R=f(function(){d(x,C)});R.status==="error"&&C(R.value)}function f(l,d){var y={};try{y.value=l(d),y.status="success"}catch(C){y.status="error",y.value=C}return y}(z.exports=_).prototype.finally=function(l){if(typeof l!="function")return this;var d=this.constructor;return this.then(function(y){return d.resolve(l()).then(function(){return y})},function(y){return d.resolve(l()).then(function(){throw y})})},_.prototype.catch=function(l){return this.then(null,l)},_.prototype.then=function(l,d){if(typeof l!="function"&&this.state===p||typeof d!="function"&&this.state===o)return this;var y=new this.constructor(s);return this.state!==g?a(y,this.state===p?l:d,this.outcome):this.queue.push(new v(y,l,d)),y},v.prototype.callFulfilled=function(l){e.resolve(this.promise,l)},v.prototype.otherCallFulfilled=function(l){a(this.promise,this.onFulfilled,l)},v.prototype.callRejected=function(l){e.reject(this.promise,l)},v.prototype.otherCallRejected=function(l){a(this.promise,this.onRejected,l)},e.resolve=function(l,d){var y=f(m,d);if(y.status==="error")return e.reject(l,y.value);var C=y.value;if(C)n(l,C);else{l.state=p,l.outcome=d;for(var x=-1,R=l.queue.length;++x<R;)l.queue[x].callFulfilled(d)}return l},e.reject=function(l,d){l.state=o,l.outcome=d;for(var y=-1,C=l.queue.length;++y<C;)l.queue[y].callRejected(d);return l},_.resolve=function(l){return l instanceof this?l:e.resolve(new this(s),l)},_.reject=function(l){var d=new this(s);return e.reject(d,l)},_.all=function(l){var d=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=l.length,C=!1;if(!y)return this.resolve([]);for(var x=new Array(y),R=0,D=-1,Z=new this(s);++D<y;)O(l[D],D);return Z;function O(K,$){d.resolve(K).then(function(b){x[$]=b,++R!==y||C||(C=!0,e.resolve(Z,x))},function(b){C||(C=!0,e.reject(Z,b))})}},_.race=function(l){var d=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=l.length,C=!1;if(!y)return this.resolve([]);for(var x=-1,R=new this(s);++x<y;)D=l[x],d.resolve(D).then(function(Z){C||(C=!0,e.resolve(R,Z))},function(Z){C||(C=!0,e.reject(R,Z))});var D;return R}},{immediate:36}],38:[function(i,z,w){var h={};(0,i("./lib/utils/common").assign)(h,i("./lib/deflate"),i("./lib/inflate"),i("./lib/zlib/constants")),z.exports=h},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(i,z,w){var h=i("./zlib/deflate"),s=i("./utils/common"),e=i("./utils/strings"),o=i("./zlib/messages"),p=i("./zlib/zstream"),g=Object.prototype.toString,_=0,v=-1,a=0,m=8;function n(l){if(!(this instanceof n))return new n(l);this.options=s.assign({level:v,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:a,to:""},l||{});var d=this.options;d.raw&&0<d.windowBits?d.windowBits=-d.windowBits:d.gzip&&0<d.windowBits&&d.windowBits<16&&(d.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var y=h.deflateInit2(this.strm,d.level,d.method,d.windowBits,d.memLevel,d.strategy);if(y!==_)throw new Error(o[y]);if(d.header&&h.deflateSetHeader(this.strm,d.header),d.dictionary){var C;if(C=typeof d.dictionary=="string"?e.string2buf(d.dictionary):g.call(d.dictionary)==="[object ArrayBuffer]"?new Uint8Array(d.dictionary):d.dictionary,(y=h.deflateSetDictionary(this.strm,C))!==_)throw new Error(o[y]);this._dict_set=!0}}function f(l,d){var y=new n(d);if(y.push(l,!0),y.err)throw y.msg||o[y.err];return y.result}n.prototype.push=function(l,d){var y,C,x=this.strm,R=this.options.chunkSize;if(this.ended)return!1;C=d===~~d?d:d===!0?4:0,typeof l=="string"?x.input=e.string2buf(l):g.call(l)==="[object ArrayBuffer]"?x.input=new Uint8Array(l):x.input=l,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new s.Buf8(R),x.next_out=0,x.avail_out=R),(y=h.deflate(x,C))!==1&&y!==_)return this.onEnd(y),!(this.ended=!0);x.avail_out!==0&&(x.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(e.buf2binstring(s.shrinkBuf(x.output,x.next_out))):this.onData(s.shrinkBuf(x.output,x.next_out)))}while((0<x.avail_in||x.avail_out===0)&&y!==1);return C===4?(y=h.deflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===_):C!==2||(this.onEnd(_),!(x.avail_out=0))},n.prototype.onData=function(l){this.chunks.push(l)},n.prototype.onEnd=function(l){l===_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=l,this.msg=this.strm.msg},w.Deflate=n,w.deflate=f,w.deflateRaw=function(l,d){return(d=d||{}).raw=!0,f(l,d)},w.gzip=function(l,d){return(d=d||{}).gzip=!0,f(l,d)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(i,z,w){var h=i("./zlib/inflate"),s=i("./utils/common"),e=i("./utils/strings"),o=i("./zlib/constants"),p=i("./zlib/messages"),g=i("./zlib/zstream"),_=i("./zlib/gzheader"),v=Object.prototype.toString;function a(n){if(!(this instanceof a))return new a(n);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},n||{});var f=this.options;f.raw&&0<=f.windowBits&&f.windowBits<16&&(f.windowBits=-f.windowBits,f.windowBits===0&&(f.windowBits=-15)),!(0<=f.windowBits&&f.windowBits<16)||n&&n.windowBits||(f.windowBits+=32),15<f.windowBits&&f.windowBits<48&&!(15&f.windowBits)&&(f.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var l=h.inflateInit2(this.strm,f.windowBits);if(l!==o.Z_OK)throw new Error(p[l]);this.header=new _,h.inflateGetHeader(this.strm,this.header)}function m(n,f){var l=new a(f);if(l.push(n,!0),l.err)throw l.msg||p[l.err];return l.result}a.prototype.push=function(n,f){var l,d,y,C,x,R,D=this.strm,Z=this.options.chunkSize,O=this.options.dictionary,K=!1;if(this.ended)return!1;d=f===~~f?f:f===!0?o.Z_FINISH:o.Z_NO_FLUSH,typeof n=="string"?D.input=e.binstring2buf(n):v.call(n)==="[object ArrayBuffer]"?D.input=new Uint8Array(n):D.input=n,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new s.Buf8(Z),D.next_out=0,D.avail_out=Z),(l=h.inflate(D,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&O&&(R=typeof O=="string"?e.string2buf(O):v.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,l=h.inflateSetDictionary(this.strm,R)),l===o.Z_BUF_ERROR&&K===!0&&(l=o.Z_OK,K=!1),l!==o.Z_STREAM_END&&l!==o.Z_OK)return this.onEnd(l),!(this.ended=!0);D.next_out&&(D.avail_out!==0&&l!==o.Z_STREAM_END&&(D.avail_in!==0||d!==o.Z_FINISH&&d!==o.Z_SYNC_FLUSH)||(this.options.to==="string"?(y=e.utf8border(D.output,D.next_out),C=D.next_out-y,x=e.buf2string(D.output,y),D.next_out=C,D.avail_out=Z-C,C&&s.arraySet(D.output,D.output,y,C,0),this.onData(x)):this.onData(s.shrinkBuf(D.output,D.next_out)))),D.avail_in===0&&D.avail_out===0&&(K=!0)}while((0<D.avail_in||D.avail_out===0)&&l!==o.Z_STREAM_END);return l===o.Z_STREAM_END&&(d=o.Z_FINISH),d===o.Z_FINISH?(l=h.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===o.Z_OK):d!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(D.avail_out=0))},a.prototype.onData=function(n){this.chunks.push(n)},a.prototype.onEnd=function(n){n===o.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg},w.Inflate=a,w.inflate=m,w.inflateRaw=function(n,f){return(f=f||{}).raw=!0,m(n,f)},w.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(i,z,w){var h=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";w.assign=function(o){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var g=p.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(var _ in g)g.hasOwnProperty(_)&&(o[_]=g[_])}}return o},w.shrinkBuf=function(o,p){return o.length===p?o:o.subarray?o.subarray(0,p):(o.length=p,o)};var s={arraySet:function(o,p,g,_,v){if(p.subarray&&o.subarray)o.set(p.subarray(g,g+_),v);else for(var a=0;a<_;a++)o[v+a]=p[g+a]},flattenChunks:function(o){var p,g,_,v,a,m;for(p=_=0,g=o.length;p<g;p++)_+=o[p].length;for(m=new Uint8Array(_),p=v=0,g=o.length;p<g;p++)a=o[p],m.set(a,v),v+=a.length;return m}},e={arraySet:function(o,p,g,_,v){for(var a=0;a<_;a++)o[v+a]=p[g+a]},flattenChunks:function(o){return[].concat.apply([],o)}};w.setTyped=function(o){o?(w.Buf8=Uint8Array,w.Buf16=Uint16Array,w.Buf32=Int32Array,w.assign(w,s)):(w.Buf8=Array,w.Buf16=Array,w.Buf32=Array,w.assign(w,e))},w.setTyped(h)},{}],42:[function(i,z,w){var h=i("./common"),s=!0,e=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{e=!1}for(var o=new h.Buf8(256),p=0;p<256;p++)o[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function g(_,v){if(v<65537&&(_.subarray&&e||!_.subarray&&s))return String.fromCharCode.apply(null,h.shrinkBuf(_,v));for(var a="",m=0;m<v;m++)a+=String.fromCharCode(_[m]);return a}o[254]=o[254]=1,w.string2buf=function(_){var v,a,m,n,f,l=_.length,d=0;for(n=0;n<l;n++)(64512&(a=_.charCodeAt(n)))==55296&&n+1<l&&(64512&(m=_.charCodeAt(n+1)))==56320&&(a=65536+(a-55296<<10)+(m-56320),n++),d+=a<128?1:a<2048?2:a<65536?3:4;for(v=new h.Buf8(d),n=f=0;f<d;n++)(64512&(a=_.charCodeAt(n)))==55296&&n+1<l&&(64512&(m=_.charCodeAt(n+1)))==56320&&(a=65536+(a-55296<<10)+(m-56320),n++),a<128?v[f++]=a:(a<2048?v[f++]=192|a>>>6:(a<65536?v[f++]=224|a>>>12:(v[f++]=240|a>>>18,v[f++]=128|a>>>12&63),v[f++]=128|a>>>6&63),v[f++]=128|63&a);return v},w.buf2binstring=function(_){return g(_,_.length)},w.binstring2buf=function(_){for(var v=new h.Buf8(_.length),a=0,m=v.length;a<m;a++)v[a]=_.charCodeAt(a);return v},w.buf2string=function(_,v){var a,m,n,f,l=v||_.length,d=new Array(2*l);for(a=m=0;a<l;)if((n=_[a++])<128)d[m++]=n;else if(4<(f=o[n]))d[m++]=65533,a+=f-1;else{for(n&=f===2?31:f===3?15:7;1<f&&a<l;)n=n<<6|63&_[a++],f--;1<f?d[m++]=65533:n<65536?d[m++]=n:(n-=65536,d[m++]=55296|n>>10&1023,d[m++]=56320|1023&n)}return g(d,m)},w.utf8border=function(_,v){var a;for((v=v||_.length)>_.length&&(v=_.length),a=v-1;0<=a&&(192&_[a])==128;)a--;return a<0||a===0?v:a+o[_[a]]>v?a:v}},{"./common":41}],43:[function(i,z,w){z.exports=function(h,s,e,o){for(var p=65535&h|0,g=h>>>16&65535|0,_=0;e!==0;){for(e-=_=2e3<e?2e3:e;g=g+(p=p+s[o++]|0)|0,--_;);p%=65521,g%=65521}return p|g<<16|0}},{}],44:[function(i,z,w){z.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(i,z,w){var h=function(){for(var s,e=[],o=0;o<256;o++){s=o;for(var p=0;p<8;p++)s=1&s?3988292384^s>>>1:s>>>1;e[o]=s}return e}();z.exports=function(s,e,o,p){var g=h,_=p+o;s^=-1;for(var v=p;v<_;v++)s=s>>>8^g[255&(s^e[v])];return-1^s}},{}],46:[function(i,z,w){var h,s=i("../utils/common"),e=i("./trees"),o=i("./adler32"),p=i("./crc32"),g=i("./messages"),_=0,v=4,a=0,m=-2,n=-1,f=4,l=2,d=8,y=9,C=286,x=30,R=19,D=2*C+1,Z=15,O=3,K=258,$=K+O+1,b=42,N=113,r=1,L=2,st=3,M=4;function ot(t,P){return t.msg=g[P],P}function H(t){return(t<<1)-(4<t?9:0)}function at(t){for(var P=t.length;0<=--P;)t[P]=0}function A(t){var P=t.state,I=P.pending;I>t.avail_out&&(I=t.avail_out),I!==0&&(s.arraySet(t.output,P.pending_buf,P.pending_out,I,t.next_out),t.next_out+=I,P.pending_out+=I,t.total_out+=I,t.avail_out-=I,P.pending-=I,P.pending===0&&(P.pending_out=0))}function S(t,P){e._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,P),t.block_start=t.strstart,A(t.strm)}function rt(t,P){t.pending_buf[t.pending++]=P}function j(t,P){t.pending_buf[t.pending++]=P>>>8&255,t.pending_buf[t.pending++]=255&P}function W(t,P){var I,c,u=t.max_chain_length,k=t.strstart,U=t.prev_length,F=t.nice_match,E=t.strstart>t.w_size-$?t.strstart-(t.w_size-$):0,V=t.window,q=t.w_mask,G=t.prev,et=t.strstart+K,ct=V[k+U-1],dt=V[k+U];t.prev_length>=t.good_match&&(u>>=2),F>t.lookahead&&(F=t.lookahead);do if(V[(I=P)+U]===dt&&V[I+U-1]===ct&&V[I]===V[k]&&V[++I]===V[k+1]){k+=2,I++;do;while(V[++k]===V[++I]&&V[++k]===V[++I]&&V[++k]===V[++I]&&V[++k]===V[++I]&&V[++k]===V[++I]&&V[++k]===V[++I]&&V[++k]===V[++I]&&V[++k]===V[++I]&&k<et);if(c=K-(et-k),k=et-K,U<c){if(t.match_start=P,F<=(U=c))break;ct=V[k+U-1],dt=V[k+U]}}while((P=G[P&q])>E&&--u!=0);return U<=t.lookahead?U:t.lookahead}function gt(t){var P,I,c,u,k,U,F,E,V,q,G=t.w_size;do{if(u=t.window_size-t.lookahead-t.strstart,t.strstart>=G+(G-$)){for(s.arraySet(t.window,t.window,G,G,0),t.match_start-=G,t.strstart-=G,t.block_start-=G,P=I=t.hash_size;c=t.head[--P],t.head[P]=G<=c?c-G:0,--I;);for(P=I=G;c=t.prev[--P],t.prev[P]=G<=c?c-G:0,--I;);u+=G}if(t.strm.avail_in===0)break;if(U=t.strm,F=t.window,E=t.strstart+t.lookahead,V=u,q=void 0,q=U.avail_in,V<q&&(q=V),I=q===0?0:(U.avail_in-=q,s.arraySet(F,U.input,U.next_in,q,E),U.state.wrap===1?U.adler=o(U.adler,F,q,E):U.state.wrap===2&&(U.adler=p(U.adler,F,q,E)),U.next_in+=q,U.total_in+=q,q),t.lookahead+=I,t.lookahead+t.insert>=O)for(k=t.strstart-t.insert,t.ins_h=t.window[k],t.ins_h=(t.ins_h<<t.hash_shift^t.window[k+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[k+O-1])&t.hash_mask,t.prev[k&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=k,k++,t.insert--,!(t.lookahead+t.insert<O)););}while(t.lookahead<$&&t.strm.avail_in!==0)}function wt(t,P){for(var I,c;;){if(t.lookahead<$){if(gt(t),t.lookahead<$&&P===_)return r;if(t.lookahead===0)break}if(I=0,t.lookahead>=O&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),I!==0&&t.strstart-I<=t.w_size-$&&(t.match_length=W(t,I)),t.match_length>=O)if(c=e._tr_tally(t,t.strstart-t.match_start,t.match_length-O),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=O){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else c=e._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(c&&(S(t,!1),t.strm.avail_out===0))return r}return t.insert=t.strstart<O-1?t.strstart:O-1,P===v?(S(t,!0),t.strm.avail_out===0?st:M):t.last_lit&&(S(t,!1),t.strm.avail_out===0)?r:L}function tt(t,P){for(var I,c,u;;){if(t.lookahead<$){if(gt(t),t.lookahead<$&&P===_)return r;if(t.lookahead===0)break}if(I=0,t.lookahead>=O&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=O-1,I!==0&&t.prev_length<t.max_lazy_match&&t.strstart-I<=t.w_size-$&&(t.match_length=W(t,I),t.match_length<=5&&(t.strategy===1||t.match_length===O&&4096<t.strstart-t.match_start)&&(t.match_length=O-1)),t.prev_length>=O&&t.match_length<=t.prev_length){for(u=t.strstart+t.lookahead-O,c=e._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-O),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=u&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=O-1,t.strstart++,c&&(S(t,!1),t.strm.avail_out===0))return r}else if(t.match_available){if((c=e._tr_tally(t,0,t.window[t.strstart-1]))&&S(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return r}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(c=e._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<O-1?t.strstart:O-1,P===v?(S(t,!0),t.strm.avail_out===0?st:M):t.last_lit&&(S(t,!1),t.strm.avail_out===0)?r:L}function pt(t,P,I,c,u){this.good_length=t,this.max_lazy=P,this.nice_length=I,this.max_chain=c,this.func=u}function yt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=d,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*D),this.dyn_dtree=new s.Buf16(2*(2*x+1)),this.bl_tree=new s.Buf16(2*(2*R+1)),at(this.dyn_ltree),at(this.dyn_dtree),at(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(Z+1),this.heap=new s.Buf16(2*C+1),at(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*C+1),at(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function kt(t){var P;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=l,(P=t.state).pending=0,P.pending_out=0,P.wrap<0&&(P.wrap=-P.wrap),P.status=P.wrap?b:N,t.adler=P.wrap===2?0:1,P.last_flush=_,e._tr_init(P),a):ot(t,m)}function It(t){var P=kt(t);return P===a&&function(I){I.window_size=2*I.w_size,at(I.head),I.max_lazy_match=h[I.level].max_lazy,I.good_match=h[I.level].good_length,I.nice_match=h[I.level].nice_length,I.max_chain_length=h[I.level].max_chain,I.strstart=0,I.block_start=0,I.lookahead=0,I.insert=0,I.match_length=I.prev_length=O-1,I.match_available=0,I.ins_h=0}(t.state),P}function ft(t,P,I,c,u,k){if(!t)return m;var U=1;if(P===n&&(P=6),c<0?(U=0,c=-c):15<c&&(U=2,c-=16),u<1||y<u||I!==d||c<8||15<c||P<0||9<P||k<0||f<k)return ot(t,m);c===8&&(c=9);var F=new yt;return(t.state=F).strm=t,F.wrap=U,F.gzhead=null,F.w_bits=c,F.w_size=1<<F.w_bits,F.w_mask=F.w_size-1,F.hash_bits=u+7,F.hash_size=1<<F.hash_bits,F.hash_mask=F.hash_size-1,F.hash_shift=~~((F.hash_bits+O-1)/O),F.window=new s.Buf8(2*F.w_size),F.head=new s.Buf16(F.hash_size),F.prev=new s.Buf16(F.w_size),F.lit_bufsize=1<<u+6,F.pending_buf_size=4*F.lit_bufsize,F.pending_buf=new s.Buf8(F.pending_buf_size),F.d_buf=1*F.lit_bufsize,F.l_buf=3*F.lit_bufsize,F.level=P,F.strategy=k,F.method=I,It(t)}h=[new pt(0,0,0,0,function(t,P){var I=65535;for(I>t.pending_buf_size-5&&(I=t.pending_buf_size-5);;){if(t.lookahead<=1){if(gt(t),t.lookahead===0&&P===_)return r;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var c=t.block_start+I;if((t.strstart===0||t.strstart>=c)&&(t.lookahead=t.strstart-c,t.strstart=c,S(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-$&&(S(t,!1),t.strm.avail_out===0))return r}return t.insert=0,P===v?(S(t,!0),t.strm.avail_out===0?st:M):(t.strstart>t.block_start&&(S(t,!1),t.strm.avail_out),r)}),new pt(4,4,8,4,wt),new pt(4,5,16,8,wt),new pt(4,6,32,32,wt),new pt(4,4,16,16,tt),new pt(8,16,32,32,tt),new pt(8,16,128,128,tt),new pt(8,32,128,256,tt),new pt(32,128,258,1024,tt),new pt(32,258,258,4096,tt)],w.deflateInit=function(t,P){return ft(t,P,d,15,8,0)},w.deflateInit2=ft,w.deflateReset=It,w.deflateResetKeep=kt,w.deflateSetHeader=function(t,P){return t&&t.state?t.state.wrap!==2?m:(t.state.gzhead=P,a):m},w.deflate=function(t,P){var I,c,u,k;if(!t||!t.state||5<P||P<0)return t?ot(t,m):m;if(c=t.state,!t.output||!t.input&&t.avail_in!==0||c.status===666&&P!==v)return ot(t,t.avail_out===0?-5:m);if(c.strm=t,I=c.last_flush,c.last_flush=P,c.status===b)if(c.wrap===2)t.adler=0,rt(c,31),rt(c,139),rt(c,8),c.gzhead?(rt(c,(c.gzhead.text?1:0)+(c.gzhead.hcrc?2:0)+(c.gzhead.extra?4:0)+(c.gzhead.name?8:0)+(c.gzhead.comment?16:0)),rt(c,255&c.gzhead.time),rt(c,c.gzhead.time>>8&255),rt(c,c.gzhead.time>>16&255),rt(c,c.gzhead.time>>24&255),rt(c,c.level===9?2:2<=c.strategy||c.level<2?4:0),rt(c,255&c.gzhead.os),c.gzhead.extra&&c.gzhead.extra.length&&(rt(c,255&c.gzhead.extra.length),rt(c,c.gzhead.extra.length>>8&255)),c.gzhead.hcrc&&(t.adler=p(t.adler,c.pending_buf,c.pending,0)),c.gzindex=0,c.status=69):(rt(c,0),rt(c,0),rt(c,0),rt(c,0),rt(c,0),rt(c,c.level===9?2:2<=c.strategy||c.level<2?4:0),rt(c,3),c.status=N);else{var U=d+(c.w_bits-8<<4)<<8;U|=(2<=c.strategy||c.level<2?0:c.level<6?1:c.level===6?2:3)<<6,c.strstart!==0&&(U|=32),U+=31-U%31,c.status=N,j(c,U),c.strstart!==0&&(j(c,t.adler>>>16),j(c,65535&t.adler)),t.adler=1}if(c.status===69)if(c.gzhead.extra){for(u=c.pending;c.gzindex<(65535&c.gzhead.extra.length)&&(c.pending!==c.pending_buf_size||(c.gzhead.hcrc&&c.pending>u&&(t.adler=p(t.adler,c.pending_buf,c.pending-u,u)),A(t),u=c.pending,c.pending!==c.pending_buf_size));)rt(c,255&c.gzhead.extra[c.gzindex]),c.gzindex++;c.gzhead.hcrc&&c.pending>u&&(t.adler=p(t.adler,c.pending_buf,c.pending-u,u)),c.gzindex===c.gzhead.extra.length&&(c.gzindex=0,c.status=73)}else c.status=73;if(c.status===73)if(c.gzhead.name){u=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>u&&(t.adler=p(t.adler,c.pending_buf,c.pending-u,u)),A(t),u=c.pending,c.pending===c.pending_buf_size)){k=1;break}k=c.gzindex<c.gzhead.name.length?255&c.gzhead.name.charCodeAt(c.gzindex++):0,rt(c,k)}while(k!==0);c.gzhead.hcrc&&c.pending>u&&(t.adler=p(t.adler,c.pending_buf,c.pending-u,u)),k===0&&(c.gzindex=0,c.status=91)}else c.status=91;if(c.status===91)if(c.gzhead.comment){u=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>u&&(t.adler=p(t.adler,c.pending_buf,c.pending-u,u)),A(t),u=c.pending,c.pending===c.pending_buf_size)){k=1;break}k=c.gzindex<c.gzhead.comment.length?255&c.gzhead.comment.charCodeAt(c.gzindex++):0,rt(c,k)}while(k!==0);c.gzhead.hcrc&&c.pending>u&&(t.adler=p(t.adler,c.pending_buf,c.pending-u,u)),k===0&&(c.status=103)}else c.status=103;if(c.status===103&&(c.gzhead.hcrc?(c.pending+2>c.pending_buf_size&&A(t),c.pending+2<=c.pending_buf_size&&(rt(c,255&t.adler),rt(c,t.adler>>8&255),t.adler=0,c.status=N)):c.status=N),c.pending!==0){if(A(t),t.avail_out===0)return c.last_flush=-1,a}else if(t.avail_in===0&&H(P)<=H(I)&&P!==v)return ot(t,-5);if(c.status===666&&t.avail_in!==0)return ot(t,-5);if(t.avail_in!==0||c.lookahead!==0||P!==_&&c.status!==666){var F=c.strategy===2?function(E,V){for(var q;;){if(E.lookahead===0&&(gt(E),E.lookahead===0)){if(V===_)return r;break}if(E.match_length=0,q=e._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++,q&&(S(E,!1),E.strm.avail_out===0))return r}return E.insert=0,V===v?(S(E,!0),E.strm.avail_out===0?st:M):E.last_lit&&(S(E,!1),E.strm.avail_out===0)?r:L}(c,P):c.strategy===3?function(E,V){for(var q,G,et,ct,dt=E.window;;){if(E.lookahead<=K){if(gt(E),E.lookahead<=K&&V===_)return r;if(E.lookahead===0)break}if(E.match_length=0,E.lookahead>=O&&0<E.strstart&&(G=dt[et=E.strstart-1])===dt[++et]&&G===dt[++et]&&G===dt[++et]){ct=E.strstart+K;do;while(G===dt[++et]&&G===dt[++et]&&G===dt[++et]&&G===dt[++et]&&G===dt[++et]&&G===dt[++et]&&G===dt[++et]&&G===dt[++et]&&et<ct);E.match_length=K-(ct-et),E.match_length>E.lookahead&&(E.match_length=E.lookahead)}if(E.match_length>=O?(q=e._tr_tally(E,1,E.match_length-O),E.lookahead-=E.match_length,E.strstart+=E.match_length,E.match_length=0):(q=e._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++),q&&(S(E,!1),E.strm.avail_out===0))return r}return E.insert=0,V===v?(S(E,!0),E.strm.avail_out===0?st:M):E.last_lit&&(S(E,!1),E.strm.avail_out===0)?r:L}(c,P):h[c.level].func(c,P);if(F!==st&&F!==M||(c.status=666),F===r||F===st)return t.avail_out===0&&(c.last_flush=-1),a;if(F===L&&(P===1?e._tr_align(c):P!==5&&(e._tr_stored_block(c,0,0,!1),P===3&&(at(c.head),c.lookahead===0&&(c.strstart=0,c.block_start=0,c.insert=0))),A(t),t.avail_out===0))return c.last_flush=-1,a}return P!==v?a:c.wrap<=0?1:(c.wrap===2?(rt(c,255&t.adler),rt(c,t.adler>>8&255),rt(c,t.adler>>16&255),rt(c,t.adler>>24&255),rt(c,255&t.total_in),rt(c,t.total_in>>8&255),rt(c,t.total_in>>16&255),rt(c,t.total_in>>24&255)):(j(c,t.adler>>>16),j(c,65535&t.adler)),A(t),0<c.wrap&&(c.wrap=-c.wrap),c.pending!==0?a:1)},w.deflateEnd=function(t){var P;return t&&t.state?(P=t.state.status)!==b&&P!==69&&P!==73&&P!==91&&P!==103&&P!==N&&P!==666?ot(t,m):(t.state=null,P===N?ot(t,-3):a):m},w.deflateSetDictionary=function(t,P){var I,c,u,k,U,F,E,V,q=P.length;if(!t||!t.state||(k=(I=t.state).wrap)===2||k===1&&I.status!==b||I.lookahead)return m;for(k===1&&(t.adler=o(t.adler,P,q,0)),I.wrap=0,q>=I.w_size&&(k===0&&(at(I.head),I.strstart=0,I.block_start=0,I.insert=0),V=new s.Buf8(I.w_size),s.arraySet(V,P,q-I.w_size,I.w_size,0),P=V,q=I.w_size),U=t.avail_in,F=t.next_in,E=t.input,t.avail_in=q,t.next_in=0,t.input=P,gt(I);I.lookahead>=O;){for(c=I.strstart,u=I.lookahead-(O-1);I.ins_h=(I.ins_h<<I.hash_shift^I.window[c+O-1])&I.hash_mask,I.prev[c&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=c,c++,--u;);I.strstart=c,I.lookahead=O-1,gt(I)}return I.strstart+=I.lookahead,I.block_start=I.strstart,I.insert=I.lookahead,I.lookahead=0,I.match_length=I.prev_length=O-1,I.match_available=0,t.next_in=F,t.input=E,t.avail_in=U,I.wrap=k,a},w.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(i,z,w){z.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(i,z,w){z.exports=function(h,s){var e,o,p,g,_,v,a,m,n,f,l,d,y,C,x,R,D,Z,O,K,$,b,N,r,L;e=h.state,o=h.next_in,r=h.input,p=o+(h.avail_in-5),g=h.next_out,L=h.output,_=g-(s-h.avail_out),v=g+(h.avail_out-257),a=e.dmax,m=e.wsize,n=e.whave,f=e.wnext,l=e.window,d=e.hold,y=e.bits,C=e.lencode,x=e.distcode,R=(1<<e.lenbits)-1,D=(1<<e.distbits)-1;t:do{y<15&&(d+=r[o++]<<y,y+=8,d+=r[o++]<<y,y+=8),Z=C[d&R];e:for(;;){if(d>>>=O=Z>>>24,y-=O,(O=Z>>>16&255)===0)L[g++]=65535&Z;else{if(!(16&O)){if(!(64&O)){Z=C[(65535&Z)+(d&(1<<O)-1)];continue e}if(32&O){e.mode=12;break t}h.msg="invalid literal/length code",e.mode=30;break t}K=65535&Z,(O&=15)&&(y<O&&(d+=r[o++]<<y,y+=8),K+=d&(1<<O)-1,d>>>=O,y-=O),y<15&&(d+=r[o++]<<y,y+=8,d+=r[o++]<<y,y+=8),Z=x[d&D];r:for(;;){if(d>>>=O=Z>>>24,y-=O,!(16&(O=Z>>>16&255))){if(!(64&O)){Z=x[(65535&Z)+(d&(1<<O)-1)];continue r}h.msg="invalid distance code",e.mode=30;break t}if($=65535&Z,y<(O&=15)&&(d+=r[o++]<<y,(y+=8)<O&&(d+=r[o++]<<y,y+=8)),a<($+=d&(1<<O)-1)){h.msg="invalid distance too far back",e.mode=30;break t}if(d>>>=O,y-=O,(O=g-_)<$){if(n<(O=$-O)&&e.sane){h.msg="invalid distance too far back",e.mode=30;break t}if(N=l,(b=0)===f){if(b+=m-O,O<K){for(K-=O;L[g++]=l[b++],--O;);b=g-$,N=L}}else if(f<O){if(b+=m+f-O,(O-=f)<K){for(K-=O;L[g++]=l[b++],--O;);if(b=0,f<K){for(K-=O=f;L[g++]=l[b++],--O;);b=g-$,N=L}}}else if(b+=f-O,O<K){for(K-=O;L[g++]=l[b++],--O;);b=g-$,N=L}for(;2<K;)L[g++]=N[b++],L[g++]=N[b++],L[g++]=N[b++],K-=3;K&&(L[g++]=N[b++],1<K&&(L[g++]=N[b++]))}else{for(b=g-$;L[g++]=L[b++],L[g++]=L[b++],L[g++]=L[b++],2<(K-=3););K&&(L[g++]=L[b++],1<K&&(L[g++]=L[b++]))}break}}break}}while(o<p&&g<v);o-=K=y>>3,d&=(1<<(y-=K<<3))-1,h.next_in=o,h.next_out=g,h.avail_in=o<p?p-o+5:5-(o-p),h.avail_out=g<v?v-g+257:257-(g-v),e.hold=d,e.bits=y}},{}],49:[function(i,z,w){var h=i("../utils/common"),s=i("./adler32"),e=i("./crc32"),o=i("./inffast"),p=i("./inftrees"),g=1,_=2,v=0,a=-2,m=1,n=852,f=592;function l(b){return(b>>>24&255)+(b>>>8&65280)+((65280&b)<<8)+((255&b)<<24)}function d(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new h.Buf16(320),this.work=new h.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(b){var N;return b&&b.state?(N=b.state,b.total_in=b.total_out=N.total=0,b.msg="",N.wrap&&(b.adler=1&N.wrap),N.mode=m,N.last=0,N.havedict=0,N.dmax=32768,N.head=null,N.hold=0,N.bits=0,N.lencode=N.lendyn=new h.Buf32(n),N.distcode=N.distdyn=new h.Buf32(f),N.sane=1,N.back=-1,v):a}function C(b){var N;return b&&b.state?((N=b.state).wsize=0,N.whave=0,N.wnext=0,y(b)):a}function x(b,N){var r,L;return b&&b.state?(L=b.state,N<0?(r=0,N=-N):(r=1+(N>>4),N<48&&(N&=15)),N&&(N<8||15<N)?a:(L.window!==null&&L.wbits!==N&&(L.window=null),L.wrap=r,L.wbits=N,C(b))):a}function R(b,N){var r,L;return b?(L=new d,(b.state=L).window=null,(r=x(b,N))!==v&&(b.state=null),r):a}var D,Z,O=!0;function K(b){if(O){var N;for(D=new h.Buf32(512),Z=new h.Buf32(32),N=0;N<144;)b.lens[N++]=8;for(;N<256;)b.lens[N++]=9;for(;N<280;)b.lens[N++]=7;for(;N<288;)b.lens[N++]=8;for(p(g,b.lens,0,288,D,0,b.work,{bits:9}),N=0;N<32;)b.lens[N++]=5;p(_,b.lens,0,32,Z,0,b.work,{bits:5}),O=!1}b.lencode=D,b.lenbits=9,b.distcode=Z,b.distbits=5}function $(b,N,r,L){var st,M=b.state;return M.window===null&&(M.wsize=1<<M.wbits,M.wnext=0,M.whave=0,M.window=new h.Buf8(M.wsize)),L>=M.wsize?(h.arraySet(M.window,N,r-M.wsize,M.wsize,0),M.wnext=0,M.whave=M.wsize):(L<(st=M.wsize-M.wnext)&&(st=L),h.arraySet(M.window,N,r-L,st,M.wnext),(L-=st)?(h.arraySet(M.window,N,r-L,L,0),M.wnext=L,M.whave=M.wsize):(M.wnext+=st,M.wnext===M.wsize&&(M.wnext=0),M.whave<M.wsize&&(M.whave+=st))),0}w.inflateReset=C,w.inflateReset2=x,w.inflateResetKeep=y,w.inflateInit=function(b){return R(b,15)},w.inflateInit2=R,w.inflate=function(b,N){var r,L,st,M,ot,H,at,A,S,rt,j,W,gt,wt,tt,pt,yt,kt,It,ft,t,P,I,c,u=0,k=new h.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!b||!b.state||!b.output||!b.input&&b.avail_in!==0)return a;(r=b.state).mode===12&&(r.mode=13),ot=b.next_out,st=b.output,at=b.avail_out,M=b.next_in,L=b.input,H=b.avail_in,A=r.hold,S=r.bits,rt=H,j=at,P=v;t:for(;;)switch(r.mode){case m:if(r.wrap===0){r.mode=13;break}for(;S<16;){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}if(2&r.wrap&&A===35615){k[r.check=0]=255&A,k[1]=A>>>8&255,r.check=e(r.check,k,2,0),S=A=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&A)<<8)+(A>>8))%31){b.msg="incorrect header check",r.mode=30;break}if((15&A)!=8){b.msg="unknown compression method",r.mode=30;break}if(S-=4,t=8+(15&(A>>>=4)),r.wbits===0)r.wbits=t;else if(t>r.wbits){b.msg="invalid window size",r.mode=30;break}r.dmax=1<<t,b.adler=r.check=1,r.mode=512&A?10:12,S=A=0;break;case 2:for(;S<16;){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}if(r.flags=A,(255&r.flags)!=8){b.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){b.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=A>>8&1),512&r.flags&&(k[0]=255&A,k[1]=A>>>8&255,r.check=e(r.check,k,2,0)),S=A=0,r.mode=3;case 3:for(;S<32;){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}r.head&&(r.head.time=A),512&r.flags&&(k[0]=255&A,k[1]=A>>>8&255,k[2]=A>>>16&255,k[3]=A>>>24&255,r.check=e(r.check,k,4,0)),S=A=0,r.mode=4;case 4:for(;S<16;){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}r.head&&(r.head.xflags=255&A,r.head.os=A>>8),512&r.flags&&(k[0]=255&A,k[1]=A>>>8&255,r.check=e(r.check,k,2,0)),S=A=0,r.mode=5;case 5:if(1024&r.flags){for(;S<16;){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}r.length=A,r.head&&(r.head.extra_len=A),512&r.flags&&(k[0]=255&A,k[1]=A>>>8&255,r.check=e(r.check,k,2,0)),S=A=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(H<(W=r.length)&&(W=H),W&&(r.head&&(t=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),h.arraySet(r.head.extra,L,M,W,t)),512&r.flags&&(r.check=e(r.check,L,W,M)),H-=W,M+=W,r.length-=W),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(H===0)break t;for(W=0;t=L[M+W++],r.head&&t&&r.length<65536&&(r.head.name+=String.fromCharCode(t)),t&&W<H;);if(512&r.flags&&(r.check=e(r.check,L,W,M)),H-=W,M+=W,t)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(H===0)break t;for(W=0;t=L[M+W++],r.head&&t&&r.length<65536&&(r.head.comment+=String.fromCharCode(t)),t&&W<H;);if(512&r.flags&&(r.check=e(r.check,L,W,M)),H-=W,M+=W,t)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;S<16;){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}if(A!==(65535&r.check)){b.msg="header crc mismatch",r.mode=30;break}S=A=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),b.adler=r.check=0,r.mode=12;break;case 10:for(;S<32;){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}b.adler=r.check=l(A),S=A=0,r.mode=11;case 11:if(r.havedict===0)return b.next_out=ot,b.avail_out=at,b.next_in=M,b.avail_in=H,r.hold=A,r.bits=S,2;b.adler=r.check=1,r.mode=12;case 12:if(N===5||N===6)break t;case 13:if(r.last){A>>>=7&S,S-=7&S,r.mode=27;break}for(;S<3;){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}switch(r.last=1&A,S-=1,3&(A>>>=1)){case 0:r.mode=14;break;case 1:if(K(r),r.mode=20,N!==6)break;A>>>=2,S-=2;break t;case 2:r.mode=17;break;case 3:b.msg="invalid block type",r.mode=30}A>>>=2,S-=2;break;case 14:for(A>>>=7&S,S-=7&S;S<32;){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}if((65535&A)!=(A>>>16^65535)){b.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&A,S=A=0,r.mode=15,N===6)break t;case 15:r.mode=16;case 16:if(W=r.length){if(H<W&&(W=H),at<W&&(W=at),W===0)break t;h.arraySet(st,L,M,W,ot),H-=W,M+=W,at-=W,ot+=W,r.length-=W;break}r.mode=12;break;case 17:for(;S<14;){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}if(r.nlen=257+(31&A),A>>>=5,S-=5,r.ndist=1+(31&A),A>>>=5,S-=5,r.ncode=4+(15&A),A>>>=4,S-=4,286<r.nlen||30<r.ndist){b.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;S<3;){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}r.lens[U[r.have++]]=7&A,A>>>=3,S-=3}for(;r.have<19;)r.lens[U[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,I={bits:r.lenbits},P=p(0,r.lens,0,19,r.lencode,0,r.work,I),r.lenbits=I.bits,P){b.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;pt=(u=r.lencode[A&(1<<r.lenbits)-1])>>>16&255,yt=65535&u,!((tt=u>>>24)<=S);){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}if(yt<16)A>>>=tt,S-=tt,r.lens[r.have++]=yt;else{if(yt===16){for(c=tt+2;S<c;){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}if(A>>>=tt,S-=tt,r.have===0){b.msg="invalid bit length repeat",r.mode=30;break}t=r.lens[r.have-1],W=3+(3&A),A>>>=2,S-=2}else if(yt===17){for(c=tt+3;S<c;){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}S-=tt,t=0,W=3+(7&(A>>>=tt)),A>>>=3,S-=3}else{for(c=tt+7;S<c;){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}S-=tt,t=0,W=11+(127&(A>>>=tt)),A>>>=7,S-=7}if(r.have+W>r.nlen+r.ndist){b.msg="invalid bit length repeat",r.mode=30;break}for(;W--;)r.lens[r.have++]=t}}if(r.mode===30)break;if(r.lens[256]===0){b.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,I={bits:r.lenbits},P=p(g,r.lens,0,r.nlen,r.lencode,0,r.work,I),r.lenbits=I.bits,P){b.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,I={bits:r.distbits},P=p(_,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,I),r.distbits=I.bits,P){b.msg="invalid distances set",r.mode=30;break}if(r.mode=20,N===6)break t;case 20:r.mode=21;case 21:if(6<=H&&258<=at){b.next_out=ot,b.avail_out=at,b.next_in=M,b.avail_in=H,r.hold=A,r.bits=S,o(b,j),ot=b.next_out,st=b.output,at=b.avail_out,M=b.next_in,L=b.input,H=b.avail_in,A=r.hold,S=r.bits,r.mode===12&&(r.back=-1);break}for(r.back=0;pt=(u=r.lencode[A&(1<<r.lenbits)-1])>>>16&255,yt=65535&u,!((tt=u>>>24)<=S);){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}if(pt&&!(240&pt)){for(kt=tt,It=pt,ft=yt;pt=(u=r.lencode[ft+((A&(1<<kt+It)-1)>>kt)])>>>16&255,yt=65535&u,!(kt+(tt=u>>>24)<=S);){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}A>>>=kt,S-=kt,r.back+=kt}if(A>>>=tt,S-=tt,r.back+=tt,r.length=yt,pt===0){r.mode=26;break}if(32&pt){r.back=-1,r.mode=12;break}if(64&pt){b.msg="invalid literal/length code",r.mode=30;break}r.extra=15&pt,r.mode=22;case 22:if(r.extra){for(c=r.extra;S<c;){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}r.length+=A&(1<<r.extra)-1,A>>>=r.extra,S-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;pt=(u=r.distcode[A&(1<<r.distbits)-1])>>>16&255,yt=65535&u,!((tt=u>>>24)<=S);){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}if(!(240&pt)){for(kt=tt,It=pt,ft=yt;pt=(u=r.distcode[ft+((A&(1<<kt+It)-1)>>kt)])>>>16&255,yt=65535&u,!(kt+(tt=u>>>24)<=S);){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}A>>>=kt,S-=kt,r.back+=kt}if(A>>>=tt,S-=tt,r.back+=tt,64&pt){b.msg="invalid distance code",r.mode=30;break}r.offset=yt,r.extra=15&pt,r.mode=24;case 24:if(r.extra){for(c=r.extra;S<c;){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}r.offset+=A&(1<<r.extra)-1,A>>>=r.extra,S-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){b.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(at===0)break t;if(W=j-at,r.offset>W){if((W=r.offset-W)>r.whave&&r.sane){b.msg="invalid distance too far back",r.mode=30;break}gt=W>r.wnext?(W-=r.wnext,r.wsize-W):r.wnext-W,W>r.length&&(W=r.length),wt=r.window}else wt=st,gt=ot-r.offset,W=r.length;for(at<W&&(W=at),at-=W,r.length-=W;st[ot++]=wt[gt++],--W;);r.length===0&&(r.mode=21);break;case 26:if(at===0)break t;st[ot++]=r.length,at--,r.mode=21;break;case 27:if(r.wrap){for(;S<32;){if(H===0)break t;H--,A|=L[M++]<<S,S+=8}if(j-=at,b.total_out+=j,r.total+=j,j&&(b.adler=r.check=r.flags?e(r.check,st,j,ot-j):s(r.check,st,j,ot-j)),j=at,(r.flags?A:l(A))!==r.check){b.msg="incorrect data check",r.mode=30;break}S=A=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;S<32;){if(H===0)break t;H--,A+=L[M++]<<S,S+=8}if(A!==(4294967295&r.total)){b.msg="incorrect length check",r.mode=30;break}S=A=0}r.mode=29;case 29:P=1;break t;case 30:P=-3;break t;case 31:return-4;case 32:default:return a}return b.next_out=ot,b.avail_out=at,b.next_in=M,b.avail_in=H,r.hold=A,r.bits=S,(r.wsize||j!==b.avail_out&&r.mode<30&&(r.mode<27||N!==4))&&$(b,b.output,b.next_out,j-b.avail_out)?(r.mode=31,-4):(rt-=b.avail_in,j-=b.avail_out,b.total_in+=rt,b.total_out+=j,r.total+=j,r.wrap&&j&&(b.adler=r.check=r.flags?e(r.check,st,j,b.next_out-j):s(r.check,st,j,b.next_out-j)),b.data_type=r.bits+(r.last?64:0)+(r.mode===12?128:0)+(r.mode===20||r.mode===15?256:0),(rt==0&&j===0||N===4)&&P===v&&(P=-5),P)},w.inflateEnd=function(b){if(!b||!b.state)return a;var N=b.state;return N.window&&(N.window=null),b.state=null,v},w.inflateGetHeader=function(b,N){var r;return b&&b.state&&2&(r=b.state).wrap?((r.head=N).done=!1,v):a},w.inflateSetDictionary=function(b,N){var r,L=N.length;return b&&b.state?(r=b.state).wrap!==0&&r.mode!==11?a:r.mode===11&&s(1,N,L,0)!==r.check?-3:$(b,N,L,L)?(r.mode=31,-4):(r.havedict=1,v):a},w.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(i,z,w){var h=i("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],e=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];z.exports=function(g,_,v,a,m,n,f,l){var d,y,C,x,R,D,Z,O,K,$=l.bits,b=0,N=0,r=0,L=0,st=0,M=0,ot=0,H=0,at=0,A=0,S=null,rt=0,j=new h.Buf16(16),W=new h.Buf16(16),gt=null,wt=0;for(b=0;b<=15;b++)j[b]=0;for(N=0;N<a;N++)j[_[v+N]]++;for(st=$,L=15;1<=L&&j[L]===0;L--);if(L<st&&(st=L),L===0)return m[n++]=20971520,m[n++]=20971520,l.bits=1,0;for(r=1;r<L&&j[r]===0;r++);for(st<r&&(st=r),b=H=1;b<=15;b++)if(H<<=1,(H-=j[b])<0)return-1;if(0<H&&(g===0||L!==1))return-1;for(W[1]=0,b=1;b<15;b++)W[b+1]=W[b]+j[b];for(N=0;N<a;N++)_[v+N]!==0&&(f[W[_[v+N]]++]=N);if(D=g===0?(S=gt=f,19):g===1?(S=s,rt-=257,gt=e,wt-=257,256):(S=o,gt=p,-1),b=r,R=n,ot=N=A=0,C=-1,x=(at=1<<(M=st))-1,g===1&&852<at||g===2&&592<at)return 1;for(;;){for(Z=b-ot,K=f[N]<D?(O=0,f[N]):f[N]>D?(O=gt[wt+f[N]],S[rt+f[N]]):(O=96,0),d=1<<b-ot,r=y=1<<M;m[R+(A>>ot)+(y-=d)]=Z<<24|O<<16|K|0,y!==0;);for(d=1<<b-1;A&d;)d>>=1;if(d!==0?(A&=d-1,A+=d):A=0,N++,--j[b]==0){if(b===L)break;b=_[v+f[N]]}if(st<b&&(A&x)!==C){for(ot===0&&(ot=st),R+=r,H=1<<(M=b-ot);M+ot<L&&!((H-=j[M+ot])<=0);)M++,H<<=1;if(at+=1<<M,g===1&&852<at||g===2&&592<at)return 1;m[C=A&x]=st<<24|M<<16|R-n|0}}return A!==0&&(m[R+A]=b-ot<<24|64<<16|0),l.bits=st,0}},{"../utils/common":41}],51:[function(i,z,w){z.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(i,z,w){var h=i("../utils/common"),s=0,e=1;function o(u){for(var k=u.length;0<=--k;)u[k]=0}var p=0,g=29,_=256,v=_+1+g,a=30,m=19,n=2*v+1,f=15,l=16,d=7,y=256,C=16,x=17,R=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$=new Array(2*(v+2));o($);var b=new Array(2*a);o(b);var N=new Array(512);o(N);var r=new Array(256);o(r);var L=new Array(g);o(L);var st,M,ot,H=new Array(a);function at(u,k,U,F,E){this.static_tree=u,this.extra_bits=k,this.extra_base=U,this.elems=F,this.max_length=E,this.has_stree=u&&u.length}function A(u,k){this.dyn_tree=u,this.max_code=0,this.stat_desc=k}function S(u){return u<256?N[u]:N[256+(u>>>7)]}function rt(u,k){u.pending_buf[u.pending++]=255&k,u.pending_buf[u.pending++]=k>>>8&255}function j(u,k,U){u.bi_valid>l-U?(u.bi_buf|=k<<u.bi_valid&65535,rt(u,u.bi_buf),u.bi_buf=k>>l-u.bi_valid,u.bi_valid+=U-l):(u.bi_buf|=k<<u.bi_valid&65535,u.bi_valid+=U)}function W(u,k,U){j(u,U[2*k],U[2*k+1])}function gt(u,k){for(var U=0;U|=1&u,u>>>=1,U<<=1,0<--k;);return U>>>1}function wt(u,k,U){var F,E,V=new Array(f+1),q=0;for(F=1;F<=f;F++)V[F]=q=q+U[F-1]<<1;for(E=0;E<=k;E++){var G=u[2*E+1];G!==0&&(u[2*E]=gt(V[G]++,G))}}function tt(u){var k;for(k=0;k<v;k++)u.dyn_ltree[2*k]=0;for(k=0;k<a;k++)u.dyn_dtree[2*k]=0;for(k=0;k<m;k++)u.bl_tree[2*k]=0;u.dyn_ltree[2*y]=1,u.opt_len=u.static_len=0,u.last_lit=u.matches=0}function pt(u){8<u.bi_valid?rt(u,u.bi_buf):0<u.bi_valid&&(u.pending_buf[u.pending++]=u.bi_buf),u.bi_buf=0,u.bi_valid=0}function yt(u,k,U,F){var E=2*k,V=2*U;return u[E]<u[V]||u[E]===u[V]&&F[k]<=F[U]}function kt(u,k,U){for(var F=u.heap[U],E=U<<1;E<=u.heap_len&&(E<u.heap_len&&yt(k,u.heap[E+1],u.heap[E],u.depth)&&E++,!yt(k,F,u.heap[E],u.depth));)u.heap[U]=u.heap[E],U=E,E<<=1;u.heap[U]=F}function It(u,k,U){var F,E,V,q,G=0;if(u.last_lit!==0)for(;F=u.pending_buf[u.d_buf+2*G]<<8|u.pending_buf[u.d_buf+2*G+1],E=u.pending_buf[u.l_buf+G],G++,F===0?W(u,E,k):(W(u,(V=r[E])+_+1,k),(q=D[V])!==0&&j(u,E-=L[V],q),W(u,V=S(--F),U),(q=Z[V])!==0&&j(u,F-=H[V],q)),G<u.last_lit;);W(u,y,k)}function ft(u,k){var U,F,E,V=k.dyn_tree,q=k.stat_desc.static_tree,G=k.stat_desc.has_stree,et=k.stat_desc.elems,ct=-1;for(u.heap_len=0,u.heap_max=n,U=0;U<et;U++)V[2*U]!==0?(u.heap[++u.heap_len]=ct=U,u.depth[U]=0):V[2*U+1]=0;for(;u.heap_len<2;)V[2*(E=u.heap[++u.heap_len]=ct<2?++ct:0)]=1,u.depth[E]=0,u.opt_len--,G&&(u.static_len-=q[2*E+1]);for(k.max_code=ct,U=u.heap_len>>1;1<=U;U--)kt(u,V,U);for(E=et;U=u.heap[1],u.heap[1]=u.heap[u.heap_len--],kt(u,V,1),F=u.heap[1],u.heap[--u.heap_max]=U,u.heap[--u.heap_max]=F,V[2*E]=V[2*U]+V[2*F],u.depth[E]=(u.depth[U]>=u.depth[F]?u.depth[U]:u.depth[F])+1,V[2*U+1]=V[2*F+1]=E,u.heap[1]=E++,kt(u,V,1),2<=u.heap_len;);u.heap[--u.heap_max]=u.heap[1],function(dt,Ct){var re,Bt,Dt,Et,ne,zt,St=Ct.dyn_tree,Le=Ct.max_code,jt=Ct.stat_desc.static_tree,We=Ct.stat_desc.has_stree,Mt=Ct.stat_desc.extra_bits,Ue=Ct.stat_desc.extra_base,Yt=Ct.stat_desc.max_length,Rt=0;for(Et=0;Et<=f;Et++)dt.bl_count[Et]=0;for(St[2*dt.heap[dt.heap_max]+1]=0,re=dt.heap_max+1;re<n;re++)Yt<(Et=St[2*St[2*(Bt=dt.heap[re])+1]+1]+1)&&(Et=Yt,Rt++),St[2*Bt+1]=Et,Le<Bt||(dt.bl_count[Et]++,ne=0,Ue<=Bt&&(ne=Mt[Bt-Ue]),zt=St[2*Bt],dt.opt_len+=zt*(Et+ne),We&&(dt.static_len+=zt*(jt[2*Bt+1]+ne)));if(Rt!==0){do{for(Et=Yt-1;dt.bl_count[Et]===0;)Et--;dt.bl_count[Et]--,dt.bl_count[Et+1]+=2,dt.bl_count[Yt]--,Rt-=2}while(0<Rt);for(Et=Yt;Et!==0;Et--)for(Bt=dt.bl_count[Et];Bt!==0;)Le<(Dt=dt.heap[--re])||(St[2*Dt+1]!==Et&&(dt.opt_len+=(Et-St[2*Dt+1])*St[2*Dt],St[2*Dt+1]=Et),Bt--)}}(u,k),wt(V,ct,u.bl_count)}function t(u,k,U){var F,E,V=-1,q=k[1],G=0,et=7,ct=4;for(q===0&&(et=138,ct=3),k[2*(U+1)+1]=65535,F=0;F<=U;F++)E=q,q=k[2*(F+1)+1],++G<et&&E===q||(G<ct?u.bl_tree[2*E]+=G:E!==0?(E!==V&&u.bl_tree[2*E]++,u.bl_tree[2*C]++):G<=10?u.bl_tree[2*x]++:u.bl_tree[2*R]++,V=E,ct=(G=0)===q?(et=138,3):E===q?(et=6,3):(et=7,4))}function P(u,k,U){var F,E,V=-1,q=k[1],G=0,et=7,ct=4;for(q===0&&(et=138,ct=3),F=0;F<=U;F++)if(E=q,q=k[2*(F+1)+1],!(++G<et&&E===q)){if(G<ct)for(;W(u,E,u.bl_tree),--G!=0;);else E!==0?(E!==V&&(W(u,E,u.bl_tree),G--),W(u,C,u.bl_tree),j(u,G-3,2)):G<=10?(W(u,x,u.bl_tree),j(u,G-3,3)):(W(u,R,u.bl_tree),j(u,G-11,7));V=E,ct=(G=0)===q?(et=138,3):E===q?(et=6,3):(et=7,4)}}o(H);var I=!1;function c(u,k,U,F){j(u,(p<<1)+(F?1:0),3),function(E,V,q,G){pt(E),rt(E,q),rt(E,~q),h.arraySet(E.pending_buf,E.window,V,q,E.pending),E.pending+=q}(u,k,U)}w._tr_init=function(u){I||(function(){var k,U,F,E,V,q=new Array(f+1);for(E=F=0;E<g-1;E++)for(L[E]=F,k=0;k<1<<D[E];k++)r[F++]=E;for(r[F-1]=E,E=V=0;E<16;E++)for(H[E]=V,k=0;k<1<<Z[E];k++)N[V++]=E;for(V>>=7;E<a;E++)for(H[E]=V<<7,k=0;k<1<<Z[E]-7;k++)N[256+V++]=E;for(U=0;U<=f;U++)q[U]=0;for(k=0;k<=143;)$[2*k+1]=8,k++,q[8]++;for(;k<=255;)$[2*k+1]=9,k++,q[9]++;for(;k<=279;)$[2*k+1]=7,k++,q[7]++;for(;k<=287;)$[2*k+1]=8,k++,q[8]++;for(wt($,v+1,q),k=0;k<a;k++)b[2*k+1]=5,b[2*k]=gt(k,5);st=new at($,D,_+1,v,f),M=new at(b,Z,0,a,f),ot=new at(new Array(0),O,0,m,d)}(),I=!0),u.l_desc=new A(u.dyn_ltree,st),u.d_desc=new A(u.dyn_dtree,M),u.bl_desc=new A(u.bl_tree,ot),u.bi_buf=0,u.bi_valid=0,tt(u)},w._tr_stored_block=c,w._tr_flush_block=function(u,k,U,F){var E,V,q=0;0<u.level?(u.strm.data_type===2&&(u.strm.data_type=function(G){var et,ct=4093624447;for(et=0;et<=31;et++,ct>>>=1)if(1&ct&&G.dyn_ltree[2*et]!==0)return s;if(G.dyn_ltree[18]!==0||G.dyn_ltree[20]!==0||G.dyn_ltree[26]!==0)return e;for(et=32;et<_;et++)if(G.dyn_ltree[2*et]!==0)return e;return s}(u)),ft(u,u.l_desc),ft(u,u.d_desc),q=function(G){var et;for(t(G,G.dyn_ltree,G.l_desc.max_code),t(G,G.dyn_dtree,G.d_desc.max_code),ft(G,G.bl_desc),et=m-1;3<=et&&G.bl_tree[2*K[et]+1]===0;et--);return G.opt_len+=3*(et+1)+5+5+4,et}(u),E=u.opt_len+3+7>>>3,(V=u.static_len+3+7>>>3)<=E&&(E=V)):E=V=U+5,U+4<=E&&k!==-1?c(u,k,U,F):u.strategy===4||V===E?(j(u,2+(F?1:0),3),It(u,$,b)):(j(u,4+(F?1:0),3),function(G,et,ct,dt){var Ct;for(j(G,et-257,5),j(G,ct-1,5),j(G,dt-4,4),Ct=0;Ct<dt;Ct++)j(G,G.bl_tree[2*K[Ct]+1],3);P(G,G.dyn_ltree,et-1),P(G,G.dyn_dtree,ct-1)}(u,u.l_desc.max_code+1,u.d_desc.max_code+1,q+1),It(u,u.dyn_ltree,u.dyn_dtree)),tt(u),F&&pt(u)},w._tr_tally=function(u,k,U){return u.pending_buf[u.d_buf+2*u.last_lit]=k>>>8&255,u.pending_buf[u.d_buf+2*u.last_lit+1]=255&k,u.pending_buf[u.l_buf+u.last_lit]=255&U,u.last_lit++,k===0?u.dyn_ltree[2*U]++:(u.matches++,k--,u.dyn_ltree[2*(r[U]+_+1)]++,u.dyn_dtree[2*S(k)]++),u.last_lit===u.lit_bufsize-1},w._tr_align=function(u){j(u,2,3),W(u,y,$),function(k){k.bi_valid===16?(rt(k,k.bi_buf),k.bi_buf=0,k.bi_valid=0):8<=k.bi_valid&&(k.pending_buf[k.pending++]=255&k.bi_buf,k.bi_buf>>=8,k.bi_valid-=8)}(u)}},{"../utils/common":41}],53:[function(i,z,w){z.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(i,z,w){(function(h){(function(s,e){if(!s.setImmediate){var o,p,g,_,v=1,a={},m=!1,n=s.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(s);f=f&&f.setTimeout?f:s,o={}.toString.call(s.process)==="[object process]"?function(C){process.nextTick(function(){d(C)})}:function(){if(s.postMessage&&!s.importScripts){var C=!0,x=s.onmessage;return s.onmessage=function(){C=!1},s.postMessage("","*"),s.onmessage=x,C}}()?(_="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",y,!1):s.attachEvent("onmessage",y),function(C){s.postMessage(_+C,"*")}):s.MessageChannel?((g=new MessageChannel).port1.onmessage=function(C){d(C.data)},function(C){g.port2.postMessage(C)}):n&&"onreadystatechange"in n.createElement("script")?(p=n.documentElement,function(C){var x=n.createElement("script");x.onreadystatechange=function(){d(C),x.onreadystatechange=null,p.removeChild(x),x=null},p.appendChild(x)}):function(C){setTimeout(d,0,C)},f.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var x=new Array(arguments.length-1),R=0;R<x.length;R++)x[R]=arguments[R+1];var D={callback:C,args:x};return a[v]=D,o(v),v++},f.clearImmediate=l}function l(C){delete a[C]}function d(C){if(m)setTimeout(d,0,C);else{var x=a[C];if(x){m=!0;try{(function(R){var D=R.callback,Z=R.args;switch(Z.length){case 0:D();break;case 1:D(Z[0]);break;case 2:D(Z[0],Z[1]);break;case 3:D(Z[0],Z[1],Z[2]);break;default:D.apply(e,Z)}})(x)}finally{l(C),m=!1}}}}function y(C){C.source===s&&typeof C.data=="string"&&C.data.indexOf(_)===0&&d(+C.data.slice(_.length))}})(typeof self>"u"?h===void 0?this:h:self)}).call(this,typeof hr<"u"?hr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(bn);var An=bn.exports;const On=zn(An),wn={A0:[841,1189],A1:[594,841],A2:[420,594],A3:[297,420],A4:[210,297],A5:[148,210],A6:[105,148]},Gr=(B,Q)=>Math.round(B*Q);function Tn({din:B,width_cm:Q,height_cm:i}){return Q&&i?[Q*10,i*10]:B?wn[B]:[210,297]}function Bn(B,Q,i,z){const w=document.createElement("canvas");w.width=Q,w.height=i;const h=w.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,Q,i);const s=B.naturalWidth,e=B.naturalHeight,o=s/e,p=Q/i;if(z==="stretch")h.drawImage(B,0,0,Q,i);else if(z==="fit"){let g=Q,_=Math.round(Q/o);_>i&&(_=i,g=Math.round(i*o));const v=Math.floor((Q-g)/2),a=Math.floor((i-_)/2);h.drawImage(B,v,a,g,_)}else{let g=s,_=Math.round(s/p);_>e&&(_=e,g=Math.round(e*p));const v=Math.floor((s-g)/2),a=Math.floor((e-_)/2);h.drawImage(B,v,a,g,_,0,0,Q,i)}return w}function Dn(B){const Q=Math.ceil(Math.sqrt(B.width*B.width+B.height*B.height)),i=document.createElement("canvas");i.width=Q,i.height=Q;const z=i.getContext("2d");return z.fillStyle="#fff",z.fillRect(0,0,Q,Q),z.translate(Q/2,Q/2),z.rotate(Math.PI/4),z.drawImage(B,-B.width/2,-B.height/2),i}function Rn(B,Q="image/png",i){return new Promise(z=>B.toBlob(w=>z(w),Q,i))}async function Pn(B,{pause:Q=!0,cut:i=!0,vendorIdHex:z="",productIdHex:w="",iface:h=0,endpoint:s=1,align:e="left"}={}){if(!("usb"in navigator))throw new Error("WebUSB not supported");const o=[];if(z){const v=parseInt(z,16);if(Number.isFinite(v)){const a=w?parseInt(w,16):void 0;o.push(a?{vendorId:v,productId:a}:{vendorId:v})}}const p=await navigator.usb.requestDevice({filters:o.length?o:[{}]});await p.open(),p.configuration==null&&await p.selectConfiguration(1),await p.claimInterface(h);const g=v=>p.transferOut(s,new Uint8Array(v));await g([27,64]),await g([27,97,{left:0,center:1,right:2}[e]??0]);for(let v=0;v<B.length;v++){const a=B[v],m=Math.ceil(a.width/8),n=new Uint8Array(m*a.height);for(let R=0;R<a.height;R++)for(let D=0;D<a.width;D++){const Z=(R*a.width+D)*4,O=a.data[Z]<128?1:0,K=R*m+(D>>3),$=7-(D&7);n[K]|=O<<$}const f=0,l=m&255,d=m>>8&255,y=a.height&255,C=a.height>>8&255;await g([29,118,48,f,l,d,y,C]);const x=16384;for(let R=0;R<n.length;R+=x)await p.transferOut(s,n.subarray(R,Math.min(R+x,n.length)));if(await g([27,100,2]),Q&&v<B.length-1&&!confirm(`Strip ${v+1}/${B.length} printed. Continue?`))break}i&&await g([29,86,0])}function pn(B,Q,i){const z=B.slice();return z[37]=Q[i],z}function mn(B,Q,i){const z=B.slice();return z[40]=Q[i],z}function _n(B){let Q,i=B[40]+"",z;return{c(){Q=X("option"),z=Ft(i),this.h()},l(w){Q=Y(w,"OPTION",{});var h=mt(Q);z=Ut(h,i),h.forEach(ht),this.h()},h(){Q.__value=B[40],bt(Q,Q.__value)},m(w,h){De(w,Q,h),T(Q,z)},p:dr,d(w){w&&ht(Q)}}}function Nn(B){let Q,i="Loading default image or choose a file.";return{c(){Q=X("p"),Q.textContent=i,this.h()},l(z){Q=Y(z,"P",{class:!0,"data-svelte-h":!0}),_t(Q)!=="svelte-1v7zxrp"&&(Q.textContent=i),this.h()},h(){J(Q,"class","muted svelte-1vl5lug")},m(z,w){De(z,Q,w)},p:dr,d(z){z&&ht(Q)}}}function Ln(B){let Q,i="Strips",z,w,h=pr(B[4]),s=[];for(let e=0;e<h.length;e+=1)s[e]=vn(pn(B,h,e));return{c(){Q=X("h3"),Q.textContent=i,z=ut(),w=X("div");for(let e=0;e<s.length;e+=1)s[e].c();this.h()},l(e){Q=Y(e,"H3",{style:!0,"data-svelte-h":!0}),_t(Q)!=="svelte-2qujsl"&&(Q.textContent=i),z=lt(e),w=Y(e,"DIV",{class:!0});var o=mt(w);for(let p=0;p<s.length;p+=1)s[p].l(o);o.forEach(ht),this.h()},h(){Ot(Q,"margin-top","0"),J(w,"class","strips svelte-1vl5lug")},m(e,o){De(e,Q,o),De(e,z,o),De(e,w,o);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(w,null)},p(e,o){if(o[0]&16){h=pr(e[4]);let p;for(p=0;p<h.length;p+=1){const g=pn(e,h,p);s[p]?s[p].p(g,o):(s[p]=vn(g),s[p].c(),s[p].m(w,null))}for(;p<s.length;p+=1)s[p].d(1);s.length=h.length}},d(e){e&&(ht(Q),ht(z),ht(w)),gn(s,e)}}}function vn(B){let Q,i,z,w,h,s,e=B[37].name+"",o,p,g=B[37].canvas.width+"",_,v,a=B[37].canvas.height+"",m,n,f;return{c(){Q=X("div"),i=X("img"),h=ut(),s=X("div"),o=Ft(e),p=Ft("  "),_=Ft(g),v=Ft(""),m=Ft(a),n=Ft("px"),f=ut(),this.h()},l(l){Q=Y(l,"DIV",{class:!0});var d=mt(Q);i=Y(d,"IMG",{src:!0,alt:!0,class:!0}),h=lt(d),s=Y(d,"DIV",{class:!0});var y=mt(s);o=Ut(y,e),p=Ut(y,"  "),_=Ut(y,g),v=Ut(y,""),m=Ut(y,a),n=Ut(y,"px"),y.forEach(ht),f=lt(d),d.forEach(ht),this.h()},h(){dn(i.src,z=B[37].canvas.toDataURL())||J(i,"src",z),J(i,"alt",w=B[37].name),J(i,"class","svelte-1vl5lug"),J(s,"class","muted svelte-1vl5lug"),J(Q,"class","stripItem svelte-1vl5lug")},m(l,d){De(l,Q,d),T(Q,i),T(Q,h),T(Q,s),T(s,o),T(s,p),T(s,_),T(s,v),T(s,m),T(s,n),T(Q,f)},p(l,d){d[0]&16&&!dn(i.src,z=l[37].canvas.toDataURL())&&J(i,"src",z),d[0]&16&&w!==(w=l[37].name)&&J(i,"alt",w),d[0]&16&&e!==(e=l[37].name+"")&&fr(o,e),d[0]&16&&g!==(g=l[37].canvas.width+"")&&fr(_,g),d[0]&16&&a!==(a=l[37].canvas.height+"")&&fr(m,a)},d(l){l&&ht(Q)}}}function Un(B){let Q,i,z,w="Tesselate",h,s,e=`Tesselate splits images into printable strips for thermal receipt
      printers, supporting all DIN formats (A0A6) and custom banner sizes. Its
      ideal for large-format or experimental printing with standard receipt
      printers, roll printers, and thermal printers.
      <br/> <br/> Drop an image or use the default`,o,p,g,_,v,a="Browse",m,n,f="DIN",l,d,y,C,x,R,D="Custom Width (cm)",Z,O,K,$,b,N="Custom Height (cm)",r,L,st,M,ot,H,at="Strip (mm)",A,S,rt,j,W,gt="Dots/mm",wt,tt,pt,yt,kt="Mode",It,ft,t,P="fit",I,c="fill",u,k="stretch",U,F,E="Direction",V,q,G,et="vertical",ct,dt="horizontal",Ct,re="diagonal",Bt,Dt,Et="Dither",ne,zt,St,Le="floyd",jt,We="halftone",Mt,Ue="none",Yt,Rt,ie,ge,Kr="Halftone cell",mr,Wt,_r,ae,be,qr="Printer max width (px)",vr,Zt,gr,we,ye,Xt,br,wr,Pt,se,Yr="Download ZIP",yr,oe,Xr="Print Sheets",kr,le,Jr="Print via WebUSB",xr,ke,Fe=(B[5]?"Working":B[1])+"",Ze,Cr,Nt,xe,Qr="Printer",Er,ue,he,Ce,$r="Vendor ID (hex)",Sr,Jt,Ir,ce,Ee,tn="Product ID (hex)",zr,Qt,Ar,fe,de,Se,en="Interface",Or,Vt,Tr,pe,Ie,rn="Endpoint",Br,Gt,Dr,Kt,ze,Rr,Lt,$t,nn="left",te,an="center",ee,sn="right",Pr,Ae,me,Nr,Lr,Oe,_e,Ur,Fr,Te,jr,on,Re=pr(B[6]),At=[];for(let it=0;it<Re.length;it+=1)At[it]=_n(mn(B,Re,it));function ln(it,xt){return it[4].length?Ln:Nn}let He=ln(B),Ht=He(B);return{c(){Q=X("div"),i=X("div"),z=X("h2"),z.textContent=w,h=ut(),s=X("p"),s.innerHTML=e,o=ut(),p=X("div"),g=X("input"),_=ut(),v=X("button"),v.textContent=a,m=ut(),n=X("label"),n.textContent=f,l=ut(),d=X("select");for(let it=0;it<At.length;it+=1)At[it].c();y=ut(),C=X("div"),x=X("div"),R=X("label"),R.textContent=D,Z=ut(),O=X("input"),K=ut(),$=X("div"),b=X("label"),b.textContent=N,r=ut(),L=X("input"),st=ut(),M=X("div"),ot=X("div"),H=X("label"),H.textContent=at,A=ut(),S=X("input"),rt=ut(),j=X("div"),W=X("label"),W.textContent=gt,wt=ut(),tt=X("input"),pt=ut(),yt=X("label"),yt.textContent=kt,It=ut(),ft=X("select"),t=X("option"),t.textContent=P,I=X("option"),I.textContent=c,u=X("option"),u.textContent=k,U=ut(),F=X("label"),F.textContent=E,V=ut(),q=X("select"),G=X("option"),G.textContent=et,ct=X("option"),ct.textContent=dt,Ct=X("option"),Ct.textContent=re,Bt=ut(),Dt=X("label"),Dt.textContent=Et,ne=ut(),zt=X("select"),St=X("option"),St.textContent=Le,jt=X("option"),jt.textContent=We,Mt=X("option"),Mt.textContent=Ue,Yt=ut(),Rt=X("div"),ie=X("div"),ge=X("label"),ge.textContent=Kr,mr=ut(),Wt=X("input"),_r=ut(),ae=X("div"),be=X("label"),be.textContent=qr,vr=ut(),Zt=X("input"),gr=ut(),we=X("div"),ye=X("label"),Xt=X("input"),br=Ft(" Invert"),wr=ut(),Pt=X("div"),se=X("button"),se.textContent=Yr,yr=ut(),oe=X("button"),oe.textContent=Xr,kr=ut(),le=X("button"),le.textContent=Jr,xr=ut(),ke=X("p"),Ze=Ft(Fe),Cr=ut(),Nt=X("div"),xe=X("h3"),xe.textContent=Qr,Er=ut(),ue=X("div"),he=X("div"),Ce=X("label"),Ce.textContent=$r,Sr=ut(),Jt=X("input"),Ir=ut(),ce=X("div"),Ee=X("label"),Ee.textContent=tn,zr=ut(),Qt=X("input"),Ar=ut(),fe=X("div"),de=X("div"),Se=X("label"),Se.textContent=en,Or=ut(),Vt=X("input"),Tr=ut(),pe=X("div"),Ie=X("label"),Ie.textContent=rn,Br=ut(),Gt=X("input"),Dr=ut(),Kt=X("div"),ze=X("label"),Rr=Ft(`Align
          `),Lt=X("select"),$t=X("option"),$t.textContent=nn,te=X("option"),te.textContent=an,ee=X("option"),ee.textContent=sn,Pr=ut(),Ae=X("label"),me=X("input"),Nr=Ft(" Pause"),Lr=ut(),Oe=X("label"),_e=X("input"),Ur=Ft(" Cut"),Fr=ut(),Te=X("div"),Ht.c(),this.h()},l(it){Q=Y(it,"DIV",{class:!0});var xt=mt(Q);i=Y(xt,"DIV",{class:!0});var nt=mt(i);z=Y(nt,"H2",{style:!0,"data-svelte-h":!0}),_t(z)!=="svelte-1iave8w"&&(z.textContent=w),h=lt(nt),s=Y(nt,"P",{"data-svelte-h":!0}),_t(s)!=="svelte-1m004yk"&&(s.innerHTML=e),o=lt(nt),p=Y(nt,"DIV",{class:!0});var Be=mt(p);g=Y(Be,"INPUT",{type:!0,accept:!0,class:!0}),_=lt(Be),v=Y(Be,"BUTTON",{class:!0,"data-svelte-h":!0}),_t(v)!=="svelte-1kyz42r"&&(v.textContent=a),Be.forEach(ht),m=lt(nt),n=Y(nt,"LABEL",{class:!0,"data-svelte-h":!0}),_t(n)!=="svelte-qwiy2r"&&(n.textContent=f),l=lt(nt),d=Y(nt,"SELECT",{class:!0});var un=mt(d);for(let Vr=0;Vr<At.length;Vr+=1)At[Vr].l(un);un.forEach(ht),y=lt(nt),C=Y(nt,"DIV",{class:!0});var Ve=mt(C);x=Y(Ve,"DIV",{style:!0});var Ge=mt(x);R=Y(Ge,"LABEL",{class:!0,"data-svelte-h":!0}),_t(R)!=="svelte-13h7zre"&&(R.textContent=D),Z=lt(Ge),O=Y(Ge,"INPUT",{type:!0,step:!0,class:!0}),Ge.forEach(ht),K=lt(Ve),$=Y(Ve,"DIV",{style:!0});var Ke=mt($);b=Y(Ke,"LABEL",{class:!0,"data-svelte-h":!0}),_t(b)!=="svelte-1aydr0b"&&(b.textContent=N),r=lt(Ke),L=Y(Ke,"INPUT",{type:!0,step:!0,class:!0}),Ke.forEach(ht),Ve.forEach(ht),st=lt(nt),M=Y(nt,"DIV",{class:!0});var qe=mt(M);ot=Y(qe,"DIV",{style:!0});var Ye=mt(ot);H=Y(Ye,"LABEL",{class:!0,"data-svelte-h":!0}),_t(H)!=="svelte-1bko2kh"&&(H.textContent=at),A=lt(Ye),S=Y(Ye,"INPUT",{type:!0,step:!0,class:!0}),Ye.forEach(ht),rt=lt(qe),j=Y(qe,"DIV",{style:!0});var Xe=mt(j);W=Y(Xe,"LABEL",{class:!0,"data-svelte-h":!0}),_t(W)!=="svelte-1ciqefv"&&(W.textContent=gt),wt=lt(Xe),tt=Y(Xe,"INPUT",{type:!0,step:!0,class:!0}),Xe.forEach(ht),qe.forEach(ht),pt=lt(nt),yt=Y(nt,"LABEL",{class:!0,"data-svelte-h":!0}),_t(yt)!=="svelte-16wpful"&&(yt.textContent=kt),It=lt(nt),ft=Y(nt,"SELECT",{class:!0});var Je=mt(ft);t=Y(Je,"OPTION",{"data-svelte-h":!0}),_t(t)!=="svelte-1ox0qsw"&&(t.textContent=P),I=Y(Je,"OPTION",{"data-svelte-h":!0}),_t(I)!=="svelte-ojnp86"&&(I.textContent=c),u=Y(Je,"OPTION",{"data-svelte-h":!0}),_t(u)!=="svelte-19g2w9o"&&(u.textContent=k),Je.forEach(ht),U=lt(nt),F=Y(nt,"LABEL",{class:!0,"data-svelte-h":!0}),_t(F)!=="svelte-1k63le1"&&(F.textContent=E),V=lt(nt),q=Y(nt,"SELECT",{class:!0});var Qe=mt(q);G=Y(Qe,"OPTION",{"data-svelte-h":!0}),_t(G)!=="svelte-lztc1q"&&(G.textContent=et),ct=Y(Qe,"OPTION",{"data-svelte-h":!0}),_t(ct)!=="svelte-4ixlgm"&&(ct.textContent=dt),Ct=Y(Qe,"OPTION",{"data-svelte-h":!0}),_t(Ct)!=="svelte-1j2ut9m"&&(Ct.textContent=re),Qe.forEach(ht),Bt=lt(nt),Dt=Y(nt,"LABEL",{class:!0,"data-svelte-h":!0}),_t(Dt)!=="svelte-1b6xat8"&&(Dt.textContent=Et),ne=lt(nt),zt=Y(nt,"SELECT",{class:!0});var $e=mt(zt);St=Y($e,"OPTION",{"data-svelte-h":!0}),_t(St)!=="svelte-dxg5ae"&&(St.textContent=Le),jt=Y($e,"OPTION",{"data-svelte-h":!0}),_t(jt)!=="svelte-hdobsm"&&(jt.textContent=We),Mt=Y($e,"OPTION",{"data-svelte-h":!0}),_t(Mt)!=="svelte-8dsaj2"&&(Mt.textContent=Ue),$e.forEach(ht),Yt=lt(nt),Rt=Y(nt,"DIV",{class:!0});var tr=mt(Rt);ie=Y(tr,"DIV",{style:!0});var er=mt(ie);ge=Y(er,"LABEL",{class:!0,"data-svelte-h":!0}),_t(ge)!=="svelte-1r22cu7"&&(ge.textContent=Kr),mr=lt(er),Wt=Y(er,"INPUT",{type:!0,step:!0,class:!0}),er.forEach(ht),_r=lt(tr),ae=Y(tr,"DIV",{style:!0});var rr=mt(ae);be=Y(rr,"LABEL",{class:!0,"data-svelte-h":!0}),_t(be)!=="svelte-brceij"&&(be.textContent=qr),vr=lt(rr),Zt=Y(rr,"INPUT",{type:!0,step:!0,class:!0}),rr.forEach(ht),tr.forEach(ht),gr=lt(nt),we=Y(nt,"DIV",{class:!0,style:!0});var hn=mt(we);ye=Y(hn,"LABEL",{class:!0});var Mr=mt(ye);Xt=Y(Mr,"INPUT",{type:!0,class:!0}),br=Ut(Mr," Invert"),Mr.forEach(ht),hn.forEach(ht),wr=lt(nt),Pt=Y(nt,"DIV",{class:!0,style:!0});var Pe=mt(Pt);se=Y(Pe,"BUTTON",{class:!0,"data-svelte-h":!0}),_t(se)!=="svelte-1too1c6"&&(se.textContent=Yr),yr=lt(Pe),oe=Y(Pe,"BUTTON",{class:!0,"data-svelte-h":!0}),_t(oe)!=="svelte-gajl1g"&&(oe.textContent=Xr),kr=lt(Pe),le=Y(Pe,"BUTTON",{class:!0,"data-svelte-h":!0}),_t(le)!=="svelte-12psuyd"&&(le.textContent=Jr),Pe.forEach(ht),xr=lt(nt),ke=Y(nt,"P",{class:!0,style:!0});var cn=mt(ke);Ze=Ut(cn,Fe),cn.forEach(ht),Cr=lt(nt),Nt=Y(nt,"DIV",{class:!0});var ve=mt(Nt);xe=Y(ve,"H3",{style:!0,"data-svelte-h":!0}),_t(xe)!=="svelte-7nfo8s"&&(xe.textContent=Qr),Er=lt(ve),ue=Y(ve,"DIV",{class:!0});var nr=mt(ue);he=Y(nr,"DIV",{style:!0});var ir=mt(he);Ce=Y(ir,"LABEL",{class:!0,"data-svelte-h":!0}),_t(Ce)!=="svelte-nfk8vb"&&(Ce.textContent=$r),Sr=lt(ir),Jt=Y(ir,"INPUT",{placeholder:!0,class:!0}),ir.forEach(ht),Ir=lt(nr),ce=Y(nr,"DIV",{style:!0});var ar=mt(ce);Ee=Y(ar,"LABEL",{class:!0,"data-svelte-h":!0}),_t(Ee)!=="svelte-1313xps"&&(Ee.textContent=tn),zr=lt(ar),Qt=Y(ar,"INPUT",{placeholder:!0,class:!0}),ar.forEach(ht),nr.forEach(ht),Ar=lt(ve),fe=Y(ve,"DIV",{class:!0});var sr=mt(fe);de=Y(sr,"DIV",{style:!0});var or=mt(de);Se=Y(or,"LABEL",{class:!0,"data-svelte-h":!0}),_t(Se)!=="svelte-v7kanb"&&(Se.textContent=en),Or=lt(or),Vt=Y(or,"INPUT",{type:!0,min:!0,class:!0}),or.forEach(ht),Tr=lt(sr),pe=Y(sr,"DIV",{style:!0});var lr=mt(pe);Ie=Y(lr,"LABEL",{class:!0,"data-svelte-h":!0}),_t(Ie)!=="svelte-1pn3nlb"&&(Ie.textContent=rn),Br=lt(lr),Gt=Y(lr,"INPUT",{type:!0,min:!0,class:!0}),lr.forEach(ht),sr.forEach(ht),Dr=lt(ve),Kt=Y(ve,"DIV",{class:!0});var Ne=mt(Kt);ze=Y(Ne,"LABEL",{class:!0});var Wr=mt(ze);Rr=Ut(Wr,`Align
          `),Lt=Y(Wr,"SELECT",{class:!0});var ur=mt(Lt);$t=Y(ur,"OPTION",{"data-svelte-h":!0}),_t($t)!=="svelte-dm3ioe"&&($t.textContent=nn),te=Y(ur,"OPTION",{"data-svelte-h":!0}),_t(te)!=="svelte-1x1wx6q"&&(te.textContent=an),ee=Y(ur,"OPTION",{"data-svelte-h":!0}),_t(ee)!=="svelte-gdc71y"&&(ee.textContent=sn),ur.forEach(ht),Wr.forEach(ht),Pr=lt(Ne),Ae=Y(Ne,"LABEL",{class:!0});var Zr=mt(Ae);me=Y(Zr,"INPUT",{type:!0,class:!0}),Nr=Ut(Zr," Pause"),Zr.forEach(ht),Lr=lt(Ne),Oe=Y(Ne,"LABEL",{class:!0});var Hr=mt(Oe);_e=Y(Hr,"INPUT",{type:!0,class:!0}),Ur=Ut(Hr," Cut"),Hr.forEach(ht),Ne.forEach(ht),ve.forEach(ht),nt.forEach(ht),Fr=lt(xt),Te=Y(xt,"DIV",{class:!0});var fn=mt(Te);Ht.l(fn),fn.forEach(ht),xt.forEach(ht),this.h()},h(){Ot(z,"margin","0 0 6px"),J(g,"type","file"),J(g,"accept","image/*"),J(g,"class","svelte-1vl5lug"),J(v,"class","svelte-1vl5lug"),J(p,"class","row svelte-1vl5lug"),J(n,"class","svelte-1vl5lug"),J(d,"class","svelte-1vl5lug"),B[2].din===void 0&&je(()=>B[14].call(d)),J(R,"class","svelte-1vl5lug"),J(O,"type","number"),J(O,"step","0.1"),J(O,"class","svelte-1vl5lug"),Ot(x,"flex","1"),J(b,"class","svelte-1vl5lug"),J(L,"type","number"),J(L,"step","0.1"),J(L,"class","svelte-1vl5lug"),Ot($,"flex","1"),J(C,"class","row svelte-1vl5lug"),J(H,"class","svelte-1vl5lug"),J(S,"type","number"),J(S,"step","0.1"),J(S,"class","svelte-1vl5lug"),Ot(ot,"flex","1"),J(W,"class","svelte-1vl5lug"),J(tt,"type","number"),J(tt,"step","1"),J(tt,"class","svelte-1vl5lug"),Ot(j,"flex","1"),J(M,"class","row svelte-1vl5lug"),J(yt,"class","svelte-1vl5lug"),t.__value="fit",bt(t,t.__value),I.__value="fill",bt(I,I.__value),u.__value="stretch",bt(u,u.__value),J(ft,"class","svelte-1vl5lug"),B[2].mode===void 0&&je(()=>B[19].call(ft)),J(F,"class","svelte-1vl5lug"),G.__value="vertical",bt(G,G.__value),ct.__value="horizontal",bt(ct,ct.__value),Ct.__value="diagonal",bt(Ct,Ct.__value),J(q,"class","svelte-1vl5lug"),B[2].direction===void 0&&je(()=>B[20].call(q)),J(Dt,"class","svelte-1vl5lug"),St.__value="floyd",bt(St,St.__value),jt.__value="halftone",bt(jt,jt.__value),Mt.__value="none",bt(Mt,Mt.__value),J(zt,"class","svelte-1vl5lug"),B[2].dither===void 0&&je(()=>B[21].call(zt)),J(ge,"class","svelte-1vl5lug"),J(Wt,"type","number"),J(Wt,"step","1"),J(Wt,"class","svelte-1vl5lug"),Ot(ie,"flex","1"),J(be,"class","svelte-1vl5lug"),J(Zt,"type","number"),J(Zt,"step","1"),J(Zt,"class","svelte-1vl5lug"),Ot(ae,"flex","1"),J(Rt,"class","row svelte-1vl5lug"),J(Xt,"type","checkbox"),J(Xt,"class","svelte-1vl5lug"),J(ye,"class","svelte-1vl5lug"),J(we,"class","row svelte-1vl5lug"),Ot(we,"margin-top","8px"),J(se,"class","svelte-1vl5lug"),J(oe,"class","svelte-1vl5lug"),J(le,"class","svelte-1vl5lug"),J(Pt,"class","row svelte-1vl5lug"),Ot(Pt,"margin-top","12px"),Ot(Pt,"gap","12px"),J(ke,"class","muted svelte-1vl5lug"),Ot(ke,"margin-top","8px"),Ot(xe,"margin","0 0 8px"),J(Ce,"class","svelte-1vl5lug"),J(Jt,"placeholder","e.g. 04b8"),J(Jt,"class","svelte-1vl5lug"),Ot(he,"flex","1"),J(Ee,"class","svelte-1vl5lug"),J(Qt,"placeholder","optional"),J(Qt,"class","svelte-1vl5lug"),Ot(ce,"flex","1"),J(ue,"class","row svelte-1vl5lug"),J(Se,"class","svelte-1vl5lug"),J(Vt,"type","number"),J(Vt,"min","0"),J(Vt,"class","svelte-1vl5lug"),Ot(de,"flex","1"),J(Ie,"class","svelte-1vl5lug"),J(Gt,"type","number"),J(Gt,"min","1"),J(Gt,"class","svelte-1vl5lug"),Ot(pe,"flex","1"),J(fe,"class","row svelte-1vl5lug"),$t.__value="left",bt($t,$t.__value),te.__value="center",bt(te,te.__value),ee.__value="right",bt(ee,ee.__value),J(Lt,"class","svelte-1vl5lug"),B[3].align===void 0&&je(()=>B[29].call(Lt)),J(ze,"class","svelte-1vl5lug"),J(me,"type","checkbox"),J(me,"class","svelte-1vl5lug"),J(Ae,"class","svelte-1vl5lug"),J(_e,"type","checkbox"),J(_e,"class","svelte-1vl5lug"),J(Oe,"class","svelte-1vl5lug"),J(Kt,"class","row svelte-1vl5lug"),J(Nt,"class","printer-box svelte-1vl5lug"),J(i,"class","panel controls svelte-1vl5lug"),J(Te,"class","panel svelte-1vl5lug"),J(Q,"class","grid svelte-1vl5lug")},m(it,xt){De(it,Q,xt),T(Q,i),T(i,z),T(i,h),T(i,s),T(i,o),T(i,p),T(p,g),B[12](g),T(p,_),T(p,v),T(i,m),T(i,n),T(i,l),T(i,d);for(let nt=0;nt<At.length;nt+=1)At[nt]&&At[nt].m(d,null);qt(d,B[2].din,!0),T(i,y),T(i,C),T(C,x),T(x,R),T(x,Z),T(x,O),bt(O,B[2].width_cm),T(C,K),T(C,$),T($,b),T($,r),T($,L),bt(L,B[2].height_cm),T(i,st),T(i,M),T(M,ot),T(ot,H),T(ot,A),T(ot,S),bt(S,B[2].strip_mm),T(M,rt),T(M,j),T(j,W),T(j,wt),T(j,tt),bt(tt,B[2].printer_dots_per_mm),T(i,pt),T(i,yt),T(i,It),T(i,ft),T(ft,t),T(ft,I),T(ft,u),qt(ft,B[2].mode,!0),T(i,U),T(i,F),T(i,V),T(i,q),T(q,G),T(q,ct),T(q,Ct),qt(q,B[2].direction,!0),T(i,Bt),T(i,Dt),T(i,ne),T(i,zt),T(zt,St),T(zt,jt),T(zt,Mt),qt(zt,B[2].dither,!0),T(i,Yt),T(i,Rt),T(Rt,ie),T(ie,ge),T(ie,mr),T(ie,Wt),bt(Wt,B[2].halftone_cell),T(Rt,_r),T(Rt,ae),T(ae,be),T(ae,vr),T(ae,Zt),bt(Zt,B[2].printer_max_width_px),T(i,gr),T(i,we),T(we,ye),T(ye,Xt),Xt.checked=B[2].invert,T(ye,br),T(i,wr),T(i,Pt),T(Pt,se),T(Pt,yr),T(Pt,oe),T(Pt,kr),T(Pt,le),T(i,xr),T(i,ke),T(ke,Ze),T(i,Cr),T(i,Nt),T(Nt,xe),T(Nt,Er),T(Nt,ue),T(ue,he),T(he,Ce),T(he,Sr),T(he,Jt),bt(Jt,B[3].vendorIdHex),T(ue,Ir),T(ue,ce),T(ce,Ee),T(ce,zr),T(ce,Qt),bt(Qt,B[3].productIdHex),T(Nt,Ar),T(Nt,fe),T(fe,de),T(de,Se),T(de,Or),T(de,Vt),bt(Vt,B[3].iface),T(fe,Tr),T(fe,pe),T(pe,Ie),T(pe,Br),T(pe,Gt),bt(Gt,B[3].endpoint),T(Nt,Dr),T(Nt,Kt),T(Kt,ze),T(ze,Rr),T(ze,Lt),T(Lt,$t),T(Lt,te),T(Lt,ee),qt(Lt,B[3].align,!0),T(Kt,Pr),T(Kt,Ae),T(Ae,me),me.checked=B[3].pause,T(Ae,Nr),T(Kt,Lr),T(Kt,Oe),T(Oe,_e),_e.checked=B[3].cut,T(Oe,Ur),T(Q,Fr),T(Q,Te),Ht.m(Te,null),jr||(on=[vt(g,"change",B[7]),vt(v,"click",B[13]),vt(d,"change",B[14]),vt(d,"change",B[11]),vt(O,"input",B[15]),vt(O,"change",B[11]),vt(L,"input",B[16]),vt(L,"change",B[11]),vt(S,"input",B[17]),vt(S,"change",B[11]),vt(tt,"input",B[18]),vt(tt,"change",B[11]),vt(ft,"change",B[19]),vt(ft,"change",B[11]),vt(q,"change",B[20]),vt(q,"change",B[11]),vt(zt,"change",B[21]),vt(zt,"change",B[11]),vt(Wt,"input",B[22]),vt(Wt,"change",B[11]),vt(Zt,"input",B[23]),vt(Zt,"change",B[11]),vt(Xt,"change",B[24]),vt(Xt,"change",B[11]),vt(se,"click",B[8]),vt(oe,"click",B[10]),vt(le,"click",B[9]),vt(Jt,"input",B[25]),vt(Qt,"input",B[26]),vt(Vt,"input",B[27]),vt(Gt,"input",B[28]),vt(Lt,"change",B[29]),vt(me,"change",B[30]),vt(_e,"change",B[31])],jr=!0)},p(it,xt){if(xt[0]&64){Re=pr(it[6]);let nt;for(nt=0;nt<Re.length;nt+=1){const Be=mn(it,Re,nt);At[nt]?At[nt].p(Be,xt):(At[nt]=_n(Be),At[nt].c(),At[nt].m(d,null))}for(;nt<At.length;nt+=1)At[nt].d(1);At.length=Re.length}xt[0]&68&&qt(d,it[2].din),xt[0]&68&&Tt(O.value)!==it[2].width_cm&&bt(O,it[2].width_cm),xt[0]&68&&Tt(L.value)!==it[2].height_cm&&bt(L,it[2].height_cm),xt[0]&68&&Tt(S.value)!==it[2].strip_mm&&bt(S,it[2].strip_mm),xt[0]&68&&Tt(tt.value)!==it[2].printer_dots_per_mm&&bt(tt,it[2].printer_dots_per_mm),xt[0]&68&&qt(ft,it[2].mode),xt[0]&68&&qt(q,it[2].direction),xt[0]&68&&qt(zt,it[2].dither),xt[0]&68&&Tt(Wt.value)!==it[2].halftone_cell&&bt(Wt,it[2].halftone_cell),xt[0]&68&&Tt(Zt.value)!==it[2].printer_max_width_px&&bt(Zt,it[2].printer_max_width_px),xt[0]&68&&(Xt.checked=it[2].invert),xt[0]&34&&Fe!==(Fe=(it[5]?"Working":it[1])+"")&&fr(Ze,Fe),xt[0]&8&&Jt.value!==it[3].vendorIdHex&&bt(Jt,it[3].vendorIdHex),xt[0]&8&&Qt.value!==it[3].productIdHex&&bt(Qt,it[3].productIdHex),xt[0]&8&&Tt(Vt.value)!==it[3].iface&&bt(Vt,it[3].iface),xt[0]&8&&Tt(Gt.value)!==it[3].endpoint&&bt(Gt,it[3].endpoint),xt[0]&8&&qt(Lt,it[3].align),xt[0]&8&&(me.checked=it[3].pause),xt[0]&8&&(_e.checked=it[3].cut),He===(He=ln(it))&&Ht?Ht.p(it,xt):(Ht.d(1),Ht=He(it),Ht&&(Ht.c(),Ht.m(Te,null)))},i:dr,o:dr,d(it){it&&ht(Q),B[12](null),gn(At,it),Ht.d(),jr=!1,Cn(on)}}}function Fn(B,Q,i){let z=null,w="",h,s="",e={din:"A4",width_cm:void 0,height_cm:void 0,printer_dots_per_mm:8,strip_mm:60,mode:"fit",dither:"floyd",halftone_cell:8,invert:!1,direction:"vertical",printer_max_width_px:576},o={vendorIdHex:"",productIdHex:"",iface:0,endpoint:1,align:"left",pause:!0,cut:!0},p=[],g=!1;const _=Object.keys(wn);function v(j){i(1,s=j??"")}En(async()=>{try{w="/palm.jpg",await m()}catch(j){console.warn("Could not load default image",j),v("Load an image to begin.")}});async function a(j){var gt;const W=(gt=j.target.files)==null?void 0:gt[0];W&&(w=URL.createObjectURL(W),await m())}async function m(){w&&(z=new Image,z.crossOrigin="anonymous",z.src=w,await z.decode(),await n())}async function n(){if(!z)return;i(5,g=!0),v("Processing"),i(4,p=[]);const[j,W]=Tn(e),gt=Gr(j,e.printer_dots_per_mm),wt=Gr(W,e.printer_dots_per_mm);let tt=Bn(z,gt,wt,e.mode);e.direction==="diagonal"&&(tt=Dn(tt));const yt=tt.getContext("2d").getImageData(0,0,tt.width,tt.height),kt=new Worker(new URL(""+new URL("../workers/worker-Cwvvch6N.js",import.meta.url).href,import.meta.url),{type:"module"}),It=await new Promise((P,I)=>{kt.onmessage=c=>{var u,k;if(!((u=c.data)!=null&&u.ok)){I(new Error(((k=c.data)==null?void 0:k.error)||"Worker failed")),kt.terminate();return}P(c.data.imageData),kt.terminate()},kt.onerror=c=>I(c),kt.postMessage({imageData:yt,settings:e},[yt.data.buffer])}),ft=document.createElement("canvas");ft.width=It.width,ft.height=It.height,ft.getContext("2d").putImageData(It,0,0);const t=Gr(e.strip_mm,e.printer_dots_per_mm);if(e.direction==="vertical"){const P=Math.ceil(ft.width/t);for(let I=0;I<P;I++){const c=I*t,u=Math.min(t,ft.width-c),k=ft.height,U=document.createElement("canvas");U.width=t,U.height=k;const F=U.getContext("2d");F.fillStyle="#fff",F.fillRect(0,0,U.width,U.height),F.drawImage(ft,c,0,u,k,0,0,u,k),p.push({canvas:U,name:`vstrip_${String(I+1).padStart(2,"0")}.png`})}}else if(e.direction==="horizontal"){const P=Math.ceil(ft.height/t),I=[];for(let u=0;u<P;u++){const k=u*t,U=Math.min(t,ft.height-k),F=ft.width,E=document.createElement("canvas");E.width=F,E.height=t;const V=E.getContext("2d");V.fillStyle="#fff",V.fillRect(0,0,F,t),V.drawImage(ft,0,k,F,U,0,0,F,U);const q=document.createElement("canvas");q.width=t,q.height=F;const G=q.getContext("2d");G.translate(t,0),G.rotate(Math.PI/2),G.imageSmoothingEnabled=!1,G.drawImage(E,0,0);let et=q;if(q.width!==e.printer_max_width_px){const ct=document.createElement("canvas"),dt=e.printer_max_width_px/q.width;ct.width=e.printer_max_width_px,ct.height=Math.round(q.height*dt);const Ct=ct.getContext("2d");Ct.imageSmoothingEnabled=!1,Ct.drawImage(q,0,0,ct.width,ct.height),et=ct}I.push({canvas:et,name:`hstrip_tmp_${String(u+1).padStart(2,"0")}.png`})}const c=I.reverse();i(4,p=c.map((u,k)=>({canvas:u.canvas,name:`hstrip_${String(k+1).padStart(2,"0")}.png`})))}else{const P=ft.width,I=ft.height,c=e.printer_max_width_px,u=Math.ceil(P/c);for(let k=0;k<u;k++){const U=k*c,F=Math.min(c,P-U),E=document.createElement("canvas");E.width=c,E.height=I;const V=E.getContext("2d");V.fillStyle="#fff",V.fillRect(0,0,E.width,E.height),V.drawImage(ft,U,0,F,I,0,0,F,I),p.push({canvas:E,name:`diagstrip_${String(k+1).padStart(2,"0")}.png`})}}i(5,g=!1),v(`Generated ${p.length} strips.`)}async function f(){try{if(!p.length){v("Nothing to download. Generate strips first.");return}const j=new On,W=j.folder("tesselated_strips")||j;for(const pt of p){const yt=await Rn(pt.canvas);W.file(pt.name,yt)}const gt=await j.generateAsync({type:"blob"}),wt=URL.createObjectURL(gt),tt=document.createElement("a");tt.href=wt,tt.download="tesselated_strips.zip",document.body.appendChild(tt),tt.click(),tt.remove(),URL.revokeObjectURL(wt),v("ZIP downloaded.")}catch(j){console.error(j),v("Download failed."),alert("Download failed: "+((j==null?void 0:j.message)||j))}}async function l(){try{if(!p.length){v("Nothing to print. Generate strips first.");return}const j=p.map(W=>W.canvas.getContext("2d").getImageData(0,0,W.canvas.width,W.canvas.height));v("Opening printer"),await Pn(j,{pause:o.pause,cut:o.cut,vendorIdHex:o.vendorIdHex,productIdHex:o.productIdHex,iface:Number(o.iface)||0,endpoint:Number(o.endpoint)||1,align:o.align}),v("Print job sent.")}catch(j){console.error(j),v("Print failed."),alert("Print failed: "+((j==null?void 0:j.message)||j||"Check WebUSB support and your Vendor/Product IDs, interface, endpoint."))}}function d(){if(!p.length){v("Nothing to print. Generate strips first.");return}const j=window.open("","_blank");if(!j)return;const W=wt=>wt/e.printer_dots_per_mm+"mm",gt=`<!doctype html><html><head><meta charset="utf-8"/><title>Print Sheets</title>
      <style>@page{margin:10mm}body{margin:0} .strip{page-break-after:always;display:flex;justify-content:center} img{image-rendering:pixelated}</style>
      </head><body>
      ${p.map(wt=>`<div class="strip"><img src="${wt.canvas.toDataURL()}" style="width:${W(wt.canvas.width)};height:${W(wt.canvas.height)}"/></div>`).join("")}
      <script>onload=()=>print()<\/script></body></html>`;j.document.write(gt),j.document.close()}function y(){z&&!g&&n()}function C(j){Sn[j?"unshift":"push"](()=>{h=j,i(0,h)})}const x=()=>h.click();function R(){e.din=Me(this),i(2,e),i(6,_)}function D(){e.width_cm=Tt(this.value),i(2,e),i(6,_)}function Z(){e.height_cm=Tt(this.value),i(2,e),i(6,_)}function O(){e.strip_mm=Tt(this.value),i(2,e),i(6,_)}function K(){e.printer_dots_per_mm=Tt(this.value),i(2,e),i(6,_)}function $(){e.mode=Me(this),i(2,e),i(6,_)}function b(){e.direction=Me(this),i(2,e),i(6,_)}function N(){e.dither=Me(this),i(2,e),i(6,_)}function r(){e.halftone_cell=Tt(this.value),i(2,e),i(6,_)}function L(){e.printer_max_width_px=Tt(this.value),i(2,e),i(6,_)}function st(){e.invert=this.checked,i(2,e),i(6,_)}function M(){o.vendorIdHex=this.value,i(3,o)}function ot(){o.productIdHex=this.value,i(3,o)}function H(){o.iface=Tt(this.value),i(3,o)}function at(){o.endpoint=Tt(this.value),i(3,o)}function A(){o.align=Me(this),i(3,o)}function S(){o.pause=this.checked,i(3,o)}function rt(){o.cut=this.checked,i(3,o)}return[h,s,e,o,p,g,_,a,f,l,d,y,C,x,R,D,Z,O,K,$,b,N,r,L,st,M,ot,H,at,A,S,rt]}class Zn extends yn{constructor(Q){super(),kn(this,Q,Fn,Un,xn,{},null,[-1,-1])}}export{Zn as component,Wn as universal};
