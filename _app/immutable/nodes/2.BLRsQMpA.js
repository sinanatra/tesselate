import{S as Rn,i as Pn,s as Nn,n as xr,d as at,J as Bn,K as Ln,L as Xt,M as zt,N as vt,e as kr,f as Re,h as O,O as gt,H as St,G as V,P as Ze,j as K,k as ct,Q as bt,m as ut,l as Ft,o as q,q as ht,p as jt,z as Un,I as Fn,R as He,T as In}from"../chunks/W0BAji1W.js";import"../chunks/IHki7fMi.js";function Cr(T){return(T==null?void 0:T.length)!==void 0?T:Array.from(T)}const jn=!0,ri=Object.freeze(Object.defineProperty({__proto__:null,prerender:jn},Symbol.toStringTag,{value:"Module"}));var wr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mn(T){return T&&T.__esModule&&Object.prototype.hasOwnProperty.call(T,"default")?T.default:T}function yr(T){throw new Error('Could not dynamically require "'+T+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Tn={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(T,Y){(function(i){T.exports=i()})(function(){return function i(I,w,h){function s(d,g){if(!w[d]){if(!I[d]){var m=typeof yr=="function"&&yr;if(!g&&m)return m(d,!0);if(e)return e(d,!0);var v=new Error("Cannot find module '"+d+"'");throw v.code="MODULE_NOT_FOUND",v}var a=w[d]={exports:{}};I[d][0].call(a.exports,function(_){var n=I[d][1][_];return s(n||_)},a,a.exports,i,I,w,h)}return w[d].exports}for(var e=typeof yr=="function"&&yr,o=0;o<h.length;o++)s(h[o]);return s}({1:[function(i,I,w){var h=i("./utils"),s=i("./support"),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";w.encode=function(o){for(var d,g,m,v,a,_,n,f=[],l=0,p=o.length,y=p,E=h.getTypeOf(o)!=="string";l<o.length;)y=p-l,m=E?(d=o[l++],g=l<p?o[l++]:0,l<p?o[l++]:0):(d=o.charCodeAt(l++),g=l<p?o.charCodeAt(l++):0,l<p?o.charCodeAt(l++):0),v=d>>2,a=(3&d)<<4|g>>4,_=1<y?(15&g)<<2|m>>6:64,n=2<y?63&m:64,f.push(e.charAt(v)+e.charAt(a)+e.charAt(_)+e.charAt(n));return f.join("")},w.decode=function(o){var d,g,m,v,a,_,n=0,f=0,l="data:";if(o.substr(0,l.length)===l)throw new Error("Invalid base64 input, it looks like a data url.");var p,y=3*(o=o.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(o.charAt(o.length-1)===e.charAt(64)&&y--,o.charAt(o.length-2)===e.charAt(64)&&y--,y%1!=0)throw new Error("Invalid base64 input, bad content length.");for(p=s.uint8array?new Uint8Array(0|y):new Array(0|y);n<o.length;)d=e.indexOf(o.charAt(n++))<<2|(v=e.indexOf(o.charAt(n++)))>>4,g=(15&v)<<4|(a=e.indexOf(o.charAt(n++)))>>2,m=(3&a)<<6|(_=e.indexOf(o.charAt(n++))),p[f++]=d,a!==64&&(p[f++]=g),_!==64&&(p[f++]=m);return p}},{"./support":30,"./utils":32}],2:[function(i,I,w){var h=i("./external"),s=i("./stream/DataWorker"),e=i("./stream/Crc32Probe"),o=i("./stream/DataLengthProbe");function d(g,m,v,a,_){this.compressedSize=g,this.uncompressedSize=m,this.crc32=v,this.compression=a,this.compressedContent=_}d.prototype={getContentWorker:function(){var g=new s(h.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),m=this;return g.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),g},getCompressedWorker:function(){return new s(h.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(g,m,v){return g.pipe(new e).pipe(new o("uncompressedSize")).pipe(m.compressWorker(v)).pipe(new o("compressedSize")).withStreamInfo("compression",m)},I.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(i,I,w){var h=i("./stream/GenericWorker");w.STORE={magic:"\0\0",compressWorker:function(){return new h("STORE compression")},uncompressWorker:function(){return new h("STORE decompression")}},w.DEFLATE=i("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(i,I,w){var h=i("./utils"),s=function(){for(var e,o=[],d=0;d<256;d++){e=d;for(var g=0;g<8;g++)e=1&e?3988292384^e>>>1:e>>>1;o[d]=e}return o}();I.exports=function(e,o){return e!==void 0&&e.length?h.getTypeOf(e)!=="string"?function(d,g,m,v){var a=s,_=v+m;d^=-1;for(var n=v;n<_;n++)d=d>>>8^a[255&(d^g[n])];return-1^d}(0|o,e,e.length,0):function(d,g,m,v){var a=s,_=v+m;d^=-1;for(var n=v;n<_;n++)d=d>>>8^a[255&(d^g.charCodeAt(n))];return-1^d}(0|o,e,e.length,0):0}},{"./utils":32}],5:[function(i,I,w){w.base64=!1,w.binary=!1,w.dir=!1,w.createFolders=!0,w.date=null,w.compression=null,w.compressionOptions=null,w.comment=null,w.unixPermissions=null,w.dosPermissions=null},{}],6:[function(i,I,w){var h=null;h=typeof Promise<"u"?Promise:i("lie"),I.exports={Promise:h}},{lie:37}],7:[function(i,I,w){var h=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=i("pako"),e=i("./utils"),o=i("./stream/GenericWorker"),d=h?"uint8array":"array";function g(m,v){o.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=v,this.meta={}}w.magic="\b\0",e.inherits(g,o),g.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(e.transformTo(d,m.data),!1)},g.prototype.flush=function(){o.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},g.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},g.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(v){m.push({data:v,meta:m.meta})}},w.compressWorker=function(m){return new g("Deflate",m)},w.uncompressWorker=function(){return new g("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(i,I,w){function h(a,_){var n,f="";for(n=0;n<_;n++)f+=String.fromCharCode(255&a),a>>>=8;return f}function s(a,_,n,f,l,p){var y,E,x=a.file,R=a.compression,P=p!==d.utf8encode,j=e.transformTo("string",p(x.name)),D=e.transformTo("string",d.utf8encode(x.name)),X=x.comment,et=e.transformTo("string",p(X)),b=e.transformTo("string",d.utf8encode(X)),L=D.length!==x.name.length,r=b.length!==X.length,U="",nt="",Z="",lt=x.dir,M=x.date,it={crc32:0,compressedSize:0,uncompressedSize:0};_&&!n||(it.crc32=a.crc32,it.compressedSize=a.compressedSize,it.uncompressedSize=a.uncompressedSize);var A=0;_&&(A|=8),P||!L&&!r||(A|=2048);var S=0,Q=0;lt&&(S|=16),l==="UNIX"?(Q=798,S|=function(H,kt){var _t=H;return H||(_t=kt?16893:33204),(65535&_t)<<16}(x.unixPermissions,lt)):(Q=20,S|=function(H){return 63&(H||0)}(x.dosPermissions)),y=M.getUTCHours(),y<<=6,y|=M.getUTCMinutes(),y<<=5,y|=M.getUTCSeconds()/2,E=M.getUTCFullYear()-1980,E<<=4,E|=M.getUTCMonth()+1,E<<=5,E|=M.getUTCDate(),L&&(nt=h(1,1)+h(g(j),4)+D,U+="up"+h(nt.length,2)+nt),r&&(Z=h(1,1)+h(g(et),4)+b,U+="uc"+h(Z.length,2)+Z);var $="";return $+=`
\0`,$+=h(A,2),$+=R.magic,$+=h(y,2),$+=h(E,2),$+=h(it.crc32,4),$+=h(it.compressedSize,4),$+=h(it.uncompressedSize,4),$+=h(j.length,2),$+=h(U.length,2),{fileRecord:m.LOCAL_FILE_HEADER+$+j+U,dirRecord:m.CENTRAL_FILE_HEADER+h(Q,2)+$+h(et.length,2)+"\0\0\0\0"+h(S,4)+h(f,4)+j+U+et}}var e=i("../utils"),o=i("../stream/GenericWorker"),d=i("../utf8"),g=i("../crc32"),m=i("../signature");function v(a,_,n,f){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=n,this.encodeFileName=f,this.streamFiles=a,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}e.inherits(v,o),v.prototype.push=function(a){var _=a.meta.percent||0,n=this.entriesCount,f=this._sources.length;this.accumulate?this.contentBuffer.push(a):(this.bytesWritten+=a.data.length,o.prototype.push.call(this,{data:a.data,meta:{currentFile:this.currentFile,percent:n?(_+100*(n-f-1))/n:100}}))},v.prototype.openedSource=function(a){this.currentSourceOffset=this.bytesWritten,this.currentFile=a.file.name;var _=this.streamFiles&&!a.file.dir;if(_){var n=s(a,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(a){this.accumulate=!1;var _=this.streamFiles&&!a.file.dir,n=s(a,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),_)this.push({data:function(f){return m.DATA_DESCRIPTOR+h(f.crc32,4)+h(f.compressedSize,4)+h(f.uncompressedSize,4)}(a),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var a=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var n=this.bytesWritten-a,f=function(l,p,y,E,x){var R=e.transformTo("string",x(E));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+h(l,2)+h(l,2)+h(p,4)+h(y,4)+h(R.length,2)+R}(this.dirRecords.length,n,a,this.zipComment,this.encodeFileName);this.push({data:f,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(a){this._sources.push(a);var _=this;return a.on("data",function(n){_.processChunk(n)}),a.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),a.on("error",function(n){_.error(n)}),this},v.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(a){var _=this._sources;if(!o.prototype.error.call(this,a))return!1;for(var n=0;n<_.length;n++)try{_[n].error(a)}catch{}return!0},v.prototype.lock=function(){o.prototype.lock.call(this);for(var a=this._sources,_=0;_<a.length;_++)a[_].lock()},I.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(i,I,w){var h=i("../compressions"),s=i("./ZipFileWorker");w.generateWorker=function(e,o,d){var g=new s(o.streamFiles,d,o.platform,o.encodeFileName),m=0;try{e.forEach(function(v,a){m++;var _=function(p,y){var E=p||y,x=h[E];if(!x)throw new Error(E+" is not a valid compression method !");return x}(a.options.compression,o.compression),n=a.options.compressionOptions||o.compressionOptions||{},f=a.dir,l=a.date;a._compressWorker(_,n).withStreamInfo("file",{name:v,dir:f,date:l,comment:a.comment||"",unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions}).pipe(g)}),g.entriesCount=m}catch(v){g.error(v)}return g}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(i,I,w){function h(){if(!(this instanceof h))return new h;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new h;for(var e in this)typeof this[e]!="function"&&(s[e]=this[e]);return s}}(h.prototype=i("./object")).loadAsync=i("./load"),h.support=i("./support"),h.defaults=i("./defaults"),h.version="3.10.1",h.loadAsync=function(s,e){return new h().loadAsync(s,e)},h.external=i("./external"),I.exports=h},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(i,I,w){var h=i("./utils"),s=i("./external"),e=i("./utf8"),o=i("./zipEntries"),d=i("./stream/Crc32Probe"),g=i("./nodejsUtils");function m(v){return new s.Promise(function(a,_){var n=v.decompressed.getContentWorker().pipe(new d);n.on("error",function(f){_(f)}).on("end",function(){n.streamInfo.crc32!==v.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):a()}).resume()})}I.exports=function(v,a){var _=this;return a=h.extend(a||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:e.utf8decode}),g.isNode&&g.isStream(v)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):h.prepareContent("the loaded zip file",v,!0,a.optimizedBinaryString,a.base64).then(function(n){var f=new o(a);return f.load(n),f}).then(function(n){var f=[s.Promise.resolve(n)],l=n.files;if(a.checkCRC32)for(var p=0;p<l.length;p++)f.push(m(l[p]));return s.Promise.all(f)}).then(function(n){for(var f=n.shift(),l=f.files,p=0;p<l.length;p++){var y=l[p],E=y.fileNameStr,x=h.resolve(y.fileNameStr);_.file(x,y.decompressed,{binary:!0,optimizedBinaryString:!0,date:y.date,dir:y.dir,comment:y.fileCommentStr.length?y.fileCommentStr:null,unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions,createFolders:a.createFolders}),y.dir||(_.file(x).unsafeOriginalName=E)}return f.zipComment.length&&(_.comment=f.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(i,I,w){var h=i("../utils"),s=i("../stream/GenericWorker");function e(o,d){s.call(this,"Nodejs stream input adapter for "+o),this._upstreamEnded=!1,this._bindStream(d)}h.inherits(e,s),e.prototype._bindStream=function(o){var d=this;(this._stream=o).pause(),o.on("data",function(g){d.push({data:g,meta:{percent:0}})}).on("error",function(g){d.isPaused?this.generatedError=g:d.error(g)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},e.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},e.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},I.exports=e},{"../stream/GenericWorker":28,"../utils":32}],13:[function(i,I,w){var h=i("readable-stream").Readable;function s(e,o,d){h.call(this,o),this._helper=e;var g=this;e.on("data",function(m,v){g.push(m)||g._helper.pause(),d&&d(v)}).on("error",function(m){g.emit("error",m)}).on("end",function(){g.push(null)})}i("../utils").inherits(s,h),s.prototype._read=function(){this._helper.resume()},I.exports=s},{"../utils":32,"readable-stream":16}],14:[function(i,I,w){I.exports={isNode:typeof Buffer<"u",newBufferFrom:function(h,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(h,s);if(typeof h=="number")throw new Error('The "data" argument must not be a number');return new Buffer(h,s)},allocBuffer:function(h){if(Buffer.alloc)return Buffer.alloc(h);var s=new Buffer(h);return s.fill(0),s},isBuffer:function(h){return Buffer.isBuffer(h)},isStream:function(h){return h&&typeof h.on=="function"&&typeof h.pause=="function"&&typeof h.resume=="function"}}},{}],15:[function(i,I,w){function h(x,R,P){var j,D=e.getTypeOf(R),X=e.extend(P||{},g);X.date=X.date||new Date,X.compression!==null&&(X.compression=X.compression.toUpperCase()),typeof X.unixPermissions=="string"&&(X.unixPermissions=parseInt(X.unixPermissions,8)),X.unixPermissions&&16384&X.unixPermissions&&(X.dir=!0),X.dosPermissions&&16&X.dosPermissions&&(X.dir=!0),X.dir&&(x=l(x)),X.createFolders&&(j=f(x))&&p.call(this,j,!0);var et=D==="string"&&X.binary===!1&&X.base64===!1;P&&P.binary!==void 0||(X.binary=!et),(R instanceof m&&R.uncompressedSize===0||X.dir||!R||R.length===0)&&(X.base64=!1,X.binary=!0,R="",X.compression="STORE",D="string");var b=null;b=R instanceof m||R instanceof o?R:_.isNode&&_.isStream(R)?new n(x,R):e.prepareContent(x,R,X.binary,X.optimizedBinaryString,X.base64);var L=new v(x,b,X);this.files[x]=L}var s=i("./utf8"),e=i("./utils"),o=i("./stream/GenericWorker"),d=i("./stream/StreamHelper"),g=i("./defaults"),m=i("./compressedObject"),v=i("./zipObject"),a=i("./generate"),_=i("./nodejsUtils"),n=i("./nodejs/NodejsStreamInputAdapter"),f=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var R=x.lastIndexOf("/");return 0<R?x.substring(0,R):""},l=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},p=function(x,R){return R=R!==void 0?R:g.createFolders,x=l(x),this.files[x]||h.call(this,x,null,{dir:!0,createFolders:R}),this.files[x]};function y(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var R,P,j;for(R in this.files)j=this.files[R],(P=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&x(P,j)},filter:function(x){var R=[];return this.forEach(function(P,j){x(P,j)&&R.push(j)}),R},file:function(x,R,P){if(arguments.length!==1)return x=this.root+x,h.call(this,x,R,P),this;if(y(x)){var j=x;return this.filter(function(X,et){return!et.dir&&j.test(X)})}var D=this.files[this.root+x];return D&&!D.dir?D:null},folder:function(x){if(!x)return this;if(y(x))return this.filter(function(D,X){return X.dir&&x.test(D)});var R=this.root+x,P=p.call(this,R),j=this.clone();return j.root=P.name,j},remove:function(x){x=this.root+x;var R=this.files[x];if(R||(x.slice(-1)!=="/"&&(x+="/"),R=this.files[x]),R&&!R.dir)delete this.files[x];else for(var P=this.filter(function(D,X){return X.name.slice(0,x.length)===x}),j=0;j<P.length;j++)delete this.files[P[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var R,P={};try{if((P=e.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=P.type.toLowerCase(),P.compression=P.compression.toUpperCase(),P.type==="binarystring"&&(P.type="string"),!P.type)throw new Error("No output type specified.");e.checkSupport(P.type),P.platform!=="darwin"&&P.platform!=="freebsd"&&P.platform!=="linux"&&P.platform!=="sunos"||(P.platform="UNIX"),P.platform==="win32"&&(P.platform="DOS");var j=P.comment||this.comment||"";R=a.generateWorker(this,P,j)}catch(D){(R=new o("error")).error(D)}return new d(R,P.type||"string",P.mimeType)},generateAsync:function(x,R){return this.generateInternalStream(x).accumulate(R)},generateNodeStream:function(x,R){return(x=x||{}).type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(R)}};I.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(i,I,w){I.exports=i("stream")},{stream:void 0}],17:[function(i,I,w){var h=i("./DataReader");function s(e){h.call(this,e);for(var o=0;o<this.data.length;o++)e[o]=255&e[o]}i("../utils").inherits(s,h),s.prototype.byteAt=function(e){return this.data[this.zero+e]},s.prototype.lastIndexOfSignature=function(e){for(var o=e.charCodeAt(0),d=e.charCodeAt(1),g=e.charCodeAt(2),m=e.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===o&&this.data[v+1]===d&&this.data[v+2]===g&&this.data[v+3]===m)return v-this.zero;return-1},s.prototype.readAndCheckSignature=function(e){var o=e.charCodeAt(0),d=e.charCodeAt(1),g=e.charCodeAt(2),m=e.charCodeAt(3),v=this.readData(4);return o===v[0]&&d===v[1]&&g===v[2]&&m===v[3]},s.prototype.readData=function(e){if(this.checkOffset(e),e===0)return[];var o=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,o},I.exports=s},{"../utils":32,"./DataReader":18}],18:[function(i,I,w){var h=i("../utils");function s(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var o,d=0;for(this.checkOffset(e),o=this.index+e-1;o>=this.index;o--)d=(d<<8)+this.byteAt(o);return this.index+=e,d},readString:function(e){return h.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},I.exports=s},{"../utils":32}],19:[function(i,I,w){var h=i("./Uint8ArrayReader");function s(e){h.call(this,e)}i("../utils").inherits(s,h),s.prototype.readData=function(e){this.checkOffset(e);var o=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,o},I.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(i,I,w){var h=i("./DataReader");function s(e){h.call(this,e)}i("../utils").inherits(s,h),s.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},s.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},s.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},s.prototype.readData=function(e){this.checkOffset(e);var o=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,o},I.exports=s},{"../utils":32,"./DataReader":18}],21:[function(i,I,w){var h=i("./ArrayReader");function s(e){h.call(this,e)}i("../utils").inherits(s,h),s.prototype.readData=function(e){if(this.checkOffset(e),e===0)return new Uint8Array(0);var o=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,o},I.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(i,I,w){var h=i("../utils"),s=i("../support"),e=i("./ArrayReader"),o=i("./StringReader"),d=i("./NodeBufferReader"),g=i("./Uint8ArrayReader");I.exports=function(m){var v=h.getTypeOf(m);return h.checkSupport(v),v!=="string"||s.uint8array?v==="nodebuffer"?new d(m):s.uint8array?new g(h.transformTo("uint8array",m)):new e(h.transformTo("array",m)):new o(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(i,I,w){w.LOCAL_FILE_HEADER="PK",w.CENTRAL_FILE_HEADER="PK",w.CENTRAL_DIRECTORY_END="PK",w.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",w.ZIP64_CENTRAL_DIRECTORY_END="PK",w.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(i,I,w){var h=i("./GenericWorker"),s=i("../utils");function e(o){h.call(this,"ConvertWorker to "+o),this.destType=o}s.inherits(e,h),e.prototype.processChunk=function(o){this.push({data:s.transformTo(this.destType,o.data),meta:o.meta})},I.exports=e},{"../utils":32,"./GenericWorker":28}],25:[function(i,I,w){var h=i("./GenericWorker"),s=i("../crc32");function e(){h.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}i("../utils").inherits(e,h),e.prototype.processChunk=function(o){this.streamInfo.crc32=s(o.data,this.streamInfo.crc32||0),this.push(o)},I.exports=e},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(i,I,w){var h=i("../utils"),s=i("./GenericWorker");function e(o){s.call(this,"DataLengthProbe for "+o),this.propName=o,this.withStreamInfo(o,0)}h.inherits(e,s),e.prototype.processChunk=function(o){if(o){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+o.data.length}s.prototype.processChunk.call(this,o)},I.exports=e},{"../utils":32,"./GenericWorker":28}],27:[function(i,I,w){var h=i("../utils"),s=i("./GenericWorker");function e(o){s.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,o.then(function(g){d.dataIsReady=!0,d.data=g,d.max=g&&g.length||0,d.type=h.getTypeOf(g),d.isPaused||d._tickAndRepeat()},function(g){d.error(g)})}h.inherits(e,s),e.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},e.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,h.delay(this._tickAndRepeat,[],this)),!0)},e.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(h.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},e.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var o=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":o=this.data.substring(this.index,d);break;case"uint8array":o=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":o=this.data.slice(this.index,d)}return this.index=d,this.push({data:o,meta:{percent:this.max?this.index/this.max*100:0}})},I.exports=e},{"../utils":32,"./GenericWorker":28}],28:[function(i,I,w){function h(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}h.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,e){return this._listeners[s].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,e){if(this._listeners[s])for(var o=0;o<this._listeners[s].length;o++)this._listeners[s][o].call(this,e)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var e=this;return s.on("data",function(o){e.processChunk(o)}),s.on("end",function(){e.end()}),s.on("error",function(o){e.error(o)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,e){return this.extraStreamInfo[s]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},I.exports=h},{}],29:[function(i,I,w){var h=i("../utils"),s=i("./ConvertWorker"),e=i("./GenericWorker"),o=i("../base64"),d=i("../support"),g=i("../external"),m=null;if(d.nodestream)try{m=i("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(_,n){return new g.Promise(function(f,l){var p=[],y=_._internalType,E=_._outputType,x=_._mimeType;_.on("data",function(R,P){p.push(R),n&&n(P)}).on("error",function(R){p=[],l(R)}).on("end",function(){try{var R=function(P,j,D){switch(P){case"blob":return h.newBlob(h.transformTo("arraybuffer",j),D);case"base64":return o.encode(j);default:return h.transformTo(P,j)}}(E,function(P,j){var D,X=0,et=null,b=0;for(D=0;D<j.length;D++)b+=j[D].length;switch(P){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(et=new Uint8Array(b),D=0;D<j.length;D++)et.set(j[D],X),X+=j[D].length;return et;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+P+"'")}}(y,p),x);f(R)}catch(P){l(P)}p=[]}).resume()})}function a(_,n,f){var l=n;switch(n){case"blob":case"arraybuffer":l="uint8array";break;case"base64":l="string"}try{this._internalType=l,this._outputType=n,this._mimeType=f,h.checkSupport(l),this._worker=_.pipe(new s(l)),_.lock()}catch(p){this._worker=new e("error"),this._worker.error(p)}}a.prototype={accumulate:function(_){return v(this,_)},on:function(_,n){var f=this;return _==="data"?this._worker.on(_,function(l){n.call(f,l.data,l.meta)}):this._worker.on(_,function(){h.delay(n,arguments,f)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(h.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},_)}},I.exports=a},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(i,I,w){if(w.base64=!0,w.array=!0,w.string=!0,w.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",w.nodebuffer=typeof Buffer<"u",w.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")w.blob=!1;else{var h=new ArrayBuffer(0);try{w.blob=new Blob([h],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(h),w.blob=s.getBlob("application/zip").size===0}catch{w.blob=!1}}}try{w.nodestream=!!i("readable-stream").Readable}catch{w.nodestream=!1}},{"readable-stream":16}],31:[function(i,I,w){for(var h=i("./utils"),s=i("./support"),e=i("./nodejsUtils"),o=i("./stream/GenericWorker"),d=new Array(256),g=0;g<256;g++)d[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;d[254]=d[254]=1;function m(){o.call(this,"utf-8 decode"),this.leftOver=null}function v(){o.call(this,"utf-8 encode")}w.utf8encode=function(a){return s.nodebuffer?e.newBufferFrom(a,"utf-8"):function(_){var n,f,l,p,y,E=_.length,x=0;for(p=0;p<E;p++)(64512&(f=_.charCodeAt(p)))==55296&&p+1<E&&(64512&(l=_.charCodeAt(p+1)))==56320&&(f=65536+(f-55296<<10)+(l-56320),p++),x+=f<128?1:f<2048?2:f<65536?3:4;for(n=s.uint8array?new Uint8Array(x):new Array(x),p=y=0;y<x;p++)(64512&(f=_.charCodeAt(p)))==55296&&p+1<E&&(64512&(l=_.charCodeAt(p+1)))==56320&&(f=65536+(f-55296<<10)+(l-56320),p++),f<128?n[y++]=f:(f<2048?n[y++]=192|f>>>6:(f<65536?n[y++]=224|f>>>12:(n[y++]=240|f>>>18,n[y++]=128|f>>>12&63),n[y++]=128|f>>>6&63),n[y++]=128|63&f);return n}(a)},w.utf8decode=function(a){return s.nodebuffer?h.transformTo("nodebuffer",a).toString("utf-8"):function(_){var n,f,l,p,y=_.length,E=new Array(2*y);for(n=f=0;n<y;)if((l=_[n++])<128)E[f++]=l;else if(4<(p=d[l]))E[f++]=65533,n+=p-1;else{for(l&=p===2?31:p===3?15:7;1<p&&n<y;)l=l<<6|63&_[n++],p--;1<p?E[f++]=65533:l<65536?E[f++]=l:(l-=65536,E[f++]=55296|l>>10&1023,E[f++]=56320|1023&l)}return E.length!==f&&(E.subarray?E=E.subarray(0,f):E.length=f),h.applyFromCharCode(E)}(a=h.transformTo(s.uint8array?"uint8array":"array",a))},h.inherits(m,o),m.prototype.processChunk=function(a){var _=h.transformTo(s.uint8array?"uint8array":"array",a.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var n=_;(_=new Uint8Array(n.length+this.leftOver.length)).set(this.leftOver,0),_.set(n,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var f=function(p,y){var E;for((y=y||p.length)>p.length&&(y=p.length),E=y-1;0<=E&&(192&p[E])==128;)E--;return E<0||E===0?y:E+d[p[E]]>y?E:y}(_),l=_;f!==_.length&&(s.uint8array?(l=_.subarray(0,f),this.leftOver=_.subarray(f,_.length)):(l=_.slice(0,f),this.leftOver=_.slice(f,_.length))),this.push({data:w.utf8decode(l),meta:a.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:w.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},w.Utf8DecodeWorker=m,h.inherits(v,o),v.prototype.processChunk=function(a){this.push({data:w.utf8encode(a.data),meta:a.meta})},w.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(i,I,w){var h=i("./support"),s=i("./base64"),e=i("./nodejsUtils"),o=i("./external");function d(n){return n}function g(n,f){for(var l=0;l<n.length;++l)f[l]=255&n.charCodeAt(l);return f}i("setimmediate"),w.newBlob=function(n,f){w.checkSupport("blob");try{return new Blob([n],{type:f})}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return l.append(n),l.getBlob(f)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(n,f,l){var p=[],y=0,E=n.length;if(E<=l)return String.fromCharCode.apply(null,n);for(;y<E;)f==="array"||f==="nodebuffer"?p.push(String.fromCharCode.apply(null,n.slice(y,Math.min(y+l,E)))):p.push(String.fromCharCode.apply(null,n.subarray(y,Math.min(y+l,E)))),y+=l;return p.join("")},stringifyByChar:function(n){for(var f="",l=0;l<n.length;l++)f+=String.fromCharCode(n[l]);return f},applyCanBeUsed:{uint8array:function(){try{return h.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return h.nodebuffer&&String.fromCharCode.apply(null,e.allocBuffer(1)).length===1}catch{return!1}}()}};function v(n){var f=65536,l=w.getTypeOf(n),p=!0;if(l==="uint8array"?p=m.applyCanBeUsed.uint8array:l==="nodebuffer"&&(p=m.applyCanBeUsed.nodebuffer),p)for(;1<f;)try{return m.stringifyByChunk(n,l,f)}catch{f=Math.floor(f/2)}return m.stringifyByChar(n)}function a(n,f){for(var l=0;l<n.length;l++)f[l]=n[l];return f}w.applyFromCharCode=v;var _={};_.string={string:d,array:function(n){return g(n,new Array(n.length))},arraybuffer:function(n){return _.string.uint8array(n).buffer},uint8array:function(n){return g(n,new Uint8Array(n.length))},nodebuffer:function(n){return g(n,e.allocBuffer(n.length))}},_.array={string:v,array:d,arraybuffer:function(n){return new Uint8Array(n).buffer},uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return e.newBufferFrom(n)}},_.arraybuffer={string:function(n){return v(new Uint8Array(n))},array:function(n){return a(new Uint8Array(n),new Array(n.byteLength))},arraybuffer:d,uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return e.newBufferFrom(new Uint8Array(n))}},_.uint8array={string:v,array:function(n){return a(n,new Array(n.length))},arraybuffer:function(n){return n.buffer},uint8array:d,nodebuffer:function(n){return e.newBufferFrom(n)}},_.nodebuffer={string:v,array:function(n){return a(n,new Array(n.length))},arraybuffer:function(n){return _.nodebuffer.uint8array(n).buffer},uint8array:function(n){return a(n,new Uint8Array(n.length))},nodebuffer:d},w.transformTo=function(n,f){if(f=f||"",!n)return f;w.checkSupport(n);var l=w.getTypeOf(f);return _[l][n](f)},w.resolve=function(n){for(var f=n.split("/"),l=[],p=0;p<f.length;p++){var y=f[p];y==="."||y===""&&p!==0&&p!==f.length-1||(y===".."?l.pop():l.push(y))}return l.join("/")},w.getTypeOf=function(n){return typeof n=="string"?"string":Object.prototype.toString.call(n)==="[object Array]"?"array":h.nodebuffer&&e.isBuffer(n)?"nodebuffer":h.uint8array&&n instanceof Uint8Array?"uint8array":h.arraybuffer&&n instanceof ArrayBuffer?"arraybuffer":void 0},w.checkSupport=function(n){if(!h[n.toLowerCase()])throw new Error(n+" is not supported by this platform")},w.MAX_VALUE_16BITS=65535,w.MAX_VALUE_32BITS=-1,w.pretty=function(n){var f,l,p="";for(l=0;l<(n||"").length;l++)p+="\\x"+((f=n.charCodeAt(l))<16?"0":"")+f.toString(16).toUpperCase();return p},w.delay=function(n,f,l){setImmediate(function(){n.apply(l||null,f||[])})},w.inherits=function(n,f){function l(){}l.prototype=f.prototype,n.prototype=new l},w.extend=function(){var n,f,l={};for(n=0;n<arguments.length;n++)for(f in arguments[n])Object.prototype.hasOwnProperty.call(arguments[n],f)&&l[f]===void 0&&(l[f]=arguments[n][f]);return l},w.prepareContent=function(n,f,l,p,y){return o.Promise.resolve(f).then(function(E){return h.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader<"u"?new o.Promise(function(x,R){var P=new FileReader;P.onload=function(j){x(j.target.result)},P.onerror=function(j){R(j.target.error)},P.readAsArrayBuffer(E)}):E}).then(function(E){var x=w.getTypeOf(E);return x?(x==="arraybuffer"?E=w.transformTo("uint8array",E):x==="string"&&(y?E=s.decode(E):l&&p!==!0&&(E=function(R){return g(R,h.uint8array?new Uint8Array(R.length):new Array(R.length))}(E))),E):o.Promise.reject(new Error("Can't read the data of '"+n+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(i,I,w){var h=i("./reader/readerFor"),s=i("./utils"),e=i("./signature"),o=i("./zipEntry"),d=i("./support");function g(m){this.files=[],this.loadOptions=m}g.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(v)+", expected "+s.pretty(m)+")")}},isSignature:function(m,v){var a=this.reader.index;this.reader.setIndex(m);var _=this.reader.readString(4)===v;return this.reader.setIndex(a),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),v=d.uint8array?"uint8array":"array",a=s.transformTo(v,m);this.zipComment=this.loadOptions.decodeFileName(a)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,v,a,_=this.zip64EndOfCentralSize-44;0<_;)m=this.reader.readInt(2),v=this.reader.readInt(4),a=this.reader.readData(v),this.zip64ExtensibleData[m]={id:m,length:v,value:a}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,v;for(m=0;m<this.files.length;m++)v=this.files[m],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(e.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(e.CENTRAL_FILE_HEADER);)(m=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(e.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,e.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var v=m;if(this.checkSignature(e.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,e.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var a=this.centralDirOffset+this.centralDirSize;this.zip64&&(a+=20,a+=12+this.zip64EndOfCentralSize);var _=v-a;if(0<_)this.isSignature(v,e.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(m){this.reader=h(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},I.exports=g},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(i,I,w){var h=i("./reader/readerFor"),s=i("./utils"),e=i("./compressedObject"),o=i("./crc32"),d=i("./utf8"),g=i("./compressions"),m=i("./support");function v(a,_){this.options=a,this.loadOptions=_}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(a){var _,n;if(a.skip(22),this.fileNameLength=a.readInt(2),n=a.readInt(2),this.fileName=a.readData(this.fileNameLength),a.skip(n),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(f){for(var l in g)if(Object.prototype.hasOwnProperty.call(g,l)&&g[l].magic===f)return g[l];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new e(this.compressedSize,this.uncompressedSize,this.crc32,_,a.readData(this.compressedSize))},readCentralPart:function(a){this.versionMadeBy=a.readInt(2),a.skip(2),this.bitFlag=a.readInt(2),this.compressionMethod=a.readString(2),this.date=a.readDate(),this.crc32=a.readInt(4),this.compressedSize=a.readInt(4),this.uncompressedSize=a.readInt(4);var _=a.readInt(2);if(this.extraFieldsLength=a.readInt(2),this.fileCommentLength=a.readInt(2),this.diskNumberStart=a.readInt(2),this.internalFileAttributes=a.readInt(2),this.externalFileAttributes=a.readInt(4),this.localHeaderOffset=a.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");a.skip(_),this.readExtraFields(a),this.parseZIP64ExtraField(a),this.fileComment=a.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var a=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),a==0&&(this.dosPermissions=63&this.externalFileAttributes),a==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var a=h(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=a.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=a.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=a.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=a.readInt(4))}},readExtraFields:function(a){var _,n,f,l=a.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});a.index+4<l;)_=a.readInt(2),n=a.readInt(2),f=a.readData(n),this.extraFields[_]={id:_,length:n,value:f};a.setIndex(l)},handleUTF8:function(){var a=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var n=s.transformTo(a,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var f=this.findExtraFieldUnicodeComment();if(f!==null)this.fileCommentStr=f;else{var l=s.transformTo(a,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(l)}}},findExtraFieldUnicodePath:function(){var a=this.extraFields[28789];if(a){var _=h(a.value);return _.readInt(1)!==1||o(this.fileName)!==_.readInt(4)?null:d.utf8decode(_.readData(a.length-5))}return null},findExtraFieldUnicodeComment:function(){var a=this.extraFields[25461];if(a){var _=h(a.value);return _.readInt(1)!==1||o(this.fileComment)!==_.readInt(4)?null:d.utf8decode(_.readData(a.length-5))}return null}},I.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(i,I,w){function h(_,n,f){this.name=_,this.dir=f.dir,this.date=f.date,this.comment=f.comment,this.unixPermissions=f.unixPermissions,this.dosPermissions=f.dosPermissions,this._data=n,this._dataBinary=f.binary,this.options={compression:f.compression,compressionOptions:f.compressionOptions}}var s=i("./stream/StreamHelper"),e=i("./stream/DataWorker"),o=i("./utf8"),d=i("./compressedObject"),g=i("./stream/GenericWorker");h.prototype={internalStream:function(_){var n=null,f="string";try{if(!_)throw new Error("No output type specified.");var l=(f=_.toLowerCase())==="string"||f==="text";f!=="binarystring"&&f!=="text"||(f="string"),n=this._decompressWorker();var p=!this._dataBinary;p&&!l&&(n=n.pipe(new o.Utf8EncodeWorker)),!p&&l&&(n=n.pipe(new o.Utf8DecodeWorker))}catch(y){(n=new g("error")).error(y)}return new s(n,f,"")},async:function(_,n){return this.internalStream(_).accumulate(n)},nodeStream:function(_,n){return this.internalStream(_||"nodebuffer").toNodejsStream(n)},_compressWorker:function(_,n){if(this._data instanceof d&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var f=this._decompressWorker();return this._dataBinary||(f=f.pipe(new o.Utf8EncodeWorker)),d.createWorkerFrom(f,_,n)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof g?this._data:new e(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},a=0;a<m.length;a++)h.prototype[m[a]]=v;I.exports=h},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(i,I,w){(function(h){var s,e,o=h.MutationObserver||h.WebKitMutationObserver;if(o){var d=0,g=new o(_),m=h.document.createTextNode("");g.observe(m,{characterData:!0}),s=function(){m.data=d=++d%2}}else if(h.setImmediate||h.MessageChannel===void 0)s="document"in h&&"onreadystatechange"in h.document.createElement("script")?function(){var n=h.document.createElement("script");n.onreadystatechange=function(){_(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},h.document.documentElement.appendChild(n)}:function(){setTimeout(_,0)};else{var v=new h.MessageChannel;v.port1.onmessage=_,s=function(){v.port2.postMessage(0)}}var a=[];function _(){var n,f;e=!0;for(var l=a.length;l;){for(f=a,a=[],n=-1;++n<l;)f[n]();l=a.length}e=!1}I.exports=function(n){a.push(n)!==1||e||s()}}).call(this,typeof wr<"u"?wr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(i,I,w){var h=i("immediate");function s(){}var e={},o=["REJECTED"],d=["FULFILLED"],g=["PENDING"];function m(l){if(typeof l!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,l!==s&&n(this,l)}function v(l,p,y){this.promise=l,typeof p=="function"&&(this.onFulfilled=p,this.callFulfilled=this.otherCallFulfilled),typeof y=="function"&&(this.onRejected=y,this.callRejected=this.otherCallRejected)}function a(l,p,y){h(function(){var E;try{E=p(y)}catch(x){return e.reject(l,x)}E===l?e.reject(l,new TypeError("Cannot resolve promise with itself")):e.resolve(l,E)})}function _(l){var p=l&&l.then;if(l&&(typeof l=="object"||typeof l=="function")&&typeof p=="function")return function(){p.apply(l,arguments)}}function n(l,p){var y=!1;function E(P){y||(y=!0,e.reject(l,P))}function x(P){y||(y=!0,e.resolve(l,P))}var R=f(function(){p(x,E)});R.status==="error"&&E(R.value)}function f(l,p){var y={};try{y.value=l(p),y.status="success"}catch(E){y.status="error",y.value=E}return y}(I.exports=m).prototype.finally=function(l){if(typeof l!="function")return this;var p=this.constructor;return this.then(function(y){return p.resolve(l()).then(function(){return y})},function(y){return p.resolve(l()).then(function(){throw y})})},m.prototype.catch=function(l){return this.then(null,l)},m.prototype.then=function(l,p){if(typeof l!="function"&&this.state===d||typeof p!="function"&&this.state===o)return this;var y=new this.constructor(s);return this.state!==g?a(y,this.state===d?l:p,this.outcome):this.queue.push(new v(y,l,p)),y},v.prototype.callFulfilled=function(l){e.resolve(this.promise,l)},v.prototype.otherCallFulfilled=function(l){a(this.promise,this.onFulfilled,l)},v.prototype.callRejected=function(l){e.reject(this.promise,l)},v.prototype.otherCallRejected=function(l){a(this.promise,this.onRejected,l)},e.resolve=function(l,p){var y=f(_,p);if(y.status==="error")return e.reject(l,y.value);var E=y.value;if(E)n(l,E);else{l.state=d,l.outcome=p;for(var x=-1,R=l.queue.length;++x<R;)l.queue[x].callFulfilled(p)}return l},e.reject=function(l,p){l.state=o,l.outcome=p;for(var y=-1,E=l.queue.length;++y<E;)l.queue[y].callRejected(p);return l},m.resolve=function(l){return l instanceof this?l:e.resolve(new this(s),l)},m.reject=function(l){var p=new this(s);return e.reject(p,l)},m.all=function(l){var p=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=l.length,E=!1;if(!y)return this.resolve([]);for(var x=new Array(y),R=0,P=-1,j=new this(s);++P<y;)D(l[P],P);return j;function D(X,et){p.resolve(X).then(function(b){x[et]=b,++R!==y||E||(E=!0,e.resolve(j,x))},function(b){E||(E=!0,e.reject(j,b))})}},m.race=function(l){var p=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=l.length,E=!1;if(!y)return this.resolve([]);for(var x=-1,R=new this(s);++x<y;)P=l[x],p.resolve(P).then(function(j){E||(E=!0,e.resolve(R,j))},function(j){E||(E=!0,e.reject(R,j))});var P;return R}},{immediate:36}],38:[function(i,I,w){var h={};(0,i("./lib/utils/common").assign)(h,i("./lib/deflate"),i("./lib/inflate"),i("./lib/zlib/constants")),I.exports=h},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(i,I,w){var h=i("./zlib/deflate"),s=i("./utils/common"),e=i("./utils/strings"),o=i("./zlib/messages"),d=i("./zlib/zstream"),g=Object.prototype.toString,m=0,v=-1,a=0,_=8;function n(l){if(!(this instanceof n))return new n(l);this.options=s.assign({level:v,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:a,to:""},l||{});var p=this.options;p.raw&&0<p.windowBits?p.windowBits=-p.windowBits:p.gzip&&0<p.windowBits&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var y=h.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(y!==m)throw new Error(o[y]);if(p.header&&h.deflateSetHeader(this.strm,p.header),p.dictionary){var E;if(E=typeof p.dictionary=="string"?e.string2buf(p.dictionary):g.call(p.dictionary)==="[object ArrayBuffer]"?new Uint8Array(p.dictionary):p.dictionary,(y=h.deflateSetDictionary(this.strm,E))!==m)throw new Error(o[y]);this._dict_set=!0}}function f(l,p){var y=new n(p);if(y.push(l,!0),y.err)throw y.msg||o[y.err];return y.result}n.prototype.push=function(l,p){var y,E,x=this.strm,R=this.options.chunkSize;if(this.ended)return!1;E=p===~~p?p:p===!0?4:0,typeof l=="string"?x.input=e.string2buf(l):g.call(l)==="[object ArrayBuffer]"?x.input=new Uint8Array(l):x.input=l,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new s.Buf8(R),x.next_out=0,x.avail_out=R),(y=h.deflate(x,E))!==1&&y!==m)return this.onEnd(y),!(this.ended=!0);x.avail_out!==0&&(x.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(e.buf2binstring(s.shrinkBuf(x.output,x.next_out))):this.onData(s.shrinkBuf(x.output,x.next_out)))}while((0<x.avail_in||x.avail_out===0)&&y!==1);return E===4?(y=h.deflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===m):E!==2||(this.onEnd(m),!(x.avail_out=0))},n.prototype.onData=function(l){this.chunks.push(l)},n.prototype.onEnd=function(l){l===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=l,this.msg=this.strm.msg},w.Deflate=n,w.deflate=f,w.deflateRaw=function(l,p){return(p=p||{}).raw=!0,f(l,p)},w.gzip=function(l,p){return(p=p||{}).gzip=!0,f(l,p)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(i,I,w){var h=i("./zlib/inflate"),s=i("./utils/common"),e=i("./utils/strings"),o=i("./zlib/constants"),d=i("./zlib/messages"),g=i("./zlib/zstream"),m=i("./zlib/gzheader"),v=Object.prototype.toString;function a(n){if(!(this instanceof a))return new a(n);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},n||{});var f=this.options;f.raw&&0<=f.windowBits&&f.windowBits<16&&(f.windowBits=-f.windowBits,f.windowBits===0&&(f.windowBits=-15)),!(0<=f.windowBits&&f.windowBits<16)||n&&n.windowBits||(f.windowBits+=32),15<f.windowBits&&f.windowBits<48&&!(15&f.windowBits)&&(f.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var l=h.inflateInit2(this.strm,f.windowBits);if(l!==o.Z_OK)throw new Error(d[l]);this.header=new m,h.inflateGetHeader(this.strm,this.header)}function _(n,f){var l=new a(f);if(l.push(n,!0),l.err)throw l.msg||d[l.err];return l.result}a.prototype.push=function(n,f){var l,p,y,E,x,R,P=this.strm,j=this.options.chunkSize,D=this.options.dictionary,X=!1;if(this.ended)return!1;p=f===~~f?f:f===!0?o.Z_FINISH:o.Z_NO_FLUSH,typeof n=="string"?P.input=e.binstring2buf(n):v.call(n)==="[object ArrayBuffer]"?P.input=new Uint8Array(n):P.input=n,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new s.Buf8(j),P.next_out=0,P.avail_out=j),(l=h.inflate(P,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&D&&(R=typeof D=="string"?e.string2buf(D):v.call(D)==="[object ArrayBuffer]"?new Uint8Array(D):D,l=h.inflateSetDictionary(this.strm,R)),l===o.Z_BUF_ERROR&&X===!0&&(l=o.Z_OK,X=!1),l!==o.Z_STREAM_END&&l!==o.Z_OK)return this.onEnd(l),!(this.ended=!0);P.next_out&&(P.avail_out!==0&&l!==o.Z_STREAM_END&&(P.avail_in!==0||p!==o.Z_FINISH&&p!==o.Z_SYNC_FLUSH)||(this.options.to==="string"?(y=e.utf8border(P.output,P.next_out),E=P.next_out-y,x=e.buf2string(P.output,y),P.next_out=E,P.avail_out=j-E,E&&s.arraySet(P.output,P.output,y,E,0),this.onData(x)):this.onData(s.shrinkBuf(P.output,P.next_out)))),P.avail_in===0&&P.avail_out===0&&(X=!0)}while((0<P.avail_in||P.avail_out===0)&&l!==o.Z_STREAM_END);return l===o.Z_STREAM_END&&(p=o.Z_FINISH),p===o.Z_FINISH?(l=h.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===o.Z_OK):p!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(P.avail_out=0))},a.prototype.onData=function(n){this.chunks.push(n)},a.prototype.onEnd=function(n){n===o.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg},w.Inflate=a,w.inflate=_,w.inflateRaw=function(n,f){return(f=f||{}).raw=!0,_(n,f)},w.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(i,I,w){var h=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";w.assign=function(o){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var g=d.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(var m in g)g.hasOwnProperty(m)&&(o[m]=g[m])}}return o},w.shrinkBuf=function(o,d){return o.length===d?o:o.subarray?o.subarray(0,d):(o.length=d,o)};var s={arraySet:function(o,d,g,m,v){if(d.subarray&&o.subarray)o.set(d.subarray(g,g+m),v);else for(var a=0;a<m;a++)o[v+a]=d[g+a]},flattenChunks:function(o){var d,g,m,v,a,_;for(d=m=0,g=o.length;d<g;d++)m+=o[d].length;for(_=new Uint8Array(m),d=v=0,g=o.length;d<g;d++)a=o[d],_.set(a,v),v+=a.length;return _}},e={arraySet:function(o,d,g,m,v){for(var a=0;a<m;a++)o[v+a]=d[g+a]},flattenChunks:function(o){return[].concat.apply([],o)}};w.setTyped=function(o){o?(w.Buf8=Uint8Array,w.Buf16=Uint16Array,w.Buf32=Int32Array,w.assign(w,s)):(w.Buf8=Array,w.Buf16=Array,w.Buf32=Array,w.assign(w,e))},w.setTyped(h)},{}],42:[function(i,I,w){var h=i("./common"),s=!0,e=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{e=!1}for(var o=new h.Buf8(256),d=0;d<256;d++)o[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function g(m,v){if(v<65537&&(m.subarray&&e||!m.subarray&&s))return String.fromCharCode.apply(null,h.shrinkBuf(m,v));for(var a="",_=0;_<v;_++)a+=String.fromCharCode(m[_]);return a}o[254]=o[254]=1,w.string2buf=function(m){var v,a,_,n,f,l=m.length,p=0;for(n=0;n<l;n++)(64512&(a=m.charCodeAt(n)))==55296&&n+1<l&&(64512&(_=m.charCodeAt(n+1)))==56320&&(a=65536+(a-55296<<10)+(_-56320),n++),p+=a<128?1:a<2048?2:a<65536?3:4;for(v=new h.Buf8(p),n=f=0;f<p;n++)(64512&(a=m.charCodeAt(n)))==55296&&n+1<l&&(64512&(_=m.charCodeAt(n+1)))==56320&&(a=65536+(a-55296<<10)+(_-56320),n++),a<128?v[f++]=a:(a<2048?v[f++]=192|a>>>6:(a<65536?v[f++]=224|a>>>12:(v[f++]=240|a>>>18,v[f++]=128|a>>>12&63),v[f++]=128|a>>>6&63),v[f++]=128|63&a);return v},w.buf2binstring=function(m){return g(m,m.length)},w.binstring2buf=function(m){for(var v=new h.Buf8(m.length),a=0,_=v.length;a<_;a++)v[a]=m.charCodeAt(a);return v},w.buf2string=function(m,v){var a,_,n,f,l=v||m.length,p=new Array(2*l);for(a=_=0;a<l;)if((n=m[a++])<128)p[_++]=n;else if(4<(f=o[n]))p[_++]=65533,a+=f-1;else{for(n&=f===2?31:f===3?15:7;1<f&&a<l;)n=n<<6|63&m[a++],f--;1<f?p[_++]=65533:n<65536?p[_++]=n:(n-=65536,p[_++]=55296|n>>10&1023,p[_++]=56320|1023&n)}return g(p,_)},w.utf8border=function(m,v){var a;for((v=v||m.length)>m.length&&(v=m.length),a=v-1;0<=a&&(192&m[a])==128;)a--;return a<0||a===0?v:a+o[m[a]]>v?a:v}},{"./common":41}],43:[function(i,I,w){I.exports=function(h,s,e,o){for(var d=65535&h|0,g=h>>>16&65535|0,m=0;e!==0;){for(e-=m=2e3<e?2e3:e;g=g+(d=d+s[o++]|0)|0,--m;);d%=65521,g%=65521}return d|g<<16|0}},{}],44:[function(i,I,w){I.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(i,I,w){var h=function(){for(var s,e=[],o=0;o<256;o++){s=o;for(var d=0;d<8;d++)s=1&s?3988292384^s>>>1:s>>>1;e[o]=s}return e}();I.exports=function(s,e,o,d){var g=h,m=d+o;s^=-1;for(var v=d;v<m;v++)s=s>>>8^g[255&(s^e[v])];return-1^s}},{}],46:[function(i,I,w){var h,s=i("../utils/common"),e=i("./trees"),o=i("./adler32"),d=i("./crc32"),g=i("./messages"),m=0,v=4,a=0,_=-2,n=-1,f=4,l=2,p=8,y=9,E=286,x=30,R=19,P=2*E+1,j=15,D=3,X=258,et=X+D+1,b=42,L=113,r=1,U=2,nt=3,Z=4;function lt(t,B){return t.msg=g[B],B}function M(t){return(t<<1)-(4<t?9:0)}function it(t){for(var B=t.length;0<=--B;)t[B]=0}function A(t){var B=t.state,z=B.pending;z>t.avail_out&&(z=t.avail_out),z!==0&&(s.arraySet(t.output,B.pending_buf,B.pending_out,z,t.next_out),t.next_out+=z,B.pending_out+=z,t.total_out+=z,t.avail_out-=z,B.pending-=z,B.pending===0&&(B.pending_out=0))}function S(t,B){e._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,B),t.block_start=t.strstart,A(t.strm)}function Q(t,B){t.pending_buf[t.pending++]=B}function $(t,B){t.pending_buf[t.pending++]=B>>>8&255,t.pending_buf[t.pending++]=255&B}function H(t,B){var z,c,u=t.max_chain_length,k=t.strstart,N=t.prev_length,F=t.nice_match,C=t.strstart>t.w_size-et?t.strstart-(t.w_size-et):0,W=t.window,J=t.w_mask,G=t.prev,tt=t.strstart+X,mt=W[k+N-1],dt=W[k+N];t.prev_length>=t.good_match&&(u>>=2),F>t.lookahead&&(F=t.lookahead);do if(W[(z=B)+N]===dt&&W[z+N-1]===mt&&W[z]===W[k]&&W[++z]===W[k+1]){k+=2,z++;do;while(W[++k]===W[++z]&&W[++k]===W[++z]&&W[++k]===W[++z]&&W[++k]===W[++z]&&W[++k]===W[++z]&&W[++k]===W[++z]&&W[++k]===W[++z]&&W[++k]===W[++z]&&k<tt);if(c=X-(tt-k),k=tt-X,N<c){if(t.match_start=B,F<=(N=c))break;mt=W[k+N-1],dt=W[k+N]}}while((B=G[B&J])>C&&--u!=0);return N<=t.lookahead?N:t.lookahead}function kt(t){var B,z,c,u,k,N,F,C,W,J,G=t.w_size;do{if(u=t.window_size-t.lookahead-t.strstart,t.strstart>=G+(G-et)){for(s.arraySet(t.window,t.window,G,G,0),t.match_start-=G,t.strstart-=G,t.block_start-=G,B=z=t.hash_size;c=t.head[--B],t.head[B]=G<=c?c-G:0,--z;);for(B=z=G;c=t.prev[--B],t.prev[B]=G<=c?c-G:0,--z;);u+=G}if(t.strm.avail_in===0)break;if(N=t.strm,F=t.window,C=t.strstart+t.lookahead,W=u,J=void 0,J=N.avail_in,W<J&&(J=W),z=J===0?0:(N.avail_in-=J,s.arraySet(F,N.input,N.next_in,J,C),N.state.wrap===1?N.adler=o(N.adler,F,J,C):N.state.wrap===2&&(N.adler=d(N.adler,F,J,C)),N.next_in+=J,N.total_in+=J,J),t.lookahead+=z,t.lookahead+t.insert>=D)for(k=t.strstart-t.insert,t.ins_h=t.window[k],t.ins_h=(t.ins_h<<t.hash_shift^t.window[k+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[k+D-1])&t.hash_mask,t.prev[k&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=k,k++,t.insert--,!(t.lookahead+t.insert<D)););}while(t.lookahead<et&&t.strm.avail_in!==0)}function _t(t,B){for(var z,c;;){if(t.lookahead<et){if(kt(t),t.lookahead<et&&B===m)return r;if(t.lookahead===0)break}if(z=0,t.lookahead>=D&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+D-1])&t.hash_mask,z=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),z!==0&&t.strstart-z<=t.w_size-et&&(t.match_length=H(t,z)),t.match_length>=D)if(c=e._tr_tally(t,t.strstart-t.match_start,t.match_length-D),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=D){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+D-1])&t.hash_mask,z=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else c=e._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(c&&(S(t,!1),t.strm.avail_out===0))return r}return t.insert=t.strstart<D-1?t.strstart:D-1,B===v?(S(t,!0),t.strm.avail_out===0?nt:Z):t.last_lit&&(S(t,!1),t.strm.avail_out===0)?r:U}function st(t,B){for(var z,c,u;;){if(t.lookahead<et){if(kt(t),t.lookahead<et&&B===m)return r;if(t.lookahead===0)break}if(z=0,t.lookahead>=D&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+D-1])&t.hash_mask,z=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=D-1,z!==0&&t.prev_length<t.max_lazy_match&&t.strstart-z<=t.w_size-et&&(t.match_length=H(t,z),t.match_length<=5&&(t.strategy===1||t.match_length===D&&4096<t.strstart-t.match_start)&&(t.match_length=D-1)),t.prev_length>=D&&t.match_length<=t.prev_length){for(u=t.strstart+t.lookahead-D,c=e._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-D),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=u&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+D-1])&t.hash_mask,z=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=D-1,t.strstart++,c&&(S(t,!1),t.strm.avail_out===0))return r}else if(t.match_available){if((c=e._tr_tally(t,0,t.window[t.strstart-1]))&&S(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return r}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(c=e._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<D-1?t.strstart:D-1,B===v?(S(t,!0),t.strm.avail_out===0?nt:Z):t.last_lit&&(S(t,!1),t.strm.avail_out===0)?r:U}function ft(t,B,z,c,u){this.good_length=t,this.max_lazy=B,this.nice_length=z,this.max_chain=c,this.func=u}function Et(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=p,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*P),this.dyn_dtree=new s.Buf16(2*(2*x+1)),this.bl_tree=new s.Buf16(2*(2*R+1)),it(this.dyn_ltree),it(this.dyn_dtree),it(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(j+1),this.heap=new s.Buf16(2*E+1),it(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*E+1),it(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function xt(t){var B;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=l,(B=t.state).pending=0,B.pending_out=0,B.wrap<0&&(B.wrap=-B.wrap),B.status=B.wrap?b:L,t.adler=B.wrap===2?0:1,B.last_flush=m,e._tr_init(B),a):lt(t,_)}function pt(t){var B=xt(t);return B===a&&function(z){z.window_size=2*z.w_size,it(z.head),z.max_lazy_match=h[z.level].max_lazy,z.good_match=h[z.level].good_length,z.nice_match=h[z.level].nice_length,z.max_chain_length=h[z.level].max_chain,z.strstart=0,z.block_start=0,z.lookahead=0,z.insert=0,z.match_length=z.prev_length=D-1,z.match_available=0,z.ins_h=0}(t.state),B}function wt(t,B,z,c,u,k){if(!t)return _;var N=1;if(B===n&&(B=6),c<0?(N=0,c=-c):15<c&&(N=2,c-=16),u<1||y<u||z!==p||c<8||15<c||B<0||9<B||k<0||f<k)return lt(t,_);c===8&&(c=9);var F=new Et;return(t.state=F).strm=t,F.wrap=N,F.gzhead=null,F.w_bits=c,F.w_size=1<<F.w_bits,F.w_mask=F.w_size-1,F.hash_bits=u+7,F.hash_size=1<<F.hash_bits,F.hash_mask=F.hash_size-1,F.hash_shift=~~((F.hash_bits+D-1)/D),F.window=new s.Buf8(2*F.w_size),F.head=new s.Buf16(F.hash_size),F.prev=new s.Buf16(F.w_size),F.lit_bufsize=1<<u+6,F.pending_buf_size=4*F.lit_bufsize,F.pending_buf=new s.Buf8(F.pending_buf_size),F.d_buf=1*F.lit_bufsize,F.l_buf=3*F.lit_bufsize,F.level=B,F.strategy=k,F.method=z,pt(t)}h=[new ft(0,0,0,0,function(t,B){var z=65535;for(z>t.pending_buf_size-5&&(z=t.pending_buf_size-5);;){if(t.lookahead<=1){if(kt(t),t.lookahead===0&&B===m)return r;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var c=t.block_start+z;if((t.strstart===0||t.strstart>=c)&&(t.lookahead=t.strstart-c,t.strstart=c,S(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-et&&(S(t,!1),t.strm.avail_out===0))return r}return t.insert=0,B===v?(S(t,!0),t.strm.avail_out===0?nt:Z):(t.strstart>t.block_start&&(S(t,!1),t.strm.avail_out),r)}),new ft(4,4,8,4,_t),new ft(4,5,16,8,_t),new ft(4,6,32,32,_t),new ft(4,4,16,16,st),new ft(8,16,32,32,st),new ft(8,16,128,128,st),new ft(8,32,128,256,st),new ft(32,128,258,1024,st),new ft(32,258,258,4096,st)],w.deflateInit=function(t,B){return wt(t,B,p,15,8,0)},w.deflateInit2=wt,w.deflateReset=pt,w.deflateResetKeep=xt,w.deflateSetHeader=function(t,B){return t&&t.state?t.state.wrap!==2?_:(t.state.gzhead=B,a):_},w.deflate=function(t,B){var z,c,u,k;if(!t||!t.state||5<B||B<0)return t?lt(t,_):_;if(c=t.state,!t.output||!t.input&&t.avail_in!==0||c.status===666&&B!==v)return lt(t,t.avail_out===0?-5:_);if(c.strm=t,z=c.last_flush,c.last_flush=B,c.status===b)if(c.wrap===2)t.adler=0,Q(c,31),Q(c,139),Q(c,8),c.gzhead?(Q(c,(c.gzhead.text?1:0)+(c.gzhead.hcrc?2:0)+(c.gzhead.extra?4:0)+(c.gzhead.name?8:0)+(c.gzhead.comment?16:0)),Q(c,255&c.gzhead.time),Q(c,c.gzhead.time>>8&255),Q(c,c.gzhead.time>>16&255),Q(c,c.gzhead.time>>24&255),Q(c,c.level===9?2:2<=c.strategy||c.level<2?4:0),Q(c,255&c.gzhead.os),c.gzhead.extra&&c.gzhead.extra.length&&(Q(c,255&c.gzhead.extra.length),Q(c,c.gzhead.extra.length>>8&255)),c.gzhead.hcrc&&(t.adler=d(t.adler,c.pending_buf,c.pending,0)),c.gzindex=0,c.status=69):(Q(c,0),Q(c,0),Q(c,0),Q(c,0),Q(c,0),Q(c,c.level===9?2:2<=c.strategy||c.level<2?4:0),Q(c,3),c.status=L);else{var N=p+(c.w_bits-8<<4)<<8;N|=(2<=c.strategy||c.level<2?0:c.level<6?1:c.level===6?2:3)<<6,c.strstart!==0&&(N|=32),N+=31-N%31,c.status=L,$(c,N),c.strstart!==0&&($(c,t.adler>>>16),$(c,65535&t.adler)),t.adler=1}if(c.status===69)if(c.gzhead.extra){for(u=c.pending;c.gzindex<(65535&c.gzhead.extra.length)&&(c.pending!==c.pending_buf_size||(c.gzhead.hcrc&&c.pending>u&&(t.adler=d(t.adler,c.pending_buf,c.pending-u,u)),A(t),u=c.pending,c.pending!==c.pending_buf_size));)Q(c,255&c.gzhead.extra[c.gzindex]),c.gzindex++;c.gzhead.hcrc&&c.pending>u&&(t.adler=d(t.adler,c.pending_buf,c.pending-u,u)),c.gzindex===c.gzhead.extra.length&&(c.gzindex=0,c.status=73)}else c.status=73;if(c.status===73)if(c.gzhead.name){u=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>u&&(t.adler=d(t.adler,c.pending_buf,c.pending-u,u)),A(t),u=c.pending,c.pending===c.pending_buf_size)){k=1;break}k=c.gzindex<c.gzhead.name.length?255&c.gzhead.name.charCodeAt(c.gzindex++):0,Q(c,k)}while(k!==0);c.gzhead.hcrc&&c.pending>u&&(t.adler=d(t.adler,c.pending_buf,c.pending-u,u)),k===0&&(c.gzindex=0,c.status=91)}else c.status=91;if(c.status===91)if(c.gzhead.comment){u=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>u&&(t.adler=d(t.adler,c.pending_buf,c.pending-u,u)),A(t),u=c.pending,c.pending===c.pending_buf_size)){k=1;break}k=c.gzindex<c.gzhead.comment.length?255&c.gzhead.comment.charCodeAt(c.gzindex++):0,Q(c,k)}while(k!==0);c.gzhead.hcrc&&c.pending>u&&(t.adler=d(t.adler,c.pending_buf,c.pending-u,u)),k===0&&(c.status=103)}else c.status=103;if(c.status===103&&(c.gzhead.hcrc?(c.pending+2>c.pending_buf_size&&A(t),c.pending+2<=c.pending_buf_size&&(Q(c,255&t.adler),Q(c,t.adler>>8&255),t.adler=0,c.status=L)):c.status=L),c.pending!==0){if(A(t),t.avail_out===0)return c.last_flush=-1,a}else if(t.avail_in===0&&M(B)<=M(z)&&B!==v)return lt(t,-5);if(c.status===666&&t.avail_in!==0)return lt(t,-5);if(t.avail_in!==0||c.lookahead!==0||B!==m&&c.status!==666){var F=c.strategy===2?function(C,W){for(var J;;){if(C.lookahead===0&&(kt(C),C.lookahead===0)){if(W===m)return r;break}if(C.match_length=0,J=e._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++,J&&(S(C,!1),C.strm.avail_out===0))return r}return C.insert=0,W===v?(S(C,!0),C.strm.avail_out===0?nt:Z):C.last_lit&&(S(C,!1),C.strm.avail_out===0)?r:U}(c,B):c.strategy===3?function(C,W){for(var J,G,tt,mt,dt=C.window;;){if(C.lookahead<=X){if(kt(C),C.lookahead<=X&&W===m)return r;if(C.lookahead===0)break}if(C.match_length=0,C.lookahead>=D&&0<C.strstart&&(G=dt[tt=C.strstart-1])===dt[++tt]&&G===dt[++tt]&&G===dt[++tt]){mt=C.strstart+X;do;while(G===dt[++tt]&&G===dt[++tt]&&G===dt[++tt]&&G===dt[++tt]&&G===dt[++tt]&&G===dt[++tt]&&G===dt[++tt]&&G===dt[++tt]&&tt<mt);C.match_length=X-(mt-tt),C.match_length>C.lookahead&&(C.match_length=C.lookahead)}if(C.match_length>=D?(J=e._tr_tally(C,1,C.match_length-D),C.lookahead-=C.match_length,C.strstart+=C.match_length,C.match_length=0):(J=e._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++),J&&(S(C,!1),C.strm.avail_out===0))return r}return C.insert=0,W===v?(S(C,!0),C.strm.avail_out===0?nt:Z):C.last_lit&&(S(C,!1),C.strm.avail_out===0)?r:U}(c,B):h[c.level].func(c,B);if(F!==nt&&F!==Z||(c.status=666),F===r||F===nt)return t.avail_out===0&&(c.last_flush=-1),a;if(F===U&&(B===1?e._tr_align(c):B!==5&&(e._tr_stored_block(c,0,0,!1),B===3&&(it(c.head),c.lookahead===0&&(c.strstart=0,c.block_start=0,c.insert=0))),A(t),t.avail_out===0))return c.last_flush=-1,a}return B!==v?a:c.wrap<=0?1:(c.wrap===2?(Q(c,255&t.adler),Q(c,t.adler>>8&255),Q(c,t.adler>>16&255),Q(c,t.adler>>24&255),Q(c,255&t.total_in),Q(c,t.total_in>>8&255),Q(c,t.total_in>>16&255),Q(c,t.total_in>>24&255)):($(c,t.adler>>>16),$(c,65535&t.adler)),A(t),0<c.wrap&&(c.wrap=-c.wrap),c.pending!==0?a:1)},w.deflateEnd=function(t){var B;return t&&t.state?(B=t.state.status)!==b&&B!==69&&B!==73&&B!==91&&B!==103&&B!==L&&B!==666?lt(t,_):(t.state=null,B===L?lt(t,-3):a):_},w.deflateSetDictionary=function(t,B){var z,c,u,k,N,F,C,W,J=B.length;if(!t||!t.state||(k=(z=t.state).wrap)===2||k===1&&z.status!==b||z.lookahead)return _;for(k===1&&(t.adler=o(t.adler,B,J,0)),z.wrap=0,J>=z.w_size&&(k===0&&(it(z.head),z.strstart=0,z.block_start=0,z.insert=0),W=new s.Buf8(z.w_size),s.arraySet(W,B,J-z.w_size,z.w_size,0),B=W,J=z.w_size),N=t.avail_in,F=t.next_in,C=t.input,t.avail_in=J,t.next_in=0,t.input=B,kt(z);z.lookahead>=D;){for(c=z.strstart,u=z.lookahead-(D-1);z.ins_h=(z.ins_h<<z.hash_shift^z.window[c+D-1])&z.hash_mask,z.prev[c&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=c,c++,--u;);z.strstart=c,z.lookahead=D-1,kt(z)}return z.strstart+=z.lookahead,z.block_start=z.strstart,z.insert=z.lookahead,z.lookahead=0,z.match_length=z.prev_length=D-1,z.match_available=0,t.next_in=F,t.input=C,t.avail_in=N,z.wrap=k,a},w.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(i,I,w){I.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(i,I,w){I.exports=function(h,s){var e,o,d,g,m,v,a,_,n,f,l,p,y,E,x,R,P,j,D,X,et,b,L,r,U;e=h.state,o=h.next_in,r=h.input,d=o+(h.avail_in-5),g=h.next_out,U=h.output,m=g-(s-h.avail_out),v=g+(h.avail_out-257),a=e.dmax,_=e.wsize,n=e.whave,f=e.wnext,l=e.window,p=e.hold,y=e.bits,E=e.lencode,x=e.distcode,R=(1<<e.lenbits)-1,P=(1<<e.distbits)-1;t:do{y<15&&(p+=r[o++]<<y,y+=8,p+=r[o++]<<y,y+=8),j=E[p&R];e:for(;;){if(p>>>=D=j>>>24,y-=D,(D=j>>>16&255)===0)U[g++]=65535&j;else{if(!(16&D)){if(!(64&D)){j=E[(65535&j)+(p&(1<<D)-1)];continue e}if(32&D){e.mode=12;break t}h.msg="invalid literal/length code",e.mode=30;break t}X=65535&j,(D&=15)&&(y<D&&(p+=r[o++]<<y,y+=8),X+=p&(1<<D)-1,p>>>=D,y-=D),y<15&&(p+=r[o++]<<y,y+=8,p+=r[o++]<<y,y+=8),j=x[p&P];r:for(;;){if(p>>>=D=j>>>24,y-=D,!(16&(D=j>>>16&255))){if(!(64&D)){j=x[(65535&j)+(p&(1<<D)-1)];continue r}h.msg="invalid distance code",e.mode=30;break t}if(et=65535&j,y<(D&=15)&&(p+=r[o++]<<y,(y+=8)<D&&(p+=r[o++]<<y,y+=8)),a<(et+=p&(1<<D)-1)){h.msg="invalid distance too far back",e.mode=30;break t}if(p>>>=D,y-=D,(D=g-m)<et){if(n<(D=et-D)&&e.sane){h.msg="invalid distance too far back",e.mode=30;break t}if(L=l,(b=0)===f){if(b+=_-D,D<X){for(X-=D;U[g++]=l[b++],--D;);b=g-et,L=U}}else if(f<D){if(b+=_+f-D,(D-=f)<X){for(X-=D;U[g++]=l[b++],--D;);if(b=0,f<X){for(X-=D=f;U[g++]=l[b++],--D;);b=g-et,L=U}}}else if(b+=f-D,D<X){for(X-=D;U[g++]=l[b++],--D;);b=g-et,L=U}for(;2<X;)U[g++]=L[b++],U[g++]=L[b++],U[g++]=L[b++],X-=3;X&&(U[g++]=L[b++],1<X&&(U[g++]=L[b++]))}else{for(b=g-et;U[g++]=U[b++],U[g++]=U[b++],U[g++]=U[b++],2<(X-=3););X&&(U[g++]=U[b++],1<X&&(U[g++]=U[b++]))}break}}break}}while(o<d&&g<v);o-=X=y>>3,p&=(1<<(y-=X<<3))-1,h.next_in=o,h.next_out=g,h.avail_in=o<d?d-o+5:5-(o-d),h.avail_out=g<v?v-g+257:257-(g-v),e.hold=p,e.bits=y}},{}],49:[function(i,I,w){var h=i("../utils/common"),s=i("./adler32"),e=i("./crc32"),o=i("./inffast"),d=i("./inftrees"),g=1,m=2,v=0,a=-2,_=1,n=852,f=592;function l(b){return(b>>>24&255)+(b>>>8&65280)+((65280&b)<<8)+((255&b)<<24)}function p(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new h.Buf16(320),this.work=new h.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(b){var L;return b&&b.state?(L=b.state,b.total_in=b.total_out=L.total=0,b.msg="",L.wrap&&(b.adler=1&L.wrap),L.mode=_,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new h.Buf32(n),L.distcode=L.distdyn=new h.Buf32(f),L.sane=1,L.back=-1,v):a}function E(b){var L;return b&&b.state?((L=b.state).wsize=0,L.whave=0,L.wnext=0,y(b)):a}function x(b,L){var r,U;return b&&b.state?(U=b.state,L<0?(r=0,L=-L):(r=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?a:(U.window!==null&&U.wbits!==L&&(U.window=null),U.wrap=r,U.wbits=L,E(b))):a}function R(b,L){var r,U;return b?(U=new p,(b.state=U).window=null,(r=x(b,L))!==v&&(b.state=null),r):a}var P,j,D=!0;function X(b){if(D){var L;for(P=new h.Buf32(512),j=new h.Buf32(32),L=0;L<144;)b.lens[L++]=8;for(;L<256;)b.lens[L++]=9;for(;L<280;)b.lens[L++]=7;for(;L<288;)b.lens[L++]=8;for(d(g,b.lens,0,288,P,0,b.work,{bits:9}),L=0;L<32;)b.lens[L++]=5;d(m,b.lens,0,32,j,0,b.work,{bits:5}),D=!1}b.lencode=P,b.lenbits=9,b.distcode=j,b.distbits=5}function et(b,L,r,U){var nt,Z=b.state;return Z.window===null&&(Z.wsize=1<<Z.wbits,Z.wnext=0,Z.whave=0,Z.window=new h.Buf8(Z.wsize)),U>=Z.wsize?(h.arraySet(Z.window,L,r-Z.wsize,Z.wsize,0),Z.wnext=0,Z.whave=Z.wsize):(U<(nt=Z.wsize-Z.wnext)&&(nt=U),h.arraySet(Z.window,L,r-U,nt,Z.wnext),(U-=nt)?(h.arraySet(Z.window,L,r-U,U,0),Z.wnext=U,Z.whave=Z.wsize):(Z.wnext+=nt,Z.wnext===Z.wsize&&(Z.wnext=0),Z.whave<Z.wsize&&(Z.whave+=nt))),0}w.inflateReset=E,w.inflateReset2=x,w.inflateResetKeep=y,w.inflateInit=function(b){return R(b,15)},w.inflateInit2=R,w.inflate=function(b,L){var r,U,nt,Z,lt,M,it,A,S,Q,$,H,kt,_t,st,ft,Et,xt,pt,wt,t,B,z,c,u=0,k=new h.Buf8(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!b||!b.state||!b.output||!b.input&&b.avail_in!==0)return a;(r=b.state).mode===12&&(r.mode=13),lt=b.next_out,nt=b.output,it=b.avail_out,Z=b.next_in,U=b.input,M=b.avail_in,A=r.hold,S=r.bits,Q=M,$=it,B=v;t:for(;;)switch(r.mode){case _:if(r.wrap===0){r.mode=13;break}for(;S<16;){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}if(2&r.wrap&&A===35615){k[r.check=0]=255&A,k[1]=A>>>8&255,r.check=e(r.check,k,2,0),S=A=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&A)<<8)+(A>>8))%31){b.msg="incorrect header check",r.mode=30;break}if((15&A)!=8){b.msg="unknown compression method",r.mode=30;break}if(S-=4,t=8+(15&(A>>>=4)),r.wbits===0)r.wbits=t;else if(t>r.wbits){b.msg="invalid window size",r.mode=30;break}r.dmax=1<<t,b.adler=r.check=1,r.mode=512&A?10:12,S=A=0;break;case 2:for(;S<16;){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}if(r.flags=A,(255&r.flags)!=8){b.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){b.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=A>>8&1),512&r.flags&&(k[0]=255&A,k[1]=A>>>8&255,r.check=e(r.check,k,2,0)),S=A=0,r.mode=3;case 3:for(;S<32;){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}r.head&&(r.head.time=A),512&r.flags&&(k[0]=255&A,k[1]=A>>>8&255,k[2]=A>>>16&255,k[3]=A>>>24&255,r.check=e(r.check,k,4,0)),S=A=0,r.mode=4;case 4:for(;S<16;){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}r.head&&(r.head.xflags=255&A,r.head.os=A>>8),512&r.flags&&(k[0]=255&A,k[1]=A>>>8&255,r.check=e(r.check,k,2,0)),S=A=0,r.mode=5;case 5:if(1024&r.flags){for(;S<16;){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}r.length=A,r.head&&(r.head.extra_len=A),512&r.flags&&(k[0]=255&A,k[1]=A>>>8&255,r.check=e(r.check,k,2,0)),S=A=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(M<(H=r.length)&&(H=M),H&&(r.head&&(t=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),h.arraySet(r.head.extra,U,Z,H,t)),512&r.flags&&(r.check=e(r.check,U,H,Z)),M-=H,Z+=H,r.length-=H),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(M===0)break t;for(H=0;t=U[Z+H++],r.head&&t&&r.length<65536&&(r.head.name+=String.fromCharCode(t)),t&&H<M;);if(512&r.flags&&(r.check=e(r.check,U,H,Z)),M-=H,Z+=H,t)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(M===0)break t;for(H=0;t=U[Z+H++],r.head&&t&&r.length<65536&&(r.head.comment+=String.fromCharCode(t)),t&&H<M;);if(512&r.flags&&(r.check=e(r.check,U,H,Z)),M-=H,Z+=H,t)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;S<16;){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}if(A!==(65535&r.check)){b.msg="header crc mismatch",r.mode=30;break}S=A=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),b.adler=r.check=0,r.mode=12;break;case 10:for(;S<32;){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}b.adler=r.check=l(A),S=A=0,r.mode=11;case 11:if(r.havedict===0)return b.next_out=lt,b.avail_out=it,b.next_in=Z,b.avail_in=M,r.hold=A,r.bits=S,2;b.adler=r.check=1,r.mode=12;case 12:if(L===5||L===6)break t;case 13:if(r.last){A>>>=7&S,S-=7&S,r.mode=27;break}for(;S<3;){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}switch(r.last=1&A,S-=1,3&(A>>>=1)){case 0:r.mode=14;break;case 1:if(X(r),r.mode=20,L!==6)break;A>>>=2,S-=2;break t;case 2:r.mode=17;break;case 3:b.msg="invalid block type",r.mode=30}A>>>=2,S-=2;break;case 14:for(A>>>=7&S,S-=7&S;S<32;){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}if((65535&A)!=(A>>>16^65535)){b.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&A,S=A=0,r.mode=15,L===6)break t;case 15:r.mode=16;case 16:if(H=r.length){if(M<H&&(H=M),it<H&&(H=it),H===0)break t;h.arraySet(nt,U,Z,H,lt),M-=H,Z+=H,it-=H,lt+=H,r.length-=H;break}r.mode=12;break;case 17:for(;S<14;){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}if(r.nlen=257+(31&A),A>>>=5,S-=5,r.ndist=1+(31&A),A>>>=5,S-=5,r.ncode=4+(15&A),A>>>=4,S-=4,286<r.nlen||30<r.ndist){b.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;S<3;){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}r.lens[N[r.have++]]=7&A,A>>>=3,S-=3}for(;r.have<19;)r.lens[N[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,z={bits:r.lenbits},B=d(0,r.lens,0,19,r.lencode,0,r.work,z),r.lenbits=z.bits,B){b.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;ft=(u=r.lencode[A&(1<<r.lenbits)-1])>>>16&255,Et=65535&u,!((st=u>>>24)<=S);){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}if(Et<16)A>>>=st,S-=st,r.lens[r.have++]=Et;else{if(Et===16){for(c=st+2;S<c;){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}if(A>>>=st,S-=st,r.have===0){b.msg="invalid bit length repeat",r.mode=30;break}t=r.lens[r.have-1],H=3+(3&A),A>>>=2,S-=2}else if(Et===17){for(c=st+3;S<c;){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}S-=st,t=0,H=3+(7&(A>>>=st)),A>>>=3,S-=3}else{for(c=st+7;S<c;){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}S-=st,t=0,H=11+(127&(A>>>=st)),A>>>=7,S-=7}if(r.have+H>r.nlen+r.ndist){b.msg="invalid bit length repeat",r.mode=30;break}for(;H--;)r.lens[r.have++]=t}}if(r.mode===30)break;if(r.lens[256]===0){b.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,z={bits:r.lenbits},B=d(g,r.lens,0,r.nlen,r.lencode,0,r.work,z),r.lenbits=z.bits,B){b.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,z={bits:r.distbits},B=d(m,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,z),r.distbits=z.bits,B){b.msg="invalid distances set",r.mode=30;break}if(r.mode=20,L===6)break t;case 20:r.mode=21;case 21:if(6<=M&&258<=it){b.next_out=lt,b.avail_out=it,b.next_in=Z,b.avail_in=M,r.hold=A,r.bits=S,o(b,$),lt=b.next_out,nt=b.output,it=b.avail_out,Z=b.next_in,U=b.input,M=b.avail_in,A=r.hold,S=r.bits,r.mode===12&&(r.back=-1);break}for(r.back=0;ft=(u=r.lencode[A&(1<<r.lenbits)-1])>>>16&255,Et=65535&u,!((st=u>>>24)<=S);){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}if(ft&&!(240&ft)){for(xt=st,pt=ft,wt=Et;ft=(u=r.lencode[wt+((A&(1<<xt+pt)-1)>>xt)])>>>16&255,Et=65535&u,!(xt+(st=u>>>24)<=S);){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}A>>>=xt,S-=xt,r.back+=xt}if(A>>>=st,S-=st,r.back+=st,r.length=Et,ft===0){r.mode=26;break}if(32&ft){r.back=-1,r.mode=12;break}if(64&ft){b.msg="invalid literal/length code",r.mode=30;break}r.extra=15&ft,r.mode=22;case 22:if(r.extra){for(c=r.extra;S<c;){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}r.length+=A&(1<<r.extra)-1,A>>>=r.extra,S-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;ft=(u=r.distcode[A&(1<<r.distbits)-1])>>>16&255,Et=65535&u,!((st=u>>>24)<=S);){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}if(!(240&ft)){for(xt=st,pt=ft,wt=Et;ft=(u=r.distcode[wt+((A&(1<<xt+pt)-1)>>xt)])>>>16&255,Et=65535&u,!(xt+(st=u>>>24)<=S);){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}A>>>=xt,S-=xt,r.back+=xt}if(A>>>=st,S-=st,r.back+=st,64&ft){b.msg="invalid distance code",r.mode=30;break}r.offset=Et,r.extra=15&ft,r.mode=24;case 24:if(r.extra){for(c=r.extra;S<c;){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}r.offset+=A&(1<<r.extra)-1,A>>>=r.extra,S-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){b.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(it===0)break t;if(H=$-it,r.offset>H){if((H=r.offset-H)>r.whave&&r.sane){b.msg="invalid distance too far back",r.mode=30;break}kt=H>r.wnext?(H-=r.wnext,r.wsize-H):r.wnext-H,H>r.length&&(H=r.length),_t=r.window}else _t=nt,kt=lt-r.offset,H=r.length;for(it<H&&(H=it),it-=H,r.length-=H;nt[lt++]=_t[kt++],--H;);r.length===0&&(r.mode=21);break;case 26:if(it===0)break t;nt[lt++]=r.length,it--,r.mode=21;break;case 27:if(r.wrap){for(;S<32;){if(M===0)break t;M--,A|=U[Z++]<<S,S+=8}if($-=it,b.total_out+=$,r.total+=$,$&&(b.adler=r.check=r.flags?e(r.check,nt,$,lt-$):s(r.check,nt,$,lt-$)),$=it,(r.flags?A:l(A))!==r.check){b.msg="incorrect data check",r.mode=30;break}S=A=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;S<32;){if(M===0)break t;M--,A+=U[Z++]<<S,S+=8}if(A!==(4294967295&r.total)){b.msg="incorrect length check",r.mode=30;break}S=A=0}r.mode=29;case 29:B=1;break t;case 30:B=-3;break t;case 31:return-4;case 32:default:return a}return b.next_out=lt,b.avail_out=it,b.next_in=Z,b.avail_in=M,r.hold=A,r.bits=S,(r.wsize||$!==b.avail_out&&r.mode<30&&(r.mode<27||L!==4))&&et(b,b.output,b.next_out,$-b.avail_out)?(r.mode=31,-4):(Q-=b.avail_in,$-=b.avail_out,b.total_in+=Q,b.total_out+=$,r.total+=$,r.wrap&&$&&(b.adler=r.check=r.flags?e(r.check,nt,$,b.next_out-$):s(r.check,nt,$,b.next_out-$)),b.data_type=r.bits+(r.last?64:0)+(r.mode===12?128:0)+(r.mode===20||r.mode===15?256:0),(Q==0&&$===0||L===4)&&B===v&&(B=-5),B)},w.inflateEnd=function(b){if(!b||!b.state)return a;var L=b.state;return L.window&&(L.window=null),b.state=null,v},w.inflateGetHeader=function(b,L){var r;return b&&b.state&&2&(r=b.state).wrap?((r.head=L).done=!1,v):a},w.inflateSetDictionary=function(b,L){var r,U=L.length;return b&&b.state?(r=b.state).wrap!==0&&r.mode!==11?a:r.mode===11&&s(1,L,U,0)!==r.check?-3:et(b,L,U,U)?(r.mode=31,-4):(r.havedict=1,v):a},w.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(i,I,w){var h=i("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],e=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];I.exports=function(g,m,v,a,_,n,f,l){var p,y,E,x,R,P,j,D,X,et=l.bits,b=0,L=0,r=0,U=0,nt=0,Z=0,lt=0,M=0,it=0,A=0,S=null,Q=0,$=new h.Buf16(16),H=new h.Buf16(16),kt=null,_t=0;for(b=0;b<=15;b++)$[b]=0;for(L=0;L<a;L++)$[m[v+L]]++;for(nt=et,U=15;1<=U&&$[U]===0;U--);if(U<nt&&(nt=U),U===0)return _[n++]=20971520,_[n++]=20971520,l.bits=1,0;for(r=1;r<U&&$[r]===0;r++);for(nt<r&&(nt=r),b=M=1;b<=15;b++)if(M<<=1,(M-=$[b])<0)return-1;if(0<M&&(g===0||U!==1))return-1;for(H[1]=0,b=1;b<15;b++)H[b+1]=H[b]+$[b];for(L=0;L<a;L++)m[v+L]!==0&&(f[H[m[v+L]]++]=L);if(P=g===0?(S=kt=f,19):g===1?(S=s,Q-=257,kt=e,_t-=257,256):(S=o,kt=d,-1),b=r,R=n,lt=L=A=0,E=-1,x=(it=1<<(Z=nt))-1,g===1&&852<it||g===2&&592<it)return 1;for(;;){for(j=b-lt,X=f[L]<P?(D=0,f[L]):f[L]>P?(D=kt[_t+f[L]],S[Q+f[L]]):(D=96,0),p=1<<b-lt,r=y=1<<Z;_[R+(A>>lt)+(y-=p)]=j<<24|D<<16|X|0,y!==0;);for(p=1<<b-1;A&p;)p>>=1;if(p!==0?(A&=p-1,A+=p):A=0,L++,--$[b]==0){if(b===U)break;b=m[v+f[L]]}if(nt<b&&(A&x)!==E){for(lt===0&&(lt=nt),R+=r,M=1<<(Z=b-lt);Z+lt<U&&!((M-=$[Z+lt])<=0);)Z++,M<<=1;if(it+=1<<Z,g===1&&852<it||g===2&&592<it)return 1;_[E=A&x]=nt<<24|Z<<16|R-n|0}}return A!==0&&(_[R+A]=b-lt<<24|64<<16|0),l.bits=nt,0}},{"../utils/common":41}],51:[function(i,I,w){I.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(i,I,w){var h=i("../utils/common"),s=0,e=1;function o(u){for(var k=u.length;0<=--k;)u[k]=0}var d=0,g=29,m=256,v=m+1+g,a=30,_=19,n=2*v+1,f=15,l=16,p=7,y=256,E=16,x=17,R=18,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],et=new Array(2*(v+2));o(et);var b=new Array(2*a);o(b);var L=new Array(512);o(L);var r=new Array(256);o(r);var U=new Array(g);o(U);var nt,Z,lt,M=new Array(a);function it(u,k,N,F,C){this.static_tree=u,this.extra_bits=k,this.extra_base=N,this.elems=F,this.max_length=C,this.has_stree=u&&u.length}function A(u,k){this.dyn_tree=u,this.max_code=0,this.stat_desc=k}function S(u){return u<256?L[u]:L[256+(u>>>7)]}function Q(u,k){u.pending_buf[u.pending++]=255&k,u.pending_buf[u.pending++]=k>>>8&255}function $(u,k,N){u.bi_valid>l-N?(u.bi_buf|=k<<u.bi_valid&65535,Q(u,u.bi_buf),u.bi_buf=k>>l-u.bi_valid,u.bi_valid+=N-l):(u.bi_buf|=k<<u.bi_valid&65535,u.bi_valid+=N)}function H(u,k,N){$(u,N[2*k],N[2*k+1])}function kt(u,k){for(var N=0;N|=1&u,u>>>=1,N<<=1,0<--k;);return N>>>1}function _t(u,k,N){var F,C,W=new Array(f+1),J=0;for(F=1;F<=f;F++)W[F]=J=J+N[F-1]<<1;for(C=0;C<=k;C++){var G=u[2*C+1];G!==0&&(u[2*C]=kt(W[G]++,G))}}function st(u){var k;for(k=0;k<v;k++)u.dyn_ltree[2*k]=0;for(k=0;k<a;k++)u.dyn_dtree[2*k]=0;for(k=0;k<_;k++)u.bl_tree[2*k]=0;u.dyn_ltree[2*y]=1,u.opt_len=u.static_len=0,u.last_lit=u.matches=0}function ft(u){8<u.bi_valid?Q(u,u.bi_buf):0<u.bi_valid&&(u.pending_buf[u.pending++]=u.bi_buf),u.bi_buf=0,u.bi_valid=0}function Et(u,k,N,F){var C=2*k,W=2*N;return u[C]<u[W]||u[C]===u[W]&&F[k]<=F[N]}function xt(u,k,N){for(var F=u.heap[N],C=N<<1;C<=u.heap_len&&(C<u.heap_len&&Et(k,u.heap[C+1],u.heap[C],u.depth)&&C++,!Et(k,F,u.heap[C],u.depth));)u.heap[N]=u.heap[C],N=C,C<<=1;u.heap[N]=F}function pt(u,k,N){var F,C,W,J,G=0;if(u.last_lit!==0)for(;F=u.pending_buf[u.d_buf+2*G]<<8|u.pending_buf[u.d_buf+2*G+1],C=u.pending_buf[u.l_buf+G],G++,F===0?H(u,C,k):(H(u,(W=r[C])+m+1,k),(J=P[W])!==0&&$(u,C-=U[W],J),H(u,W=S(--F),N),(J=j[W])!==0&&$(u,F-=M[W],J)),G<u.last_lit;);H(u,y,k)}function wt(u,k){var N,F,C,W=k.dyn_tree,J=k.stat_desc.static_tree,G=k.stat_desc.has_stree,tt=k.stat_desc.elems,mt=-1;for(u.heap_len=0,u.heap_max=n,N=0;N<tt;N++)W[2*N]!==0?(u.heap[++u.heap_len]=mt=N,u.depth[N]=0):W[2*N+1]=0;for(;u.heap_len<2;)W[2*(C=u.heap[++u.heap_len]=mt<2?++mt:0)]=1,u.depth[C]=0,u.opt_len--,G&&(u.static_len-=J[2*C+1]);for(k.max_code=mt,N=u.heap_len>>1;1<=N;N--)xt(u,W,N);for(C=tt;N=u.heap[1],u.heap[1]=u.heap[u.heap_len--],xt(u,W,1),F=u.heap[1],u.heap[--u.heap_max]=N,u.heap[--u.heap_max]=F,W[2*C]=W[2*N]+W[2*F],u.depth[C]=(u.depth[N]>=u.depth[F]?u.depth[N]:u.depth[F])+1,W[2*N+1]=W[2*F+1]=C,u.heap[1]=C++,xt(u,W,1),2<=u.heap_len;);u.heap[--u.heap_max]=u.heap[1],function(dt,It){var ne,Tt,Dt,Ct,Pt,Pe,Rt=It.dyn_tree,Ot=It.max_code,Mt=It.stat_desc.static_tree,Ve=It.stat_desc.has_stree,Wt=It.stat_desc.extra_bits,je=It.stat_desc.extra_base,Bt=It.stat_desc.max_length,we=0;for(Ct=0;Ct<=f;Ct++)dt.bl_count[Ct]=0;for(Rt[2*dt.heap[dt.heap_max]+1]=0,ne=dt.heap_max+1;ne<n;ne++)Bt<(Ct=Rt[2*Rt[2*(Tt=dt.heap[ne])+1]+1]+1)&&(Ct=Bt,we++),Rt[2*Tt+1]=Ct,Ot<Tt||(dt.bl_count[Ct]++,Pt=0,je<=Tt&&(Pt=Wt[Tt-je]),Pe=Rt[2*Tt],dt.opt_len+=Pe*(Ct+Pt),Ve&&(dt.static_len+=Pe*(Mt[2*Tt+1]+Pt)));if(we!==0){do{for(Ct=Bt-1;dt.bl_count[Ct]===0;)Ct--;dt.bl_count[Ct]--,dt.bl_count[Ct+1]+=2,dt.bl_count[Bt]--,we-=2}while(0<we);for(Ct=Bt;Ct!==0;Ct--)for(Tt=dt.bl_count[Ct];Tt!==0;)Ot<(Dt=dt.heap[--ne])||(Rt[2*Dt+1]!==Ct&&(dt.opt_len+=(Ct-Rt[2*Dt+1])*Rt[2*Dt],Rt[2*Dt+1]=Ct),Tt--)}}(u,k),_t(W,mt,u.bl_count)}function t(u,k,N){var F,C,W=-1,J=k[1],G=0,tt=7,mt=4;for(J===0&&(tt=138,mt=3),k[2*(N+1)+1]=65535,F=0;F<=N;F++)C=J,J=k[2*(F+1)+1],++G<tt&&C===J||(G<mt?u.bl_tree[2*C]+=G:C!==0?(C!==W&&u.bl_tree[2*C]++,u.bl_tree[2*E]++):G<=10?u.bl_tree[2*x]++:u.bl_tree[2*R]++,W=C,mt=(G=0)===J?(tt=138,3):C===J?(tt=6,3):(tt=7,4))}function B(u,k,N){var F,C,W=-1,J=k[1],G=0,tt=7,mt=4;for(J===0&&(tt=138,mt=3),F=0;F<=N;F++)if(C=J,J=k[2*(F+1)+1],!(++G<tt&&C===J)){if(G<mt)for(;H(u,C,u.bl_tree),--G!=0;);else C!==0?(C!==W&&(H(u,C,u.bl_tree),G--),H(u,E,u.bl_tree),$(u,G-3,2)):G<=10?(H(u,x,u.bl_tree),$(u,G-3,3)):(H(u,R,u.bl_tree),$(u,G-11,7));W=C,mt=(G=0)===J?(tt=138,3):C===J?(tt=6,3):(tt=7,4)}}o(M);var z=!1;function c(u,k,N,F){$(u,(d<<1)+(F?1:0),3),function(C,W,J,G){ft(C),Q(C,J),Q(C,~J),h.arraySet(C.pending_buf,C.window,W,J,C.pending),C.pending+=J}(u,k,N)}w._tr_init=function(u){z||(function(){var k,N,F,C,W,J=new Array(f+1);for(C=F=0;C<g-1;C++)for(U[C]=F,k=0;k<1<<P[C];k++)r[F++]=C;for(r[F-1]=C,C=W=0;C<16;C++)for(M[C]=W,k=0;k<1<<j[C];k++)L[W++]=C;for(W>>=7;C<a;C++)for(M[C]=W<<7,k=0;k<1<<j[C]-7;k++)L[256+W++]=C;for(N=0;N<=f;N++)J[N]=0;for(k=0;k<=143;)et[2*k+1]=8,k++,J[8]++;for(;k<=255;)et[2*k+1]=9,k++,J[9]++;for(;k<=279;)et[2*k+1]=7,k++,J[7]++;for(;k<=287;)et[2*k+1]=8,k++,J[8]++;for(_t(et,v+1,J),k=0;k<a;k++)b[2*k+1]=5,b[2*k]=kt(k,5);nt=new it(et,P,m+1,v,f),Z=new it(b,j,0,a,f),lt=new it(new Array(0),D,0,_,p)}(),z=!0),u.l_desc=new A(u.dyn_ltree,nt),u.d_desc=new A(u.dyn_dtree,Z),u.bl_desc=new A(u.bl_tree,lt),u.bi_buf=0,u.bi_valid=0,st(u)},w._tr_stored_block=c,w._tr_flush_block=function(u,k,N,F){var C,W,J=0;0<u.level?(u.strm.data_type===2&&(u.strm.data_type=function(G){var tt,mt=4093624447;for(tt=0;tt<=31;tt++,mt>>>=1)if(1&mt&&G.dyn_ltree[2*tt]!==0)return s;if(G.dyn_ltree[18]!==0||G.dyn_ltree[20]!==0||G.dyn_ltree[26]!==0)return e;for(tt=32;tt<m;tt++)if(G.dyn_ltree[2*tt]!==0)return e;return s}(u)),wt(u,u.l_desc),wt(u,u.d_desc),J=function(G){var tt;for(t(G,G.dyn_ltree,G.l_desc.max_code),t(G,G.dyn_dtree,G.d_desc.max_code),wt(G,G.bl_desc),tt=_-1;3<=tt&&G.bl_tree[2*X[tt]+1]===0;tt--);return G.opt_len+=3*(tt+1)+5+5+4,tt}(u),C=u.opt_len+3+7>>>3,(W=u.static_len+3+7>>>3)<=C&&(C=W)):C=W=N+5,N+4<=C&&k!==-1?c(u,k,N,F):u.strategy===4||W===C?($(u,2+(F?1:0),3),pt(u,et,b)):($(u,4+(F?1:0),3),function(G,tt,mt,dt){var It;for($(G,tt-257,5),$(G,mt-1,5),$(G,dt-4,4),It=0;It<dt;It++)$(G,G.bl_tree[2*X[It]+1],3);B(G,G.dyn_ltree,tt-1),B(G,G.dyn_dtree,mt-1)}(u,u.l_desc.max_code+1,u.d_desc.max_code+1,J+1),pt(u,u.dyn_ltree,u.dyn_dtree)),st(u),F&&ft(u)},w._tr_tally=function(u,k,N){return u.pending_buf[u.d_buf+2*u.last_lit]=k>>>8&255,u.pending_buf[u.d_buf+2*u.last_lit+1]=255&k,u.pending_buf[u.l_buf+u.last_lit]=255&N,u.last_lit++,k===0?u.dyn_ltree[2*N]++:(u.matches++,k--,u.dyn_ltree[2*(r[N]+m+1)]++,u.dyn_dtree[2*S(k)]++),u.last_lit===u.lit_bufsize-1},w._tr_align=function(u){$(u,2,3),H(u,y,et),function(k){k.bi_valid===16?(Q(k,k.bi_buf),k.bi_buf=0,k.bi_valid=0):8<=k.bi_valid&&(k.pending_buf[k.pending++]=255&k.bi_buf,k.bi_buf>>=8,k.bi_valid-=8)}(u)}},{"../utils/common":41}],53:[function(i,I,w){I.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(i,I,w){(function(h){(function(s,e){if(!s.setImmediate){var o,d,g,m,v=1,a={},_=!1,n=s.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(s);f=f&&f.setTimeout?f:s,o={}.toString.call(s.process)==="[object process]"?function(E){process.nextTick(function(){p(E)})}:function(){if(s.postMessage&&!s.importScripts){var E=!0,x=s.onmessage;return s.onmessage=function(){E=!1},s.postMessage("","*"),s.onmessage=x,E}}()?(m="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",y,!1):s.attachEvent("onmessage",y),function(E){s.postMessage(m+E,"*")}):s.MessageChannel?((g=new MessageChannel).port1.onmessage=function(E){p(E.data)},function(E){g.port2.postMessage(E)}):n&&"onreadystatechange"in n.createElement("script")?(d=n.documentElement,function(E){var x=n.createElement("script");x.onreadystatechange=function(){p(E),x.onreadystatechange=null,d.removeChild(x),x=null},d.appendChild(x)}):function(E){setTimeout(p,0,E)},f.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var x=new Array(arguments.length-1),R=0;R<x.length;R++)x[R]=arguments[R+1];var P={callback:E,args:x};return a[v]=P,o(v),v++},f.clearImmediate=l}function l(E){delete a[E]}function p(E){if(_)setTimeout(p,0,E);else{var x=a[E];if(x){_=!0;try{(function(R){var P=R.callback,j=R.args;switch(j.length){case 0:P();break;case 1:P(j[0]);break;case 2:P(j[0],j[1]);break;case 3:P(j[0],j[1],j[2]);break;default:P.apply(e,j)}})(x)}finally{l(E),_=!1}}}}function y(E){E.source===s&&typeof E.data=="string"&&E.data.indexOf(m)===0&&p(+E.data.slice(m.length))}})(typeof self>"u"?h===void 0?this:h:self)}).call(this,typeof wr<"u"?wr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Tn);var Wn=Tn.exports;const Zn=Mn(Wn),Dn={A0:[841,1189],A1:[594,841],A2:[420,594],A3:[297,420],A4:[210,297],A5:[148,210],A6:[105,148]},an=(T,Y)=>Math.round(T*Y);function Hn({din:T,width_cm:Y,height_cm:i}){return Y&&i?[Y*10,i*10]:T?Dn[T]:[210,297]}function Vn(T,Y,i,I){const w=document.createElement("canvas");w.width=Y,w.height=i;const h=w.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,Y,i);const s=T.naturalWidth,e=T.naturalHeight,o=s/e,d=Y/i;if(I==="stretch")h.drawImage(T,0,0,Y,i);else if(I==="fit"){let g=Y,m=Math.round(Y/o);m>i&&(m=i,g=Math.round(i*o));const v=Math.floor((Y-g)/2),a=Math.floor((i-m)/2);h.drawImage(T,v,a,g,m)}else{let g=s,m=Math.round(s/d);m>e&&(m=e,g=Math.round(e*d));const v=Math.floor((s-g)/2),a=Math.floor((e-m)/2);h.drawImage(T,v,a,g,m,0,0,Y,i)}return w}function Gn(T){const Y=Math.ceil(Math.sqrt(T.width*T.width+T.height*T.height)),i=document.createElement("canvas");i.width=Y,i.height=Y;const I=i.getContext("2d");return I.fillStyle="#fff",I.fillRect(0,0,Y,Y),I.translate(Y/2,Y/2),I.rotate(Math.PI/4),I.drawImage(T,-T.width/2,-T.height/2),i}function Kn(T,Y="image/png",i){return new Promise(I=>T.toBlob(w=>I(w),Y,i))}async function qn(T,{pause:Y=!0,cut:i=!0,vendorIdHex:I="",productIdHex:w="",iface:h=0,endpoint:s=1,align:e="left"}={}){if(!("usb"in navigator))throw new Error("WebUSB not supported");const o=[];if(I){const v=parseInt(I,16);if(Number.isFinite(v)){const a=w?parseInt(w,16):void 0;o.push(a?{vendorId:v,productId:a}:{vendorId:v})}}const d=await navigator.usb.requestDevice({filters:o.length?o:[{}]});await d.open(),d.configuration==null&&await d.selectConfiguration(1),await d.claimInterface(h);const g=v=>d.transferOut(s,new Uint8Array(v));await g([27,64]),await g([27,97,{left:0,center:1,right:2}[e]??0]);for(let v=0;v<T.length;v++){const a=T[v],_=Math.ceil(a.width/8),n=new Uint8Array(_*a.height);for(let R=0;R<a.height;R++)for(let P=0;P<a.width;P++){const j=(R*a.width+P)*4,D=a.data[j]<128?1:0,X=R*_+(P>>3),et=7-(P&7);n[X]|=D<<et}const f=0,l=_&255,p=_>>8&255,y=a.height&255,E=a.height>>8&255;await g([29,118,48,f,l,p,y,E]);const x=16384;for(let R=0;R<n.length;R+=x)await d.transferOut(s,n.subarray(R,Math.min(R+x,n.length)));if(await g([27,100,2]),Y&&v<T.length-1&&!confirm(`Strip ${v+1}/${T.length} printed. Continue?`))break}i&&await g([29,86,0])}function Sn(T,Y,i){const I=T.slice();return I[37]=Y[i],I}function zn(T,Y,i){const I=T.slice();return I[40]=Y[i],I}function An(T){let Y,i=T[40]+"",I;return{c(){Y=q("option"),I=jt(i),this.h()},l(w){Y=K(w,"OPTION",{});var h=ct(Y);I=Ft(h,i),h.forEach(at),this.h()},h(){Y.__value=T[40],vt(Y,Y.__value)},m(w,h){Re(w,Y,h),O(Y,I)},p:xr,d(w){w&&at(Y)}}}function Yn(T){let Y,i="Loading default image or choose a file.";return{c(){Y=q("p"),Y.textContent=i,this.h()},l(I){Y=K(I,"P",{class:!0,"data-svelte-h":!0}),bt(Y)!=="svelte-1v7zxrp"&&(Y.textContent=i),this.h()},h(){V(Y,"class","muted svelte-keo85r")},m(I,w){Re(I,Y,w)},p:xr,d(I){I&&at(Y)}}}function Xn(T){let Y,i="Strips",I,w,h=Cr(T[4]),s=[];for(let e=0;e<h.length;e+=1)s[e]=On(Sn(T,h,e));return{c(){Y=q("h3"),Y.textContent=i,I=ht(),w=q("div");for(let e=0;e<s.length;e+=1)s[e].c();this.h()},l(e){Y=K(e,"H3",{style:!0,class:!0,"data-svelte-h":!0}),bt(Y)!=="svelte-2qujsl"&&(Y.textContent=i),I=ut(e),w=K(e,"DIV",{class:!0});var o=ct(w);for(let d=0;d<s.length;d+=1)s[d].l(o);o.forEach(at),this.h()},h(){St(Y,"margin-top","0"),V(Y,"class","svelte-keo85r"),V(w,"class","strips svelte-keo85r")},m(e,o){Re(e,Y,o),Re(e,I,o),Re(e,w,o);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(w,null)},p(e,o){if(o[0]&16){h=Cr(e[4]);let d;for(d=0;d<h.length;d+=1){const g=Sn(e,h,d);s[d]?s[d].p(g,o):(s[d]=On(g),s[d].c(),s[d].m(w,null))}for(;d<s.length;d+=1)s[d].d(1);s.length=h.length}},d(e){e&&(at(Y),at(I),at(w)),Bn(s,e)}}}function On(T){let Y,i,I,w,h,s,e=T[37].name+"",o,d,g=T[37].canvas.width+"",m,v,a=T[37].canvas.height+"",_,n,f;return{c(){Y=q("div"),i=q("img"),h=ht(),s=q("div"),o=jt(e),d=jt("  "),m=jt(g),v=jt(""),_=jt(a),n=jt("px"),f=ht(),this.h()},l(l){Y=K(l,"DIV",{class:!0});var p=ct(Y);i=K(p,"IMG",{src:!0,alt:!0,class:!0}),h=ut(p),s=K(p,"DIV",{class:!0});var y=ct(s);o=Ft(y,e),d=Ft(y,"  "),m=Ft(y,g),v=Ft(y,""),_=Ft(y,a),n=Ft(y,"px"),y.forEach(at),f=ut(p),p.forEach(at),this.h()},h(){In(i.src,I=T[37].canvas.toDataURL())||V(i,"src",I),V(i,"alt",w=T[37].name),V(i,"class","svelte-keo85r"),V(s,"class","muted svelte-keo85r"),V(Y,"class","stripItem svelte-keo85r")},m(l,p){Re(l,Y,p),O(Y,i),O(Y,h),O(Y,s),O(s,o),O(s,d),O(s,m),O(s,v),O(s,_),O(s,n),O(Y,f)},p(l,p){p[0]&16&&!In(i.src,I=l[37].canvas.toDataURL())&&V(i,"src",I),p[0]&16&&w!==(w=l[37].name)&&V(i,"alt",w),p[0]&16&&e!==(e=l[37].name+"")&&kr(o,e),p[0]&16&&g!==(g=l[37].canvas.width+"")&&kr(m,g),p[0]&16&&a!==(a=l[37].canvas.height+"")&&kr(_,a)},d(l){l&&at(Y)}}}function Jn(T){let Y,i,I,w="Tesselate",h,s,e=`Tesselate splits images into printable strips for thermal receipt
      printers, supporting all DIN formats (A0A6) and custom banner sizes. Its
      ideal for large-format or experimental printing with standard receipt
      printers, roll printers, and thermal printers.`,o,d,g,m,v,a="DIN",_,n,f,l,p,y,E="Custom Width (cm)",x,R,P,j,D,X="Custom Height (cm)",et,b,L,r,U,nt,Z="Strip (mm)",lt,M,it,A,S,Q="Pixel size (px)",$,H,kt,_t,st,ft,Et="Mode",xt,pt,wt,t="fit",B,z="fill",c,u="stretch",k,N,F,C="Direction",W,J,G,tt="vertical",mt,dt="horizontal",It,ne="diagonal",Tt,Dt,Ct,Pt,Pe="Dither",Rt,Ot,Mt,Ve="floyd",Wt,je="halftone",Bt,we="none",Er,Ne,ye,Jt,Ir,Sr,ie,ae,ke,sn="Halftone cell",zr,Zt,Ar,se,xe,on="Printer max width (px)",Or,Ht,Br,Le,oe,Ce,ln="Dots/mm",Tr,Nt,Dr,Gt,le,un="Download",Rr,ue,hn="Print",Pr,Ee,Me=(T[5]?"Working":T[1])+"",Ge,Nr,Lt,he,cn="Printer",Lr,ce,fe,Ie,fn="Vendor ID (hex)",Ur,Qt,Fr,de,Se,dn="Product ID (hex)",jr,$t,Mr,pe,me,ze,pn="Interface",Wr,Kt,Zr,_e,Ae,mn="Endpoint",Hr,qt,Vr,Yt,Oe,Gr,Ut,te,_n="left",ee,vn="center",re,gn="right",Kr,Be,ve,qr,Yr,Te,ge,Xr,Jr,De,Qr,bn,Ue=Cr(T[6]),At=[];for(let rt=0;rt<Ue.length;rt+=1)At[rt]=An(zn(T,Ue,rt));function wn(rt,yt){return rt[4].length?Xn:Yn}let Ke=wn(T),Vt=Ke(T);return{c(){Y=q("div"),i=q("div"),I=q("h2"),I.textContent=w,h=ht(),s=q("p"),s.textContent=e,o=ht(),d=q("div"),g=q("input"),m=ht(),v=q("label"),v.textContent=a,_=ht(),n=q("select");for(let rt=0;rt<At.length;rt+=1)At[rt].c();f=ht(),l=q("div"),p=q("div"),y=q("label"),y.textContent=E,x=ht(),R=q("input"),P=ht(),j=q("div"),D=q("label"),D.textContent=X,et=ht(),b=q("input"),L=ht(),r=q("div"),U=q("div"),nt=q("label"),nt.textContent=Z,lt=ht(),M=q("input"),it=ht(),A=q("div"),S=q("label"),S.textContent=Q,$=ht(),H=q("input"),kt=ht(),_t=q("div"),st=q("div"),ft=q("label"),ft.textContent=Et,xt=ht(),pt=q("select"),wt=q("option"),wt.textContent=t,B=q("option"),B.textContent=z,c=q("option"),c.textContent=u,k=ht(),N=q("div"),F=q("label"),F.textContent=C,W=ht(),J=q("select"),G=q("option"),G.textContent=tt,mt=q("option"),mt.textContent=dt,It=q("option"),It.textContent=ne,Tt=ht(),Dt=q("div"),Ct=q("div"),Pt=q("label"),Pt.textContent=Pe,Rt=ht(),Ot=q("select"),Mt=q("option"),Mt.textContent=Ve,Wt=q("option"),Wt.textContent=je,Bt=q("option"),Bt.textContent=we,Er=ht(),Ne=q("div"),ye=q("label"),Jt=q("input"),Ir=jt(" Invert"),Sr=ht(),ie=q("div"),ae=q("div"),ke=q("label"),ke.textContent=sn,zr=ht(),Zt=q("input"),Ar=ht(),se=q("div"),xe=q("label"),xe.textContent=on,Or=ht(),Ht=q("input"),Br=ht(),Le=q("div"),oe=q("div"),Ce=q("label"),Ce.textContent=ln,Tr=ht(),Nt=q("input"),Dr=ht(),Gt=q("div"),le=q("button"),le.textContent=un,Rr=ht(),ue=q("button"),ue.textContent=hn,Pr=ht(),Ee=q("p"),Ge=jt(Me),Nr=ht(),Lt=q("div"),he=q("h3"),he.textContent=cn,Lr=ht(),ce=q("div"),fe=q("div"),Ie=q("label"),Ie.textContent=fn,Ur=ht(),Qt=q("input"),Fr=ht(),de=q("div"),Se=q("label"),Se.textContent=dn,jr=ht(),$t=q("input"),Mr=ht(),pe=q("div"),me=q("div"),ze=q("label"),ze.textContent=pn,Wr=ht(),Kt=q("input"),Zr=ht(),_e=q("div"),Ae=q("label"),Ae.textContent=mn,Hr=ht(),qt=q("input"),Vr=ht(),Yt=q("div"),Oe=q("label"),Gr=jt(`Align
          `),Ut=q("select"),te=q("option"),te.textContent=_n,ee=q("option"),ee.textContent=vn,re=q("option"),re.textContent=gn,Kr=ht(),Be=q("label"),ve=q("input"),qr=jt(" Pause"),Yr=ht(),Te=q("label"),ge=q("input"),Xr=jt(" Cut"),Jr=ht(),De=q("div"),Vt.c(),this.h()},l(rt){Y=K(rt,"DIV",{class:!0});var yt=ct(Y);i=K(yt,"DIV",{class:!0});var ot=ct(i);I=K(ot,"H2",{style:!0,class:!0,"data-svelte-h":!0}),bt(I)!=="svelte-1iave8w"&&(I.textContent=w),h=ut(ot),s=K(ot,"P",{"data-svelte-h":!0}),bt(s)!=="svelte-1rwrzlm"&&(s.textContent=e),o=ut(ot),d=K(ot,"DIV",{class:!0});var We=ct(d);g=K(We,"INPUT",{type:!0,accept:!0,class:!0}),We.forEach(at),m=ut(ot),v=K(ot,"LABEL",{class:!0,"data-svelte-h":!0}),bt(v)!=="svelte-qwiy2r"&&(v.textContent=a),_=ut(ot),n=K(ot,"SELECT",{class:!0});var yn=ct(n);for(let nn=0;nn<At.length;nn+=1)At[nn].l(yn);yn.forEach(at),f=ut(ot),l=K(ot,"DIV",{class:!0});var qe=ct(l);p=K(qe,"DIV",{style:!0});var Ye=ct(p);y=K(Ye,"LABEL",{class:!0,"data-svelte-h":!0}),bt(y)!=="svelte-13h7zre"&&(y.textContent=E),x=ut(Ye),R=K(Ye,"INPUT",{type:!0,step:!0,class:!0}),Ye.forEach(at),P=ut(qe),j=K(qe,"DIV",{style:!0});var Xe=ct(j);D=K(Xe,"LABEL",{class:!0,"data-svelte-h":!0}),bt(D)!=="svelte-1aydr0b"&&(D.textContent=X),et=ut(Xe),b=K(Xe,"INPUT",{type:!0,step:!0,class:!0}),Xe.forEach(at),qe.forEach(at),L=ut(ot),r=K(ot,"DIV",{class:!0});var Je=ct(r);U=K(Je,"DIV",{style:!0});var Qe=ct(U);nt=K(Qe,"LABEL",{class:!0,"data-svelte-h":!0}),bt(nt)!=="svelte-1bko2kh"&&(nt.textContent=Z),lt=ut(Qe),M=K(Qe,"INPUT",{type:!0,step:!0,min:!0,class:!0}),Qe.forEach(at),it=ut(Je),A=K(Je,"DIV",{style:!0});var $e=ct(A);S=K($e,"LABEL",{class:!0,"data-svelte-h":!0}),bt(S)!=="svelte-1tk1v8o"&&(S.textContent=Q),$=ut($e),H=K($e,"INPUT",{type:!0,step:!0,min:!0,class:!0}),$e.forEach(at),Je.forEach(at),kt=ut(ot),_t=K(ot,"DIV",{class:!0});var tr=ct(_t);st=K(tr,"DIV",{style:!0});var er=ct(st);ft=K(er,"LABEL",{class:!0,"data-svelte-h":!0}),bt(ft)!=="svelte-16wpful"&&(ft.textContent=Et),xt=ut(er),pt=K(er,"SELECT",{class:!0});var rr=ct(pt);wt=K(rr,"OPTION",{"data-svelte-h":!0}),bt(wt)!=="svelte-1ox0qsw"&&(wt.textContent=t),B=K(rr,"OPTION",{"data-svelte-h":!0}),bt(B)!=="svelte-ojnp86"&&(B.textContent=z),c=K(rr,"OPTION",{"data-svelte-h":!0}),bt(c)!=="svelte-19g2w9o"&&(c.textContent=u),rr.forEach(at),er.forEach(at),k=ut(tr),N=K(tr,"DIV",{style:!0});var nr=ct(N);F=K(nr,"LABEL",{class:!0,"data-svelte-h":!0}),bt(F)!=="svelte-1k63le1"&&(F.textContent=C),W=ut(nr),J=K(nr,"SELECT",{class:!0});var ir=ct(J);G=K(ir,"OPTION",{"data-svelte-h":!0}),bt(G)!=="svelte-lztc1q"&&(G.textContent=tt),mt=K(ir,"OPTION",{"data-svelte-h":!0}),bt(mt)!=="svelte-4ixlgm"&&(mt.textContent=dt),It=K(ir,"OPTION",{"data-svelte-h":!0}),bt(It)!=="svelte-1j2ut9m"&&(It.textContent=ne),ir.forEach(at),nr.forEach(at),tr.forEach(at),Tt=ut(ot),Dt=K(ot,"DIV",{class:!0});var ar=ct(Dt);Ct=K(ar,"DIV",{style:!0});var sr=ct(Ct);Pt=K(sr,"LABEL",{class:!0,"data-svelte-h":!0}),bt(Pt)!=="svelte-1b6xat8"&&(Pt.textContent=Pe),Rt=ut(sr),Ot=K(sr,"SELECT",{class:!0});var or=ct(Ot);Mt=K(or,"OPTION",{"data-svelte-h":!0}),bt(Mt)!=="svelte-dxg5ae"&&(Mt.textContent=Ve),Wt=K(or,"OPTION",{"data-svelte-h":!0}),bt(Wt)!=="svelte-hdobsm"&&(Wt.textContent=je),Bt=K(or,"OPTION",{"data-svelte-h":!0}),bt(Bt)!=="svelte-8dsaj2"&&(Bt.textContent=we),or.forEach(at),sr.forEach(at),Er=ut(ar),Ne=K(ar,"DIV",{style:!0});var kn=ct(Ne);ye=K(kn,"LABEL",{class:!0});var $r=ct(ye);Jt=K($r,"INPUT",{type:!0,class:!0}),Ir=Ft($r," Invert"),$r.forEach(at),kn.forEach(at),ar.forEach(at),Sr=ut(ot),ie=K(ot,"DIV",{class:!0});var lr=ct(ie);ae=K(lr,"DIV",{style:!0});var ur=ct(ae);ke=K(ur,"LABEL",{class:!0,"data-svelte-h":!0}),bt(ke)!=="svelte-1r22cu7"&&(ke.textContent=sn),zr=ut(ur),Zt=K(ur,"INPUT",{type:!0,step:!0,class:!0}),ur.forEach(at),Ar=ut(lr),se=K(lr,"DIV",{style:!0});var hr=ct(se);xe=K(hr,"LABEL",{class:!0,"data-svelte-h":!0}),bt(xe)!=="svelte-brceij"&&(xe.textContent=on),Or=ut(hr),Ht=K(hr,"INPUT",{type:!0,step:!0,class:!0}),hr.forEach(at),lr.forEach(at),Br=ut(ot),Le=K(ot,"DIV",{class:!0});var xn=ct(Le);oe=K(xn,"DIV",{style:!0});var cr=ct(oe);Ce=K(cr,"LABEL",{class:!0,"data-svelte-h":!0}),bt(Ce)!=="svelte-1ciqefv"&&(Ce.textContent=ln),Tr=ut(cr),Nt=K(cr,"INPUT",{type:!0,step:!0,min:!0,class:!0}),cr.forEach(at),xn.forEach(at),Dr=ut(ot),Gt=K(ot,"DIV",{class:!0,style:!0});var fr=ct(Gt);le=K(fr,"BUTTON",{class:!0,"data-svelte-h":!0}),bt(le)!=="svelte-1fy8inz"&&(le.textContent=un),Rr=ut(fr),ue=K(fr,"BUTTON",{class:!0,"data-svelte-h":!0}),bt(ue)!=="svelte-1bc3bu5"&&(ue.textContent=hn),fr.forEach(at),Pr=ut(ot),Ee=K(ot,"P",{class:!0,style:!0});var Cn=ct(Ee);Ge=Ft(Cn,Me),Cn.forEach(at),Nr=ut(ot),Lt=K(ot,"DIV",{class:!0});var be=ct(Lt);he=K(be,"H3",{style:!0,class:!0,"data-svelte-h":!0}),bt(he)!=="svelte-7nfo8s"&&(he.textContent=cn),Lr=ut(be),ce=K(be,"DIV",{class:!0});var dr=ct(ce);fe=K(dr,"DIV",{style:!0});var pr=ct(fe);Ie=K(pr,"LABEL",{class:!0,"data-svelte-h":!0}),bt(Ie)!=="svelte-nfk8vb"&&(Ie.textContent=fn),Ur=ut(pr),Qt=K(pr,"INPUT",{placeholder:!0,class:!0}),pr.forEach(at),Fr=ut(dr),de=K(dr,"DIV",{style:!0});var mr=ct(de);Se=K(mr,"LABEL",{class:!0,"data-svelte-h":!0}),bt(Se)!=="svelte-1313xps"&&(Se.textContent=dn),jr=ut(mr),$t=K(mr,"INPUT",{placeholder:!0,class:!0}),mr.forEach(at),dr.forEach(at),Mr=ut(be),pe=K(be,"DIV",{class:!0});var _r=ct(pe);me=K(_r,"DIV",{style:!0});var vr=ct(me);ze=K(vr,"LABEL",{class:!0,"data-svelte-h":!0}),bt(ze)!=="svelte-v7kanb"&&(ze.textContent=pn),Wr=ut(vr),Kt=K(vr,"INPUT",{type:!0,min:!0,class:!0}),vr.forEach(at),Zr=ut(_r),_e=K(_r,"DIV",{style:!0});var gr=ct(_e);Ae=K(gr,"LABEL",{class:!0,"data-svelte-h":!0}),bt(Ae)!=="svelte-1pn3nlb"&&(Ae.textContent=mn),Hr=ut(gr),qt=K(gr,"INPUT",{type:!0,min:!0,class:!0}),gr.forEach(at),_r.forEach(at),Vr=ut(be),Yt=K(be,"DIV",{class:!0});var Fe=ct(Yt);Oe=K(Fe,"LABEL",{class:!0});var tn=ct(Oe);Gr=Ft(tn,`Align
          `),Ut=K(tn,"SELECT",{class:!0});var br=ct(Ut);te=K(br,"OPTION",{"data-svelte-h":!0}),bt(te)!=="svelte-dm3ioe"&&(te.textContent=_n),ee=K(br,"OPTION",{"data-svelte-h":!0}),bt(ee)!=="svelte-1x1wx6q"&&(ee.textContent=vn),re=K(br,"OPTION",{"data-svelte-h":!0}),bt(re)!=="svelte-gdc71y"&&(re.textContent=gn),br.forEach(at),tn.forEach(at),Kr=ut(Fe),Be=K(Fe,"LABEL",{class:!0});var en=ct(Be);ve=K(en,"INPUT",{type:!0,class:!0}),qr=Ft(en," Pause"),en.forEach(at),Yr=ut(Fe),Te=K(Fe,"LABEL",{class:!0});var rn=ct(Te);ge=K(rn,"INPUT",{type:!0,class:!0}),Xr=Ft(rn," Cut"),rn.forEach(at),Fe.forEach(at),be.forEach(at),ot.forEach(at),Jr=ut(yt),De=K(yt,"DIV",{class:!0});var En=ct(De);Vt.l(En),En.forEach(at),yt.forEach(at),this.h()},h(){St(I,"margin","0 0 6px"),V(I,"class","svelte-keo85r"),V(g,"type","file"),V(g,"accept","image/*"),V(g,"class","svelte-keo85r"),V(d,"class","row svelte-keo85r"),V(v,"class","svelte-keo85r"),V(n,"class","svelte-keo85r"),T[2].din===void 0&&Ze(()=>T[12].call(n)),V(y,"class","svelte-keo85r"),V(R,"type","number"),V(R,"step","0.1"),V(R,"class","svelte-keo85r"),St(p,"flex","1"),V(D,"class","svelte-keo85r"),V(b,"type","number"),V(b,"step","0.1"),V(b,"class","svelte-keo85r"),St(j,"flex","1"),V(l,"class","row svelte-keo85r"),V(nt,"class","svelte-keo85r"),V(M,"type","number"),V(M,"step","0.1"),V(M,"min","1"),V(M,"class","svelte-keo85r"),St(U,"flex","1"),V(S,"class","svelte-keo85r"),V(H,"type","number"),V(H,"step","1"),V(H,"min","1"),V(H,"class","svelte-keo85r"),St(A,"flex","1"),V(r,"class","row svelte-keo85r"),V(ft,"class","svelte-keo85r"),wt.__value="fit",vt(wt,wt.__value),B.__value="fill",vt(B,B.__value),c.__value="stretch",vt(c,c.__value),V(pt,"class","svelte-keo85r"),T[2].mode===void 0&&Ze(()=>T[17].call(pt)),St(st,"flex","1"),V(F,"class","svelte-keo85r"),G.__value="vertical",vt(G,G.__value),mt.__value="horizontal",vt(mt,mt.__value),It.__value="diagonal",vt(It,It.__value),V(J,"class","svelte-keo85r"),T[2].direction===void 0&&Ze(()=>T[18].call(J)),St(N,"flex","1"),V(_t,"class","row svelte-keo85r"),V(Pt,"class","svelte-keo85r"),Mt.__value="floyd",vt(Mt,Mt.__value),Wt.__value="halftone",vt(Wt,Wt.__value),Bt.__value="none",vt(Bt,Bt.__value),V(Ot,"class","svelte-keo85r"),T[2].dither===void 0&&Ze(()=>T[19].call(Ot)),St(Ct,"flex","1"),V(Jt,"type","checkbox"),V(Jt,"class","svelte-keo85r"),V(ye,"class","svelte-keo85r"),St(Ne,"flex","1"),V(Dt,"class","row svelte-keo85r"),V(ke,"class","svelte-keo85r"),V(Zt,"type","number"),V(Zt,"step","1"),V(Zt,"class","svelte-keo85r"),St(ae,"flex","1"),V(xe,"class","svelte-keo85r"),V(Ht,"type","number"),V(Ht,"step","1"),V(Ht,"class","svelte-keo85r"),St(se,"flex","1"),V(ie,"class","row svelte-keo85r"),V(Ce,"class","svelte-keo85r"),V(Nt,"type","number"),V(Nt,"step","1"),V(Nt,"min","1"),V(Nt,"class","svelte-keo85r"),St(oe,"flex","1"),V(Le,"class","row svelte-keo85r"),V(le,"class","svelte-keo85r"),V(ue,"class","svelte-keo85r"),V(Gt,"class","row svelte-keo85r"),St(Gt,"margin-top","12px"),St(Gt,"gap","12px"),V(Ee,"class","muted svelte-keo85r"),St(Ee,"margin-top","8px"),St(he,"margin","0 0 8px"),V(he,"class","svelte-keo85r"),V(Ie,"class","svelte-keo85r"),V(Qt,"placeholder","e.g. 04b8"),V(Qt,"class","svelte-keo85r"),St(fe,"flex","1"),V(Se,"class","svelte-keo85r"),V($t,"placeholder","optional"),V($t,"class","svelte-keo85r"),St(de,"flex","1"),V(ce,"class","row svelte-keo85r"),V(ze,"class","svelte-keo85r"),V(Kt,"type","number"),V(Kt,"min","0"),V(Kt,"class","svelte-keo85r"),St(me,"flex","1"),V(Ae,"class","svelte-keo85r"),V(qt,"type","number"),V(qt,"min","1"),V(qt,"class","svelte-keo85r"),St(_e,"flex","1"),V(pe,"class","row svelte-keo85r"),te.__value="left",vt(te,te.__value),ee.__value="center",vt(ee,ee.__value),re.__value="right",vt(re,re.__value),V(Ut,"class","svelte-keo85r"),T[3].align===void 0&&Ze(()=>T[28].call(Ut)),V(Oe,"class","svelte-keo85r"),V(ve,"type","checkbox"),V(ve,"class","svelte-keo85r"),V(Be,"class","svelte-keo85r"),V(ge,"type","checkbox"),V(ge,"class","svelte-keo85r"),V(Te,"class","svelte-keo85r"),V(Yt,"class","row svelte-keo85r"),V(Lt,"class","printer-box svelte-keo85r"),V(i,"class","panel controls svelte-keo85r"),V(De,"class","panel svelte-keo85r"),V(Y,"class","grid svelte-keo85r")},m(rt,yt){Re(rt,Y,yt),O(Y,i),O(i,I),O(i,h),O(i,s),O(i,o),O(i,d),O(d,g),T[11](g),O(i,m),O(i,v),O(i,_),O(i,n);for(let ot=0;ot<At.length;ot+=1)At[ot]&&At[ot].m(n,null);Xt(n,T[2].din,!0),O(i,f),O(i,l),O(l,p),O(p,y),O(p,x),O(p,R),vt(R,T[2].width_cm),O(l,P),O(l,j),O(j,D),O(j,et),O(j,b),vt(b,T[2].height_cm),O(i,L),O(i,r),O(r,U),O(U,nt),O(U,lt),O(U,M),vt(M,T[2].strip_mm),O(r,it),O(r,A),O(A,S),O(A,$),O(A,H),vt(H,T[2].pixel_size_px),O(i,kt),O(i,_t),O(_t,st),O(st,ft),O(st,xt),O(st,pt),O(pt,wt),O(pt,B),O(pt,c),Xt(pt,T[2].mode,!0),O(_t,k),O(_t,N),O(N,F),O(N,W),O(N,J),O(J,G),O(J,mt),O(J,It),Xt(J,T[2].direction,!0),O(i,Tt),O(i,Dt),O(Dt,Ct),O(Ct,Pt),O(Ct,Rt),O(Ct,Ot),O(Ot,Mt),O(Ot,Wt),O(Ot,Bt),Xt(Ot,T[2].dither,!0),O(Dt,Er),O(Dt,Ne),O(Ne,ye),O(ye,Jt),Jt.checked=T[2].invert,O(ye,Ir),O(i,Sr),O(i,ie),O(ie,ae),O(ae,ke),O(ae,zr),O(ae,Zt),vt(Zt,T[2].halftone_cell),O(ie,Ar),O(ie,se),O(se,xe),O(se,Or),O(se,Ht),vt(Ht,T[2].printer_max_width_px),O(i,Br),O(i,Le),O(Le,oe),O(oe,Ce),O(oe,Tr),O(oe,Nt),vt(Nt,T[2].printer_dots_per_mm),O(i,Dr),O(i,Gt),O(Gt,le),O(Gt,Rr),O(Gt,ue),O(i,Pr),O(i,Ee),O(Ee,Ge),O(i,Nr),O(i,Lt),O(Lt,he),O(Lt,Lr),O(Lt,ce),O(ce,fe),O(fe,Ie),O(fe,Ur),O(fe,Qt),vt(Qt,T[3].vendorIdHex),O(ce,Fr),O(ce,de),O(de,Se),O(de,jr),O(de,$t),vt($t,T[3].productIdHex),O(Lt,Mr),O(Lt,pe),O(pe,me),O(me,ze),O(me,Wr),O(me,Kt),vt(Kt,T[3].iface),O(pe,Zr),O(pe,_e),O(_e,Ae),O(_e,Hr),O(_e,qt),vt(qt,T[3].endpoint),O(Lt,Vr),O(Lt,Yt),O(Yt,Oe),O(Oe,Gr),O(Oe,Ut),O(Ut,te),O(Ut,ee),O(Ut,re),Xt(Ut,T[3].align,!0),O(Yt,Kr),O(Yt,Be),O(Be,ve),ve.checked=T[3].pause,O(Be,qr),O(Yt,Yr),O(Yt,Te),O(Te,ge),ge.checked=T[3].cut,O(Te,Xr),O(Y,Jr),O(Y,De),Vt.m(De,null),Qr||(bn=[gt(g,"change",T[7]),gt(n,"change",T[12]),gt(n,"change",T[10]),gt(R,"input",T[13]),gt(R,"change",T[10]),gt(b,"input",T[14]),gt(b,"change",T[10]),gt(M,"input",T[15]),gt(M,"change",T[10]),gt(H,"input",T[16]),gt(H,"change",T[10]),gt(pt,"change",T[17]),gt(pt,"change",T[10]),gt(J,"change",T[18]),gt(J,"change",T[10]),gt(Ot,"change",T[19]),gt(Ot,"change",T[10]),gt(Jt,"change",T[20]),gt(Jt,"change",T[10]),gt(Zt,"input",T[21]),gt(Zt,"change",T[10]),gt(Ht,"input",T[22]),gt(Ht,"change",T[10]),gt(Nt,"input",T[23]),gt(Nt,"change",T[10]),gt(le,"click",T[8]),gt(ue,"click",T[9]),gt(Qt,"input",T[24]),gt($t,"input",T[25]),gt(Kt,"input",T[26]),gt(qt,"input",T[27]),gt(Ut,"change",T[28]),gt(ve,"change",T[29]),gt(ge,"change",T[30])],Qr=!0)},p(rt,yt){if(yt[0]&64){Ue=Cr(rt[6]);let ot;for(ot=0;ot<Ue.length;ot+=1){const We=zn(rt,Ue,ot);At[ot]?At[ot].p(We,yt):(At[ot]=An(We),At[ot].c(),At[ot].m(n,null))}for(;ot<At.length;ot+=1)At[ot].d(1);At.length=Ue.length}yt[0]&68&&Xt(n,rt[2].din),yt[0]&68&&zt(R.value)!==rt[2].width_cm&&vt(R,rt[2].width_cm),yt[0]&68&&zt(b.value)!==rt[2].height_cm&&vt(b,rt[2].height_cm),yt[0]&68&&zt(M.value)!==rt[2].strip_mm&&vt(M,rt[2].strip_mm),yt[0]&68&&zt(H.value)!==rt[2].pixel_size_px&&vt(H,rt[2].pixel_size_px),yt[0]&68&&Xt(pt,rt[2].mode),yt[0]&68&&Xt(J,rt[2].direction),yt[0]&68&&Xt(Ot,rt[2].dither),yt[0]&68&&(Jt.checked=rt[2].invert),yt[0]&68&&zt(Zt.value)!==rt[2].halftone_cell&&vt(Zt,rt[2].halftone_cell),yt[0]&68&&zt(Ht.value)!==rt[2].printer_max_width_px&&vt(Ht,rt[2].printer_max_width_px),yt[0]&68&&zt(Nt.value)!==rt[2].printer_dots_per_mm&&vt(Nt,rt[2].printer_dots_per_mm),yt[0]&34&&Me!==(Me=(rt[5]?"Working":rt[1])+"")&&kr(Ge,Me),yt[0]&8&&Qt.value!==rt[3].vendorIdHex&&vt(Qt,rt[3].vendorIdHex),yt[0]&8&&$t.value!==rt[3].productIdHex&&vt($t,rt[3].productIdHex),yt[0]&8&&zt(Kt.value)!==rt[3].iface&&vt(Kt,rt[3].iface),yt[0]&8&&zt(qt.value)!==rt[3].endpoint&&vt(qt,rt[3].endpoint),yt[0]&8&&Xt(Ut,rt[3].align),yt[0]&8&&(ve.checked=rt[3].pause),yt[0]&8&&(ge.checked=rt[3].cut),Ke===(Ke=wn(rt))&&Vt?Vt.p(rt,yt):(Vt.d(1),Vt=Ke(rt),Vt&&(Vt.c(),Vt.m(De,null)))},i:xr,o:xr,d(rt){rt&&at(Y),T[11](null),Bn(At,rt),Vt.d(),Qr=!1,Ln(bn)}}}function Qn(T,Y=1){if(Y=Math.max(1,Math.floor(Y||1)),Y<=1)return T;const{width:i,height:I,data:w}=T;for(let h=0;h<I;h+=Y)for(let s=0;s<i;s+=Y){const e=(h*i+s)*4,o=w[e];for(let d=h;d<Math.min(h+Y,I);d++)for(let g=s;g<Math.min(s+Y,i);g++){const m=(d*i+g)*4;w[m]=w[m+1]=w[m+2]=o,w[m+3]=255}}return T}function $n(T,Y,i){let I=null,w="",h,s="",e={din:"A3",width_cm:void 0,height_cm:void 0,printer_dots_per_mm:8,strip_mm:60,mode:"fit",dither:"floyd",halftone_cell:8,invert:!1,direction:"vertical",printer_max_width_px:576,pixel_size_px:1},o={vendorIdHex:"",productIdHex:"",iface:0,endpoint:1,align:"left",pause:!0,cut:!0},d=[],g=!1;const m=Object.keys(Dn);function v(Q){i(1,s=Q??"")}Un(async()=>{try{w="palm.jpg",await _()}catch(Q){console.warn("Could not load default image",Q),v("Load an image to begin.")}});async function a(Q){var H;const $=(H=Q.target.files)==null?void 0:H[0];$&&(w=URL.createObjectURL($),await _())}async function _(){w&&(I=new Image,I.crossOrigin="anonymous",I.src=w,await I.decode(),await n())}async function n(){if(!I)return;i(5,g=!0),v("Processing"),i(4,d=[]);const[Q,$]=Hn(e),H=an(Q,e.printer_dots_per_mm),kt=an($,e.printer_dots_per_mm);let _t=Vn(I,H,kt,e.mode);e.direction==="diagonal"&&(_t=Gn(_t));const ft=_t.getContext("2d").getImageData(0,0,_t.width,_t.height),Et=new Worker(new URL(""+new URL("../workers/worker-Cwvvch6N.js",import.meta.url).href,import.meta.url),{type:"module"}),xt=await new Promise((t,B)=>{Et.onmessage=z=>{var c,u;if(!((c=z.data)!=null&&c.ok)){B(new Error(((u=z.data)==null?void 0:u.error)||"Worker failed")),Et.terminate();return}t(z.data.imageData),Et.terminate()},Et.onerror=z=>B(z),Et.postMessage({imageData:ft,settings:e},[ft.data.buffer])});Qn(xt,Number(e.pixel_size_px)||1);const pt=document.createElement("canvas");pt.width=xt.width,pt.height=xt.height,pt.getContext("2d").putImageData(xt,0,0);const wt=an(e.strip_mm,e.printer_dots_per_mm);if(e.direction==="vertical"){const t=Math.ceil(pt.width/wt);for(let B=0;B<t;B++){const z=B*wt,c=Math.min(wt,pt.width-z),u=pt.height,k=document.createElement("canvas");k.width=wt,k.height=u;const N=k.getContext("2d");N.fillStyle="#fff",N.fillRect(0,0,k.width,k.height),N.drawImage(pt,z,0,c,u,0,0,c,u),d.push({canvas:k,name:`vstrip_${String(B+1).padStart(2,"0")}.png`})}}else if(e.direction==="horizontal"){const t=Math.ceil(pt.height/wt),B=[];for(let c=0;c<t;c++){const u=c*wt,k=Math.min(wt,pt.height-u),N=pt.width,F=document.createElement("canvas");F.width=N,F.height=wt;const C=F.getContext("2d");C.fillStyle="#fff",C.fillRect(0,0,N,wt),C.drawImage(pt,0,u,N,k,0,0,N,k);const W=document.createElement("canvas");W.width=wt,W.height=N;const J=W.getContext("2d");J.translate(wt,0),J.rotate(Math.PI/2),J.imageSmoothingEnabled=!1,J.drawImage(F,0,0);let G=W;if(W.width!==e.printer_max_width_px){const tt=document.createElement("canvas"),mt=e.printer_max_width_px/W.width;tt.width=e.printer_max_width_px,tt.height=Math.round(W.height*mt);const dt=tt.getContext("2d");dt.imageSmoothingEnabled=!1,dt.drawImage(W,0,0,tt.width,tt.height),G=tt}B.push({canvas:G,name:`hstrip_tmp_${String(c+1).padStart(2,"0")}.png`})}const z=B.reverse();i(4,d=z.map((c,u)=>({canvas:c.canvas,name:`hstrip_${String(u+1).padStart(2,"0")}.png`})))}else{const t=pt.width,B=pt.height,z=e.printer_max_width_px,c=Math.ceil(t/z);for(let u=0;u<c;u++){const k=u*z,N=Math.min(z,t-k),F=document.createElement("canvas");F.width=z,F.height=B;const C=F.getContext("2d");C.fillStyle="#fff",C.fillRect(0,0,F.width,F.height),C.drawImage(pt,k,0,N,B,0,0,N,B),d.push({canvas:F,name:`diagstrip_${String(u+1).padStart(2,"0")}.png`})}}i(5,g=!1),v(`Generated ${d.length} strips.`)}async function f(){try{if(!d.length){v("Nothing to download. Generate strips first.");return}const Q=new Zn,$=Q.folder("tesselated_strips")||Q;for(const st of d){const ft=await Kn(st.canvas);$.file(st.name,ft)}const H=await Q.generateAsync({type:"blob"}),kt=URL.createObjectURL(H),_t=document.createElement("a");_t.href=kt,_t.download="tesselated_strips.zip",document.body.appendChild(_t),_t.click(),_t.remove(),URL.revokeObjectURL(kt),v("ZIP downloaded.")}catch(Q){console.error(Q),v("Download failed."),alert("Download failed: "+((Q==null?void 0:Q.message)||Q))}}async function l(){try{if(!d.length){v("Nothing to print. Generate strips first.");return}const Q=d.map($=>$.canvas.getContext("2d").getImageData(0,0,$.canvas.width,$.canvas.height));v("Opening printer"),await qn(Q,{pause:o.pause,cut:o.cut,vendorIdHex:o.vendorIdHex,productIdHex:o.productIdHex,iface:Number(o.iface)||0,endpoint:Number(o.endpoint)||1,align:o.align}),v("Print job sent.")}catch(Q){console.error(Q),v("Print failed."),alert("Print failed: "+((Q==null?void 0:Q.message)||Q||"Check WebUSB support and your Vendor/Product IDs, interface, endpoint."))}}function p(){I&&!g&&n()}function y(Q){Fn[Q?"unshift":"push"](()=>{h=Q,i(0,h)})}function E(){e.din=He(this),i(2,e),i(6,m)}function x(){e.width_cm=zt(this.value),i(2,e),i(6,m)}function R(){e.height_cm=zt(this.value),i(2,e),i(6,m)}function P(){e.strip_mm=zt(this.value),i(2,e),i(6,m)}function j(){e.pixel_size_px=zt(this.value),i(2,e),i(6,m)}function D(){e.mode=He(this),i(2,e),i(6,m)}function X(){e.direction=He(this),i(2,e),i(6,m)}function et(){e.dither=He(this),i(2,e),i(6,m)}function b(){e.invert=this.checked,i(2,e),i(6,m)}function L(){e.halftone_cell=zt(this.value),i(2,e),i(6,m)}function r(){e.printer_max_width_px=zt(this.value),i(2,e),i(6,m)}function U(){e.printer_dots_per_mm=zt(this.value),i(2,e),i(6,m)}function nt(){o.vendorIdHex=this.value,i(3,o)}function Z(){o.productIdHex=this.value,i(3,o)}function lt(){o.iface=zt(this.value),i(3,o)}function M(){o.endpoint=zt(this.value),i(3,o)}function it(){o.align=He(this),i(3,o)}function A(){o.pause=this.checked,i(3,o)}function S(){o.cut=this.checked,i(3,o)}return[h,s,e,o,d,g,m,a,f,l,p,y,E,x,R,P,j,D,X,et,b,L,r,U,nt,Z,lt,M,it,A,S]}class ni extends Rn{constructor(Y){super(),Pn(this,Y,$n,Jn,Nn,{},null,[-1,-1])}}export{ni as component,ri as universal};
