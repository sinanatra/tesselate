import{S as jn,i as Pn,s as Ln,n as Ir,d as lt,J as Tn,K as Nn,L as Kt,M as zt,N as bt,e as Er,f as Ye,h as A,O as wt,G as K,P as Ke,H as Un,j as V,k as ht,Q as pt,m as st,l as ue,o as G,q as at,p as he,z as Fn,I as Mn,R as qe,T as Sn}from"../chunks/W0BAji1W.js";import"../chunks/IHki7fMi.js";function Sr(B){return(B==null?void 0:B.length)!==void 0?B:Array.from(B)}const Wn=!0,ii=Object.freeze(Object.defineProperty({__proto__:null,prerender:Wn},Symbol.toStringTag,{value:"Module"}));var xr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zn(B){return B&&B.__esModule&&Object.prototype.hasOwnProperty.call(B,"default")?B.default:B}function Cr(B){throw new Error('Could not dynamically require "'+B+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Dn={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(B,Y){(function(a){B.exports=a()})(function(){return function a(C,g,h){function s(v,w){if(!g[v]){if(!C[v]){var d=typeof Cr=="function"&&Cr;if(!w&&d)return d(v,!0);if(r)return r(v,!0);var _=new Error("Cannot find module '"+v+"'");throw _.code="MODULE_NOT_FOUND",_}var n=g[v]={exports:{}};C[v][0].call(n.exports,function(m){var i=C[v][1][m];return s(i||m)},n,n.exports,a,C,g,h)}return g[v].exports}for(var r=typeof Cr=="function"&&Cr,l=0;l<h.length;l++)s(h[l]);return s}({1:[function(a,C,g){var h=a("./utils"),s=a("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";g.encode=function(l){for(var v,w,d,_,n,m,i,c=[],o=0,p=l.length,y=p,I=h.getTypeOf(l)!=="string";o<l.length;)y=p-o,d=I?(v=l[o++],w=o<p?l[o++]:0,o<p?l[o++]:0):(v=l.charCodeAt(o++),w=o<p?l.charCodeAt(o++):0,o<p?l.charCodeAt(o++):0),_=v>>2,n=(3&v)<<4|w>>4,m=1<y?(15&w)<<2|d>>6:64,i=2<y?63&d:64,c.push(r.charAt(_)+r.charAt(n)+r.charAt(m)+r.charAt(i));return c.join("")},g.decode=function(l){var v,w,d,_,n,m,i=0,c=0,o="data:";if(l.substr(0,o.length)===o)throw new Error("Invalid base64 input, it looks like a data url.");var p,y=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===r.charAt(64)&&y--,l.charAt(l.length-2)===r.charAt(64)&&y--,y%1!=0)throw new Error("Invalid base64 input, bad content length.");for(p=s.uint8array?new Uint8Array(0|y):new Array(0|y);i<l.length;)v=r.indexOf(l.charAt(i++))<<2|(_=r.indexOf(l.charAt(i++)))>>4,w=(15&_)<<4|(n=r.indexOf(l.charAt(i++)))>>2,d=(3&n)<<6|(m=r.indexOf(l.charAt(i++))),p[c++]=v,n!==64&&(p[c++]=w),m!==64&&(p[c++]=d);return p}},{"./support":30,"./utils":32}],2:[function(a,C,g){var h=a("./external"),s=a("./stream/DataWorker"),r=a("./stream/Crc32Probe"),l=a("./stream/DataLengthProbe");function v(w,d,_,n,m){this.compressedSize=w,this.uncompressedSize=d,this.crc32=_,this.compression=n,this.compressedContent=m}v.prototype={getContentWorker:function(){var w=new s(h.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),d=this;return w.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),w},getCompressedWorker:function(){return new s(h.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},v.createWorkerFrom=function(w,d,_){return w.pipe(new r).pipe(new l("uncompressedSize")).pipe(d.compressWorker(_)).pipe(new l("compressedSize")).withStreamInfo("compression",d)},C.exports=v},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(a,C,g){var h=a("./stream/GenericWorker");g.STORE={magic:"\0\0",compressWorker:function(){return new h("STORE compression")},uncompressWorker:function(){return new h("STORE decompression")}},g.DEFLATE=a("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(a,C,g){var h=a("./utils"),s=function(){for(var r,l=[],v=0;v<256;v++){r=v;for(var w=0;w<8;w++)r=1&r?3988292384^r>>>1:r>>>1;l[v]=r}return l}();C.exports=function(r,l){return r!==void 0&&r.length?h.getTypeOf(r)!=="string"?function(v,w,d,_){var n=s,m=_+d;v^=-1;for(var i=_;i<m;i++)v=v>>>8^n[255&(v^w[i])];return-1^v}(0|l,r,r.length,0):function(v,w,d,_){var n=s,m=_+d;v^=-1;for(var i=_;i<m;i++)v=v>>>8^n[255&(v^w.charCodeAt(i))];return-1^v}(0|l,r,r.length,0):0}},{"./utils":32}],5:[function(a,C,g){g.base64=!1,g.binary=!1,g.dir=!1,g.createFolders=!0,g.date=null,g.compression=null,g.compressionOptions=null,g.comment=null,g.unixPermissions=null,g.dosPermissions=null},{}],6:[function(a,C,g){var h=null;h=typeof Promise<"u"?Promise:a("lie"),C.exports={Promise:h}},{lie:37}],7:[function(a,C,g){var h=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=a("pako"),r=a("./utils"),l=a("./stream/GenericWorker"),v=h?"uint8array":"array";function w(d,_){l.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=_,this.meta={}}g.magic="\b\0",r.inherits(w,l),w.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(v,d.data),!1)},w.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},w.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},w.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(_){d.push({data:_,meta:d.meta})}},g.compressWorker=function(d){return new w("Deflate",d)},g.uncompressWorker=function(){return new w("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(a,C,g){function h(n,m){var i,c="";for(i=0;i<m;i++)c+=String.fromCharCode(255&n),n>>>=8;return c}function s(n,m,i,c,o,p){var y,I,x=n.file,R=n.compression,j=p!==v.utf8encode,W=r.transformTo("string",p(x.name)),T=r.transformTo("string",v.utf8encode(x.name)),q=x.comment,rt=r.transformTo("string",p(q)),b=r.transformTo("string",v.utf8encode(q)),L=T.length!==x.name.length,e=b.length!==q.length,N="",it="",Z="",ut=x.dir,M=x.date,et={crc32:0,compressedSize:0,uncompressedSize:0};m&&!i||(et.crc32=n.crc32,et.compressedSize=n.compressedSize,et.uncompressedSize=n.uncompressedSize);var O=0;m&&(O|=8),j||!L&&!e||(O|=2048);var z=0,Q=0;ut&&(z|=16),o==="UNIX"?(Q=798,z|=function(J,xt){var mt=J;return J||(mt=xt?16893:33204),(65535&mt)<<16}(x.unixPermissions,ut)):(Q=20,z|=function(J){return 63&(J||0)}(x.dosPermissions)),y=M.getUTCHours(),y<<=6,y|=M.getUTCMinutes(),y<<=5,y|=M.getUTCSeconds()/2,I=M.getUTCFullYear()-1980,I<<=4,I|=M.getUTCMonth()+1,I<<=5,I|=M.getUTCDate(),L&&(it=h(1,1)+h(w(W),4)+T,N+="up"+h(it.length,2)+it),e&&(Z=h(1,1)+h(w(rt),4)+b,N+="uc"+h(Z.length,2)+Z);var X="";return X+=`
\0`,X+=h(O,2),X+=R.magic,X+=h(y,2),X+=h(I,2),X+=h(et.crc32,4),X+=h(et.compressedSize,4),X+=h(et.uncompressedSize,4),X+=h(W.length,2),X+=h(N.length,2),{fileRecord:d.LOCAL_FILE_HEADER+X+W+N,dirRecord:d.CENTRAL_FILE_HEADER+h(Q,2)+X+h(rt.length,2)+"\0\0\0\0"+h(z,4)+h(c,4)+W+N+rt}}var r=a("../utils"),l=a("../stream/GenericWorker"),v=a("../utf8"),w=a("../crc32"),d=a("../signature");function _(n,m,i,c){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=i,this.encodeFileName=c,this.streamFiles=n,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(_,l),_.prototype.push=function(n){var m=n.meta.percent||0,i=this.entriesCount,c=this._sources.length;this.accumulate?this.contentBuffer.push(n):(this.bytesWritten+=n.data.length,l.prototype.push.call(this,{data:n.data,meta:{currentFile:this.currentFile,percent:i?(m+100*(i-c-1))/i:100}}))},_.prototype.openedSource=function(n){this.currentSourceOffset=this.bytesWritten,this.currentFile=n.file.name;var m=this.streamFiles&&!n.file.dir;if(m){var i=s(n,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},_.prototype.closedSource=function(n){this.accumulate=!1;var m=this.streamFiles&&!n.file.dir,i=s(n,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),m)this.push({data:function(c){return d.DATA_DESCRIPTOR+h(c.crc32,4)+h(c.compressedSize,4)+h(c.uncompressedSize,4)}(n),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},_.prototype.flush=function(){for(var n=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var i=this.bytesWritten-n,c=function(o,p,y,I,x){var R=r.transformTo("string",x(I));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+h(o,2)+h(o,2)+h(p,4)+h(y,4)+h(R.length,2)+R}(this.dirRecords.length,i,n,this.zipComment,this.encodeFileName);this.push({data:c,meta:{percent:100}})},_.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},_.prototype.registerPrevious=function(n){this._sources.push(n);var m=this;return n.on("data",function(i){m.processChunk(i)}),n.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),n.on("error",function(i){m.error(i)}),this},_.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},_.prototype.error=function(n){var m=this._sources;if(!l.prototype.error.call(this,n))return!1;for(var i=0;i<m.length;i++)try{m[i].error(n)}catch{}return!0},_.prototype.lock=function(){l.prototype.lock.call(this);for(var n=this._sources,m=0;m<n.length;m++)n[m].lock()},C.exports=_},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(a,C,g){var h=a("../compressions"),s=a("./ZipFileWorker");g.generateWorker=function(r,l,v){var w=new s(l.streamFiles,v,l.platform,l.encodeFileName),d=0;try{r.forEach(function(_,n){d++;var m=function(p,y){var I=p||y,x=h[I];if(!x)throw new Error(I+" is not a valid compression method !");return x}(n.options.compression,l.compression),i=n.options.compressionOptions||l.compressionOptions||{},c=n.dir,o=n.date;n._compressWorker(m,i).withStreamInfo("file",{name:_,dir:c,date:o,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(w)}),w.entriesCount=d}catch(_){w.error(_)}return w}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(a,C,g){function h(){if(!(this instanceof h))return new h;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new h;for(var r in this)typeof this[r]!="function"&&(s[r]=this[r]);return s}}(h.prototype=a("./object")).loadAsync=a("./load"),h.support=a("./support"),h.defaults=a("./defaults"),h.version="3.10.1",h.loadAsync=function(s,r){return new h().loadAsync(s,r)},h.external=a("./external"),C.exports=h},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(a,C,g){var h=a("./utils"),s=a("./external"),r=a("./utf8"),l=a("./zipEntries"),v=a("./stream/Crc32Probe"),w=a("./nodejsUtils");function d(_){return new s.Promise(function(n,m){var i=_.decompressed.getContentWorker().pipe(new v);i.on("error",function(c){m(c)}).on("end",function(){i.streamInfo.crc32!==_.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):n()}).resume()})}C.exports=function(_,n){var m=this;return n=h.extend(n||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),w.isNode&&w.isStream(_)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):h.prepareContent("the loaded zip file",_,!0,n.optimizedBinaryString,n.base64).then(function(i){var c=new l(n);return c.load(i),c}).then(function(i){var c=[s.Promise.resolve(i)],o=i.files;if(n.checkCRC32)for(var p=0;p<o.length;p++)c.push(d(o[p]));return s.Promise.all(c)}).then(function(i){for(var c=i.shift(),o=c.files,p=0;p<o.length;p++){var y=o[p],I=y.fileNameStr,x=h.resolve(y.fileNameStr);m.file(x,y.decompressed,{binary:!0,optimizedBinaryString:!0,date:y.date,dir:y.dir,comment:y.fileCommentStr.length?y.fileCommentStr:null,unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions,createFolders:n.createFolders}),y.dir||(m.file(x).unsafeOriginalName=I)}return c.zipComment.length&&(m.comment=c.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(a,C,g){var h=a("../utils"),s=a("../stream/GenericWorker");function r(l,v){s.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(v)}h.inherits(r,s),r.prototype._bindStream=function(l){var v=this;(this._stream=l).pause(),l.on("data",function(w){v.push({data:w,meta:{percent:0}})}).on("error",function(w){v.isPaused?this.generatedError=w:v.error(w)}).on("end",function(){v.isPaused?v._upstreamEnded=!0:v.end()})},r.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},C.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(a,C,g){var h=a("readable-stream").Readable;function s(r,l,v){h.call(this,l),this._helper=r;var w=this;r.on("data",function(d,_){w.push(d)||w._helper.pause(),v&&v(_)}).on("error",function(d){w.emit("error",d)}).on("end",function(){w.push(null)})}a("../utils").inherits(s,h),s.prototype._read=function(){this._helper.resume()},C.exports=s},{"../utils":32,"readable-stream":16}],14:[function(a,C,g){C.exports={isNode:typeof Buffer<"u",newBufferFrom:function(h,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(h,s);if(typeof h=="number")throw new Error('The "data" argument must not be a number');return new Buffer(h,s)},allocBuffer:function(h){if(Buffer.alloc)return Buffer.alloc(h);var s=new Buffer(h);return s.fill(0),s},isBuffer:function(h){return Buffer.isBuffer(h)},isStream:function(h){return h&&typeof h.on=="function"&&typeof h.pause=="function"&&typeof h.resume=="function"}}},{}],15:[function(a,C,g){function h(x,R,j){var W,T=r.getTypeOf(R),q=r.extend(j||{},w);q.date=q.date||new Date,q.compression!==null&&(q.compression=q.compression.toUpperCase()),typeof q.unixPermissions=="string"&&(q.unixPermissions=parseInt(q.unixPermissions,8)),q.unixPermissions&&16384&q.unixPermissions&&(q.dir=!0),q.dosPermissions&&16&q.dosPermissions&&(q.dir=!0),q.dir&&(x=o(x)),q.createFolders&&(W=c(x))&&p.call(this,W,!0);var rt=T==="string"&&q.binary===!1&&q.base64===!1;j&&j.binary!==void 0||(q.binary=!rt),(R instanceof d&&R.uncompressedSize===0||q.dir||!R||R.length===0)&&(q.base64=!1,q.binary=!0,R="",q.compression="STORE",T="string");var b=null;b=R instanceof d||R instanceof l?R:m.isNode&&m.isStream(R)?new i(x,R):r.prepareContent(x,R,q.binary,q.optimizedBinaryString,q.base64);var L=new _(x,b,q);this.files[x]=L}var s=a("./utf8"),r=a("./utils"),l=a("./stream/GenericWorker"),v=a("./stream/StreamHelper"),w=a("./defaults"),d=a("./compressedObject"),_=a("./zipObject"),n=a("./generate"),m=a("./nodejsUtils"),i=a("./nodejs/NodejsStreamInputAdapter"),c=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var R=x.lastIndexOf("/");return 0<R?x.substring(0,R):""},o=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},p=function(x,R){return R=R!==void 0?R:w.createFolders,x=o(x),this.files[x]||h.call(this,x,null,{dir:!0,createFolders:R}),this.files[x]};function y(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var I={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var R,j,W;for(R in this.files)W=this.files[R],(j=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&x(j,W)},filter:function(x){var R=[];return this.forEach(function(j,W){x(j,W)&&R.push(W)}),R},file:function(x,R,j){if(arguments.length!==1)return x=this.root+x,h.call(this,x,R,j),this;if(y(x)){var W=x;return this.filter(function(q,rt){return!rt.dir&&W.test(q)})}var T=this.files[this.root+x];return T&&!T.dir?T:null},folder:function(x){if(!x)return this;if(y(x))return this.filter(function(T,q){return q.dir&&x.test(T)});var R=this.root+x,j=p.call(this,R),W=this.clone();return W.root=j.name,W},remove:function(x){x=this.root+x;var R=this.files[x];if(R||(x.slice(-1)!=="/"&&(x+="/"),R=this.files[x]),R&&!R.dir)delete this.files[x];else for(var j=this.filter(function(T,q){return q.name.slice(0,x.length)===x}),W=0;W<j.length;W++)delete this.files[j[W].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var R,j={};try{if((j=r.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring"&&(j.type="string"),!j.type)throw new Error("No output type specified.");r.checkSupport(j.type),j.platform!=="darwin"&&j.platform!=="freebsd"&&j.platform!=="linux"&&j.platform!=="sunos"||(j.platform="UNIX"),j.platform==="win32"&&(j.platform="DOS");var W=j.comment||this.comment||"";R=n.generateWorker(this,j,W)}catch(T){(R=new l("error")).error(T)}return new v(R,j.type||"string",j.mimeType)},generateAsync:function(x,R){return this.generateInternalStream(x).accumulate(R)},generateNodeStream:function(x,R){return(x=x||{}).type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(R)}};C.exports=I},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(a,C,g){C.exports=a("stream")},{stream:void 0}],17:[function(a,C,g){var h=a("./DataReader");function s(r){h.call(this,r);for(var l=0;l<this.data.length;l++)r[l]=255&r[l]}a("../utils").inherits(s,h),s.prototype.byteAt=function(r){return this.data[this.zero+r]},s.prototype.lastIndexOfSignature=function(r){for(var l=r.charCodeAt(0),v=r.charCodeAt(1),w=r.charCodeAt(2),d=r.charCodeAt(3),_=this.length-4;0<=_;--_)if(this.data[_]===l&&this.data[_+1]===v&&this.data[_+2]===w&&this.data[_+3]===d)return _-this.zero;return-1},s.prototype.readAndCheckSignature=function(r){var l=r.charCodeAt(0),v=r.charCodeAt(1),w=r.charCodeAt(2),d=r.charCodeAt(3),_=this.readData(4);return l===_[0]&&v===_[1]&&w===_[2]&&d===_[3]},s.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,l},C.exports=s},{"../utils":32,"./DataReader":18}],18:[function(a,C,g){var h=a("../utils");function s(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var l,v=0;for(this.checkOffset(r),l=this.index+r-1;l>=this.index;l--)v=(v<<8)+this.byteAt(l);return this.index+=r,v},readString:function(r){return h.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}},C.exports=s},{"../utils":32}],19:[function(a,C,g){var h=a("./Uint8ArrayReader");function s(r){h.call(this,r)}a("../utils").inherits(s,h),s.prototype.readData=function(r){this.checkOffset(r);var l=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,l},C.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(a,C,g){var h=a("./DataReader");function s(r){h.call(this,r)}a("../utils").inherits(s,h),s.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},s.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},s.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},s.prototype.readData=function(r){this.checkOffset(r);var l=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,l},C.exports=s},{"../utils":32,"./DataReader":18}],21:[function(a,C,g){var h=a("./ArrayReader");function s(r){h.call(this,r)}a("../utils").inherits(s,h),s.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,l},C.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(a,C,g){var h=a("../utils"),s=a("../support"),r=a("./ArrayReader"),l=a("./StringReader"),v=a("./NodeBufferReader"),w=a("./Uint8ArrayReader");C.exports=function(d){var _=h.getTypeOf(d);return h.checkSupport(_),_!=="string"||s.uint8array?_==="nodebuffer"?new v(d):s.uint8array?new w(h.transformTo("uint8array",d)):new r(h.transformTo("array",d)):new l(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(a,C,g){g.LOCAL_FILE_HEADER="PK",g.CENTRAL_FILE_HEADER="PK",g.CENTRAL_DIRECTORY_END="PK",g.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",g.ZIP64_CENTRAL_DIRECTORY_END="PK",g.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(a,C,g){var h=a("./GenericWorker"),s=a("../utils");function r(l){h.call(this,"ConvertWorker to "+l),this.destType=l}s.inherits(r,h),r.prototype.processChunk=function(l){this.push({data:s.transformTo(this.destType,l.data),meta:l.meta})},C.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(a,C,g){var h=a("./GenericWorker"),s=a("../crc32");function r(){h.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a("../utils").inherits(r,h),r.prototype.processChunk=function(l){this.streamInfo.crc32=s(l.data,this.streamInfo.crc32||0),this.push(l)},C.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(a,C,g){var h=a("../utils"),s=a("./GenericWorker");function r(l){s.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}h.inherits(r,s),r.prototype.processChunk=function(l){if(l){var v=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=v+l.data.length}s.prototype.processChunk.call(this,l)},C.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(a,C,g){var h=a("../utils"),s=a("./GenericWorker");function r(l){s.call(this,"DataWorker");var v=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(w){v.dataIsReady=!0,v.data=w,v.max=w&&w.length||0,v.type=h.getTypeOf(w),v.isPaused||v._tickAndRepeat()},function(w){v.error(w)})}h.inherits(r,s),r.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,h.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(h.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,v=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,v);break;case"uint8array":l=this.data.subarray(this.index,v);break;case"array":case"nodebuffer":l=this.data.slice(this.index,v)}return this.index=v,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},C.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(a,C,g){function h(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}h.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,r){return this._listeners[s].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,r){if(this._listeners[s])for(var l=0;l<this._listeners[s].length;l++)this._listeners[s][l].call(this,r)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var r=this;return s.on("data",function(l){r.processChunk(l)}),s.on("end",function(){r.end()}),s.on("error",function(l){r.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,r){return this.extraStreamInfo[s]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},C.exports=h},{}],29:[function(a,C,g){var h=a("../utils"),s=a("./ConvertWorker"),r=a("./GenericWorker"),l=a("../base64"),v=a("../support"),w=a("../external"),d=null;if(v.nodestream)try{d=a("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(m,i){return new w.Promise(function(c,o){var p=[],y=m._internalType,I=m._outputType,x=m._mimeType;m.on("data",function(R,j){p.push(R),i&&i(j)}).on("error",function(R){p=[],o(R)}).on("end",function(){try{var R=function(j,W,T){switch(j){case"blob":return h.newBlob(h.transformTo("arraybuffer",W),T);case"base64":return l.encode(W);default:return h.transformTo(j,W)}}(I,function(j,W){var T,q=0,rt=null,b=0;for(T=0;T<W.length;T++)b+=W[T].length;switch(j){case"string":return W.join("");case"array":return Array.prototype.concat.apply([],W);case"uint8array":for(rt=new Uint8Array(b),T=0;T<W.length;T++)rt.set(W[T],q),q+=W[T].length;return rt;case"nodebuffer":return Buffer.concat(W);default:throw new Error("concat : unsupported type '"+j+"'")}}(y,p),x);c(R)}catch(j){o(j)}p=[]}).resume()})}function n(m,i,c){var o=i;switch(i){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=i,this._mimeType=c,h.checkSupport(o),this._worker=m.pipe(new s(o)),m.lock()}catch(p){this._worker=new r("error"),this._worker.error(p)}}n.prototype={accumulate:function(m){return _(this,m)},on:function(m,i){var c=this;return m==="data"?this._worker.on(m,function(o){i.call(c,o.data,o.meta)}):this._worker.on(m,function(){h.delay(i,arguments,c)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(h.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},m)}},C.exports=n},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(a,C,g){if(g.base64=!0,g.array=!0,g.string=!0,g.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",g.nodebuffer=typeof Buffer<"u",g.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")g.blob=!1;else{var h=new ArrayBuffer(0);try{g.blob=new Blob([h],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(h),g.blob=s.getBlob("application/zip").size===0}catch{g.blob=!1}}}try{g.nodestream=!!a("readable-stream").Readable}catch{g.nodestream=!1}},{"readable-stream":16}],31:[function(a,C,g){for(var h=a("./utils"),s=a("./support"),r=a("./nodejsUtils"),l=a("./stream/GenericWorker"),v=new Array(256),w=0;w<256;w++)v[w]=252<=w?6:248<=w?5:240<=w?4:224<=w?3:192<=w?2:1;v[254]=v[254]=1;function d(){l.call(this,"utf-8 decode"),this.leftOver=null}function _(){l.call(this,"utf-8 encode")}g.utf8encode=function(n){return s.nodebuffer?r.newBufferFrom(n,"utf-8"):function(m){var i,c,o,p,y,I=m.length,x=0;for(p=0;p<I;p++)(64512&(c=m.charCodeAt(p)))==55296&&p+1<I&&(64512&(o=m.charCodeAt(p+1)))==56320&&(c=65536+(c-55296<<10)+(o-56320),p++),x+=c<128?1:c<2048?2:c<65536?3:4;for(i=s.uint8array?new Uint8Array(x):new Array(x),p=y=0;y<x;p++)(64512&(c=m.charCodeAt(p)))==55296&&p+1<I&&(64512&(o=m.charCodeAt(p+1)))==56320&&(c=65536+(c-55296<<10)+(o-56320),p++),c<128?i[y++]=c:(c<2048?i[y++]=192|c>>>6:(c<65536?i[y++]=224|c>>>12:(i[y++]=240|c>>>18,i[y++]=128|c>>>12&63),i[y++]=128|c>>>6&63),i[y++]=128|63&c);return i}(n)},g.utf8decode=function(n){return s.nodebuffer?h.transformTo("nodebuffer",n).toString("utf-8"):function(m){var i,c,o,p,y=m.length,I=new Array(2*y);for(i=c=0;i<y;)if((o=m[i++])<128)I[c++]=o;else if(4<(p=v[o]))I[c++]=65533,i+=p-1;else{for(o&=p===2?31:p===3?15:7;1<p&&i<y;)o=o<<6|63&m[i++],p--;1<p?I[c++]=65533:o<65536?I[c++]=o:(o-=65536,I[c++]=55296|o>>10&1023,I[c++]=56320|1023&o)}return I.length!==c&&(I.subarray?I=I.subarray(0,c):I.length=c),h.applyFromCharCode(I)}(n=h.transformTo(s.uint8array?"uint8array":"array",n))},h.inherits(d,l),d.prototype.processChunk=function(n){var m=h.transformTo(s.uint8array?"uint8array":"array",n.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var i=m;(m=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),m.set(i,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var c=function(p,y){var I;for((y=y||p.length)>p.length&&(y=p.length),I=y-1;0<=I&&(192&p[I])==128;)I--;return I<0||I===0?y:I+v[p[I]]>y?I:y}(m),o=m;c!==m.length&&(s.uint8array?(o=m.subarray(0,c),this.leftOver=m.subarray(c,m.length)):(o=m.slice(0,c),this.leftOver=m.slice(c,m.length))),this.push({data:g.utf8decode(o),meta:n.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:g.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},g.Utf8DecodeWorker=d,h.inherits(_,l),_.prototype.processChunk=function(n){this.push({data:g.utf8encode(n.data),meta:n.meta})},g.Utf8EncodeWorker=_},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(a,C,g){var h=a("./support"),s=a("./base64"),r=a("./nodejsUtils"),l=a("./external");function v(i){return i}function w(i,c){for(var o=0;o<i.length;++o)c[o]=255&i.charCodeAt(o);return c}a("setimmediate"),g.newBlob=function(i,c){g.checkSupport("blob");try{return new Blob([i],{type:c})}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return o.append(i),o.getBlob(c)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(i,c,o){var p=[],y=0,I=i.length;if(I<=o)return String.fromCharCode.apply(null,i);for(;y<I;)c==="array"||c==="nodebuffer"?p.push(String.fromCharCode.apply(null,i.slice(y,Math.min(y+o,I)))):p.push(String.fromCharCode.apply(null,i.subarray(y,Math.min(y+o,I)))),y+=o;return p.join("")},stringifyByChar:function(i){for(var c="",o=0;o<i.length;o++)c+=String.fromCharCode(i[o]);return c},applyCanBeUsed:{uint8array:function(){try{return h.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return h.nodebuffer&&String.fromCharCode.apply(null,r.allocBuffer(1)).length===1}catch{return!1}}()}};function _(i){var c=65536,o=g.getTypeOf(i),p=!0;if(o==="uint8array"?p=d.applyCanBeUsed.uint8array:o==="nodebuffer"&&(p=d.applyCanBeUsed.nodebuffer),p)for(;1<c;)try{return d.stringifyByChunk(i,o,c)}catch{c=Math.floor(c/2)}return d.stringifyByChar(i)}function n(i,c){for(var o=0;o<i.length;o++)c[o]=i[o];return c}g.applyFromCharCode=_;var m={};m.string={string:v,array:function(i){return w(i,new Array(i.length))},arraybuffer:function(i){return m.string.uint8array(i).buffer},uint8array:function(i){return w(i,new Uint8Array(i.length))},nodebuffer:function(i){return w(i,r.allocBuffer(i.length))}},m.array={string:_,array:v,arraybuffer:function(i){return new Uint8Array(i).buffer},uint8array:function(i){return new Uint8Array(i)},nodebuffer:function(i){return r.newBufferFrom(i)}},m.arraybuffer={string:function(i){return _(new Uint8Array(i))},array:function(i){return n(new Uint8Array(i),new Array(i.byteLength))},arraybuffer:v,uint8array:function(i){return new Uint8Array(i)},nodebuffer:function(i){return r.newBufferFrom(new Uint8Array(i))}},m.uint8array={string:_,array:function(i){return n(i,new Array(i.length))},arraybuffer:function(i){return i.buffer},uint8array:v,nodebuffer:function(i){return r.newBufferFrom(i)}},m.nodebuffer={string:_,array:function(i){return n(i,new Array(i.length))},arraybuffer:function(i){return m.nodebuffer.uint8array(i).buffer},uint8array:function(i){return n(i,new Uint8Array(i.length))},nodebuffer:v},g.transformTo=function(i,c){if(c=c||"",!i)return c;g.checkSupport(i);var o=g.getTypeOf(c);return m[o][i](c)},g.resolve=function(i){for(var c=i.split("/"),o=[],p=0;p<c.length;p++){var y=c[p];y==="."||y===""&&p!==0&&p!==c.length-1||(y===".."?o.pop():o.push(y))}return o.join("/")},g.getTypeOf=function(i){return typeof i=="string"?"string":Object.prototype.toString.call(i)==="[object Array]"?"array":h.nodebuffer&&r.isBuffer(i)?"nodebuffer":h.uint8array&&i instanceof Uint8Array?"uint8array":h.arraybuffer&&i instanceof ArrayBuffer?"arraybuffer":void 0},g.checkSupport=function(i){if(!h[i.toLowerCase()])throw new Error(i+" is not supported by this platform")},g.MAX_VALUE_16BITS=65535,g.MAX_VALUE_32BITS=-1,g.pretty=function(i){var c,o,p="";for(o=0;o<(i||"").length;o++)p+="\\x"+((c=i.charCodeAt(o))<16?"0":"")+c.toString(16).toUpperCase();return p},g.delay=function(i,c,o){setImmediate(function(){i.apply(o||null,c||[])})},g.inherits=function(i,c){function o(){}o.prototype=c.prototype,i.prototype=new o},g.extend=function(){var i,c,o={};for(i=0;i<arguments.length;i++)for(c in arguments[i])Object.prototype.hasOwnProperty.call(arguments[i],c)&&o[c]===void 0&&(o[c]=arguments[i][c]);return o},g.prepareContent=function(i,c,o,p,y){return l.Promise.resolve(c).then(function(I){return h.blob&&(I instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(I))!==-1)&&typeof FileReader<"u"?new l.Promise(function(x,R){var j=new FileReader;j.onload=function(W){x(W.target.result)},j.onerror=function(W){R(W.target.error)},j.readAsArrayBuffer(I)}):I}).then(function(I){var x=g.getTypeOf(I);return x?(x==="arraybuffer"?I=g.transformTo("uint8array",I):x==="string"&&(y?I=s.decode(I):o&&p!==!0&&(I=function(R){return w(R,h.uint8array?new Uint8Array(R.length):new Array(R.length))}(I))),I):l.Promise.reject(new Error("Can't read the data of '"+i+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(a,C,g){var h=a("./reader/readerFor"),s=a("./utils"),r=a("./signature"),l=a("./zipEntry"),v=a("./support");function w(d){this.files=[],this.loadOptions=d}w.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var _=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(_)+", expected "+s.pretty(d)+")")}},isSignature:function(d,_){var n=this.reader.index;this.reader.setIndex(d);var m=this.reader.readString(4)===_;return this.reader.setIndex(n),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),_=v.uint8array?"uint8array":"array",n=s.transformTo(_,d);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,_,n,m=this.zip64EndOfCentralSize-44;0<m;)d=this.reader.readInt(2),_=this.reader.readInt(4),n=this.reader.readData(_),this.zip64ExtensibleData[d]={id:d,length:_,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,_;for(d=0;d<this.files.length;d++)_=this.files[d],this.reader.setIndex(_.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),_.readLocalPart(this.reader),_.handleUTF8(),_.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(d=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var _=d;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var m=_-n;if(0<m)this.isSignature(_,r.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(d){this.reader=h(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},C.exports=w},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(a,C,g){var h=a("./reader/readerFor"),s=a("./utils"),r=a("./compressedObject"),l=a("./crc32"),v=a("./utf8"),w=a("./compressions"),d=a("./support");function _(n,m){this.options=n,this.loadOptions=m}_.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(n){var m,i;if(n.skip(22),this.fileNameLength=n.readInt(2),i=n.readInt(2),this.fileName=n.readData(this.fileNameLength),n.skip(i),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=function(c){for(var o in w)if(Object.prototype.hasOwnProperty.call(w,o)&&w[o].magic===c)return w[o];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,m,n.readData(this.compressedSize))},readCentralPart:function(n){this.versionMadeBy=n.readInt(2),n.skip(2),this.bitFlag=n.readInt(2),this.compressionMethod=n.readString(2),this.date=n.readDate(),this.crc32=n.readInt(4),this.compressedSize=n.readInt(4),this.uncompressedSize=n.readInt(4);var m=n.readInt(2);if(this.extraFieldsLength=n.readInt(2),this.fileCommentLength=n.readInt(2),this.diskNumberStart=n.readInt(2),this.internalFileAttributes=n.readInt(2),this.externalFileAttributes=n.readInt(4),this.localHeaderOffset=n.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");n.skip(m),this.readExtraFields(n),this.parseZIP64ExtraField(n),this.fileComment=n.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var n=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),n==0&&(this.dosPermissions=63&this.externalFileAttributes),n==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var n=h(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=n.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=n.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=n.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=n.readInt(4))}},readExtraFields:function(n){var m,i,c,o=n.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});n.index+4<o;)m=n.readInt(2),i=n.readInt(2),c=n.readData(i),this.extraFields[m]={id:m,length:i,value:c};n.setIndex(o)},handleUTF8:function(){var n=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=v.utf8decode(this.fileName),this.fileCommentStr=v.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var i=s.transformTo(n,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var c=this.findExtraFieldUnicodeComment();if(c!==null)this.fileCommentStr=c;else{var o=s.transformTo(n,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var n=this.extraFields[28789];if(n){var m=h(n.value);return m.readInt(1)!==1||l(this.fileName)!==m.readInt(4)?null:v.utf8decode(m.readData(n.length-5))}return null},findExtraFieldUnicodeComment:function(){var n=this.extraFields[25461];if(n){var m=h(n.value);return m.readInt(1)!==1||l(this.fileComment)!==m.readInt(4)?null:v.utf8decode(m.readData(n.length-5))}return null}},C.exports=_},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(a,C,g){function h(m,i,c){this.name=m,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=i,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}}var s=a("./stream/StreamHelper"),r=a("./stream/DataWorker"),l=a("./utf8"),v=a("./compressedObject"),w=a("./stream/GenericWorker");h.prototype={internalStream:function(m){var i=null,c="string";try{if(!m)throw new Error("No output type specified.");var o=(c=m.toLowerCase())==="string"||c==="text";c!=="binarystring"&&c!=="text"||(c="string"),i=this._decompressWorker();var p=!this._dataBinary;p&&!o&&(i=i.pipe(new l.Utf8EncodeWorker)),!p&&o&&(i=i.pipe(new l.Utf8DecodeWorker))}catch(y){(i=new w("error")).error(y)}return new s(i,c,"")},async:function(m,i){return this.internalStream(m).accumulate(i)},nodeStream:function(m,i){return this.internalStream(m||"nodebuffer").toNodejsStream(i)},_compressWorker:function(m,i){if(this._data instanceof v&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var c=this._decompressWorker();return this._dataBinary||(c=c.pipe(new l.Utf8EncodeWorker)),v.createWorkerFrom(c,m,i)},_decompressWorker:function(){return this._data instanceof v?this._data.getContentWorker():this._data instanceof w?this._data:new r(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},n=0;n<d.length;n++)h.prototype[d[n]]=_;C.exports=h},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(a,C,g){(function(h){var s,r,l=h.MutationObserver||h.WebKitMutationObserver;if(l){var v=0,w=new l(m),d=h.document.createTextNode("");w.observe(d,{characterData:!0}),s=function(){d.data=v=++v%2}}else if(h.setImmediate||h.MessageChannel===void 0)s="document"in h&&"onreadystatechange"in h.document.createElement("script")?function(){var i=h.document.createElement("script");i.onreadystatechange=function(){m(),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},h.document.documentElement.appendChild(i)}:function(){setTimeout(m,0)};else{var _=new h.MessageChannel;_.port1.onmessage=m,s=function(){_.port2.postMessage(0)}}var n=[];function m(){var i,c;r=!0;for(var o=n.length;o;){for(c=n,n=[],i=-1;++i<o;)c[i]();o=n.length}r=!1}C.exports=function(i){n.push(i)!==1||r||s()}}).call(this,typeof xr<"u"?xr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(a,C,g){var h=a("immediate");function s(){}var r={},l=["REJECTED"],v=["FULFILLED"],w=["PENDING"];function d(o){if(typeof o!="function")throw new TypeError("resolver must be a function");this.state=w,this.queue=[],this.outcome=void 0,o!==s&&i(this,o)}function _(o,p,y){this.promise=o,typeof p=="function"&&(this.onFulfilled=p,this.callFulfilled=this.otherCallFulfilled),typeof y=="function"&&(this.onRejected=y,this.callRejected=this.otherCallRejected)}function n(o,p,y){h(function(){var I;try{I=p(y)}catch(x){return r.reject(o,x)}I===o?r.reject(o,new TypeError("Cannot resolve promise with itself")):r.resolve(o,I)})}function m(o){var p=o&&o.then;if(o&&(typeof o=="object"||typeof o=="function")&&typeof p=="function")return function(){p.apply(o,arguments)}}function i(o,p){var y=!1;function I(j){y||(y=!0,r.reject(o,j))}function x(j){y||(y=!0,r.resolve(o,j))}var R=c(function(){p(x,I)});R.status==="error"&&I(R.value)}function c(o,p){var y={};try{y.value=o(p),y.status="success"}catch(I){y.status="error",y.value=I}return y}(C.exports=d).prototype.finally=function(o){if(typeof o!="function")return this;var p=this.constructor;return this.then(function(y){return p.resolve(o()).then(function(){return y})},function(y){return p.resolve(o()).then(function(){throw y})})},d.prototype.catch=function(o){return this.then(null,o)},d.prototype.then=function(o,p){if(typeof o!="function"&&this.state===v||typeof p!="function"&&this.state===l)return this;var y=new this.constructor(s);return this.state!==w?n(y,this.state===v?o:p,this.outcome):this.queue.push(new _(y,o,p)),y},_.prototype.callFulfilled=function(o){r.resolve(this.promise,o)},_.prototype.otherCallFulfilled=function(o){n(this.promise,this.onFulfilled,o)},_.prototype.callRejected=function(o){r.reject(this.promise,o)},_.prototype.otherCallRejected=function(o){n(this.promise,this.onRejected,o)},r.resolve=function(o,p){var y=c(m,p);if(y.status==="error")return r.reject(o,y.value);var I=y.value;if(I)i(o,I);else{o.state=v,o.outcome=p;for(var x=-1,R=o.queue.length;++x<R;)o.queue[x].callFulfilled(p)}return o},r.reject=function(o,p){o.state=l,o.outcome=p;for(var y=-1,I=o.queue.length;++y<I;)o.queue[y].callRejected(p);return o},d.resolve=function(o){return o instanceof this?o:r.resolve(new this(s),o)},d.reject=function(o){var p=new this(s);return r.reject(p,o)},d.all=function(o){var p=this;if(Object.prototype.toString.call(o)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=o.length,I=!1;if(!y)return this.resolve([]);for(var x=new Array(y),R=0,j=-1,W=new this(s);++j<y;)T(o[j],j);return W;function T(q,rt){p.resolve(q).then(function(b){x[rt]=b,++R!==y||I||(I=!0,r.resolve(W,x))},function(b){I||(I=!0,r.reject(W,b))})}},d.race=function(o){var p=this;if(Object.prototype.toString.call(o)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=o.length,I=!1;if(!y)return this.resolve([]);for(var x=-1,R=new this(s);++x<y;)j=o[x],p.resolve(j).then(function(W){I||(I=!0,r.resolve(R,W))},function(W){I||(I=!0,r.reject(R,W))});var j;return R}},{immediate:36}],38:[function(a,C,g){var h={};(0,a("./lib/utils/common").assign)(h,a("./lib/deflate"),a("./lib/inflate"),a("./lib/zlib/constants")),C.exports=h},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(a,C,g){var h=a("./zlib/deflate"),s=a("./utils/common"),r=a("./utils/strings"),l=a("./zlib/messages"),v=a("./zlib/zstream"),w=Object.prototype.toString,d=0,_=-1,n=0,m=8;function i(o){if(!(this instanceof i))return new i(o);this.options=s.assign({level:_,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:n,to:""},o||{});var p=this.options;p.raw&&0<p.windowBits?p.windowBits=-p.windowBits:p.gzip&&0<p.windowBits&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var y=h.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(y!==d)throw new Error(l[y]);if(p.header&&h.deflateSetHeader(this.strm,p.header),p.dictionary){var I;if(I=typeof p.dictionary=="string"?r.string2buf(p.dictionary):w.call(p.dictionary)==="[object ArrayBuffer]"?new Uint8Array(p.dictionary):p.dictionary,(y=h.deflateSetDictionary(this.strm,I))!==d)throw new Error(l[y]);this._dict_set=!0}}function c(o,p){var y=new i(p);if(y.push(o,!0),y.err)throw y.msg||l[y.err];return y.result}i.prototype.push=function(o,p){var y,I,x=this.strm,R=this.options.chunkSize;if(this.ended)return!1;I=p===~~p?p:p===!0?4:0,typeof o=="string"?x.input=r.string2buf(o):w.call(o)==="[object ArrayBuffer]"?x.input=new Uint8Array(o):x.input=o,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new s.Buf8(R),x.next_out=0,x.avail_out=R),(y=h.deflate(x,I))!==1&&y!==d)return this.onEnd(y),!(this.ended=!0);x.avail_out!==0&&(x.avail_in!==0||I!==4&&I!==2)||(this.options.to==="string"?this.onData(r.buf2binstring(s.shrinkBuf(x.output,x.next_out))):this.onData(s.shrinkBuf(x.output,x.next_out)))}while((0<x.avail_in||x.avail_out===0)&&y!==1);return I===4?(y=h.deflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===d):I!==2||(this.onEnd(d),!(x.avail_out=0))},i.prototype.onData=function(o){this.chunks.push(o)},i.prototype.onEnd=function(o){o===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg},g.Deflate=i,g.deflate=c,g.deflateRaw=function(o,p){return(p=p||{}).raw=!0,c(o,p)},g.gzip=function(o,p){return(p=p||{}).gzip=!0,c(o,p)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(a,C,g){var h=a("./zlib/inflate"),s=a("./utils/common"),r=a("./utils/strings"),l=a("./zlib/constants"),v=a("./zlib/messages"),w=a("./zlib/zstream"),d=a("./zlib/gzheader"),_=Object.prototype.toString;function n(i){if(!(this instanceof n))return new n(i);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},i||{});var c=this.options;c.raw&&0<=c.windowBits&&c.windowBits<16&&(c.windowBits=-c.windowBits,c.windowBits===0&&(c.windowBits=-15)),!(0<=c.windowBits&&c.windowBits<16)||i&&i.windowBits||(c.windowBits+=32),15<c.windowBits&&c.windowBits<48&&!(15&c.windowBits)&&(c.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new w,this.strm.avail_out=0;var o=h.inflateInit2(this.strm,c.windowBits);if(o!==l.Z_OK)throw new Error(v[o]);this.header=new d,h.inflateGetHeader(this.strm,this.header)}function m(i,c){var o=new n(c);if(o.push(i,!0),o.err)throw o.msg||v[o.err];return o.result}n.prototype.push=function(i,c){var o,p,y,I,x,R,j=this.strm,W=this.options.chunkSize,T=this.options.dictionary,q=!1;if(this.ended)return!1;p=c===~~c?c:c===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof i=="string"?j.input=r.binstring2buf(i):_.call(i)==="[object ArrayBuffer]"?j.input=new Uint8Array(i):j.input=i,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new s.Buf8(W),j.next_out=0,j.avail_out=W),(o=h.inflate(j,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&T&&(R=typeof T=="string"?r.string2buf(T):_.call(T)==="[object ArrayBuffer]"?new Uint8Array(T):T,o=h.inflateSetDictionary(this.strm,R)),o===l.Z_BUF_ERROR&&q===!0&&(o=l.Z_OK,q=!1),o!==l.Z_STREAM_END&&o!==l.Z_OK)return this.onEnd(o),!(this.ended=!0);j.next_out&&(j.avail_out!==0&&o!==l.Z_STREAM_END&&(j.avail_in!==0||p!==l.Z_FINISH&&p!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(y=r.utf8border(j.output,j.next_out),I=j.next_out-y,x=r.buf2string(j.output,y),j.next_out=I,j.avail_out=W-I,I&&s.arraySet(j.output,j.output,y,I,0),this.onData(x)):this.onData(s.shrinkBuf(j.output,j.next_out)))),j.avail_in===0&&j.avail_out===0&&(q=!0)}while((0<j.avail_in||j.avail_out===0)&&o!==l.Z_STREAM_END);return o===l.Z_STREAM_END&&(p=l.Z_FINISH),p===l.Z_FINISH?(o=h.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===l.Z_OK):p!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(j.avail_out=0))},n.prototype.onData=function(i){this.chunks.push(i)},n.prototype.onEnd=function(i){i===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg},g.Inflate=n,g.inflate=m,g.inflateRaw=function(i,c){return(c=c||{}).raw=!0,m(i,c)},g.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(a,C,g){var h=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";g.assign=function(l){for(var v=Array.prototype.slice.call(arguments,1);v.length;){var w=v.shift();if(w){if(typeof w!="object")throw new TypeError(w+"must be non-object");for(var d in w)w.hasOwnProperty(d)&&(l[d]=w[d])}}return l},g.shrinkBuf=function(l,v){return l.length===v?l:l.subarray?l.subarray(0,v):(l.length=v,l)};var s={arraySet:function(l,v,w,d,_){if(v.subarray&&l.subarray)l.set(v.subarray(w,w+d),_);else for(var n=0;n<d;n++)l[_+n]=v[w+n]},flattenChunks:function(l){var v,w,d,_,n,m;for(v=d=0,w=l.length;v<w;v++)d+=l[v].length;for(m=new Uint8Array(d),v=_=0,w=l.length;v<w;v++)n=l[v],m.set(n,_),_+=n.length;return m}},r={arraySet:function(l,v,w,d,_){for(var n=0;n<d;n++)l[_+n]=v[w+n]},flattenChunks:function(l){return[].concat.apply([],l)}};g.setTyped=function(l){l?(g.Buf8=Uint8Array,g.Buf16=Uint16Array,g.Buf32=Int32Array,g.assign(g,s)):(g.Buf8=Array,g.Buf16=Array,g.Buf32=Array,g.assign(g,r))},g.setTyped(h)},{}],42:[function(a,C,g){var h=a("./common"),s=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var l=new h.Buf8(256),v=0;v<256;v++)l[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;function w(d,_){if(_<65537&&(d.subarray&&r||!d.subarray&&s))return String.fromCharCode.apply(null,h.shrinkBuf(d,_));for(var n="",m=0;m<_;m++)n+=String.fromCharCode(d[m]);return n}l[254]=l[254]=1,g.string2buf=function(d){var _,n,m,i,c,o=d.length,p=0;for(i=0;i<o;i++)(64512&(n=d.charCodeAt(i)))==55296&&i+1<o&&(64512&(m=d.charCodeAt(i+1)))==56320&&(n=65536+(n-55296<<10)+(m-56320),i++),p+=n<128?1:n<2048?2:n<65536?3:4;for(_=new h.Buf8(p),i=c=0;c<p;i++)(64512&(n=d.charCodeAt(i)))==55296&&i+1<o&&(64512&(m=d.charCodeAt(i+1)))==56320&&(n=65536+(n-55296<<10)+(m-56320),i++),n<128?_[c++]=n:(n<2048?_[c++]=192|n>>>6:(n<65536?_[c++]=224|n>>>12:(_[c++]=240|n>>>18,_[c++]=128|n>>>12&63),_[c++]=128|n>>>6&63),_[c++]=128|63&n);return _},g.buf2binstring=function(d){return w(d,d.length)},g.binstring2buf=function(d){for(var _=new h.Buf8(d.length),n=0,m=_.length;n<m;n++)_[n]=d.charCodeAt(n);return _},g.buf2string=function(d,_){var n,m,i,c,o=_||d.length,p=new Array(2*o);for(n=m=0;n<o;)if((i=d[n++])<128)p[m++]=i;else if(4<(c=l[i]))p[m++]=65533,n+=c-1;else{for(i&=c===2?31:c===3?15:7;1<c&&n<o;)i=i<<6|63&d[n++],c--;1<c?p[m++]=65533:i<65536?p[m++]=i:(i-=65536,p[m++]=55296|i>>10&1023,p[m++]=56320|1023&i)}return w(p,m)},g.utf8border=function(d,_){var n;for((_=_||d.length)>d.length&&(_=d.length),n=_-1;0<=n&&(192&d[n])==128;)n--;return n<0||n===0?_:n+l[d[n]]>_?n:_}},{"./common":41}],43:[function(a,C,g){C.exports=function(h,s,r,l){for(var v=65535&h|0,w=h>>>16&65535|0,d=0;r!==0;){for(r-=d=2e3<r?2e3:r;w=w+(v=v+s[l++]|0)|0,--d;);v%=65521,w%=65521}return v|w<<16|0}},{}],44:[function(a,C,g){C.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(a,C,g){var h=function(){for(var s,r=[],l=0;l<256;l++){s=l;for(var v=0;v<8;v++)s=1&s?3988292384^s>>>1:s>>>1;r[l]=s}return r}();C.exports=function(s,r,l,v){var w=h,d=v+l;s^=-1;for(var _=v;_<d;_++)s=s>>>8^w[255&(s^r[_])];return-1^s}},{}],46:[function(a,C,g){var h,s=a("../utils/common"),r=a("./trees"),l=a("./adler32"),v=a("./crc32"),w=a("./messages"),d=0,_=4,n=0,m=-2,i=-1,c=4,o=2,p=8,y=9,I=286,x=30,R=19,j=2*I+1,W=15,T=3,q=258,rt=q+T+1,b=42,L=113,e=1,N=2,it=3,Z=4;function ut(t,D){return t.msg=w[D],D}function M(t){return(t<<1)-(4<t?9:0)}function et(t){for(var D=t.length;0<=--D;)t[D]=0}function O(t){var D=t.state,S=D.pending;S>t.avail_out&&(S=t.avail_out),S!==0&&(s.arraySet(t.output,D.pending_buf,D.pending_out,S,t.next_out),t.next_out+=S,D.pending_out+=S,t.total_out+=S,t.avail_out-=S,D.pending-=S,D.pending===0&&(D.pending_out=0))}function z(t,D){r._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,D),t.block_start=t.strstart,O(t.strm)}function Q(t,D){t.pending_buf[t.pending++]=D}function X(t,D){t.pending_buf[t.pending++]=D>>>8&255,t.pending_buf[t.pending++]=255&D}function J(t,D){var S,f,u=t.max_chain_length,k=t.strstart,P=t.prev_length,U=t.nice_match,E=t.strstart>t.w_size-rt?t.strstart-(t.w_size-rt):0,F=t.window,$=t.w_mask,H=t.prev,tt=t.strstart+q,_t=F[k+P-1],ft=F[k+P];t.prev_length>=t.good_match&&(u>>=2),U>t.lookahead&&(U=t.lookahead);do if(F[(S=D)+P]===ft&&F[S+P-1]===_t&&F[S]===F[k]&&F[++S]===F[k+1]){k+=2,S++;do;while(F[++k]===F[++S]&&F[++k]===F[++S]&&F[++k]===F[++S]&&F[++k]===F[++S]&&F[++k]===F[++S]&&F[++k]===F[++S]&&F[++k]===F[++S]&&F[++k]===F[++S]&&k<tt);if(f=q-(tt-k),k=tt-q,P<f){if(t.match_start=D,U<=(P=f))break;_t=F[k+P-1],ft=F[k+P]}}while((D=H[D&$])>E&&--u!=0);return P<=t.lookahead?P:t.lookahead}function xt(t){var D,S,f,u,k,P,U,E,F,$,H=t.w_size;do{if(u=t.window_size-t.lookahead-t.strstart,t.strstart>=H+(H-rt)){for(s.arraySet(t.window,t.window,H,H,0),t.match_start-=H,t.strstart-=H,t.block_start-=H,D=S=t.hash_size;f=t.head[--D],t.head[D]=H<=f?f-H:0,--S;);for(D=S=H;f=t.prev[--D],t.prev[D]=H<=f?f-H:0,--S;);u+=H}if(t.strm.avail_in===0)break;if(P=t.strm,U=t.window,E=t.strstart+t.lookahead,F=u,$=void 0,$=P.avail_in,F<$&&($=F),S=$===0?0:(P.avail_in-=$,s.arraySet(U,P.input,P.next_in,$,E),P.state.wrap===1?P.adler=l(P.adler,U,$,E):P.state.wrap===2&&(P.adler=v(P.adler,U,$,E)),P.next_in+=$,P.total_in+=$,$),t.lookahead+=S,t.lookahead+t.insert>=T)for(k=t.strstart-t.insert,t.ins_h=t.window[k],t.ins_h=(t.ins_h<<t.hash_shift^t.window[k+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[k+T-1])&t.hash_mask,t.prev[k&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=k,k++,t.insert--,!(t.lookahead+t.insert<T)););}while(t.lookahead<rt&&t.strm.avail_in!==0)}function mt(t,D){for(var S,f;;){if(t.lookahead<rt){if(xt(t),t.lookahead<rt&&D===d)return e;if(t.lookahead===0)break}if(S=0,t.lookahead>=T&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,S=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),S!==0&&t.strstart-S<=t.w_size-rt&&(t.match_length=J(t,S)),t.match_length>=T)if(f=r._tr_tally(t,t.strstart-t.match_start,t.match_length-T),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=T){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,S=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else f=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(f&&(z(t,!1),t.strm.avail_out===0))return e}return t.insert=t.strstart<T-1?t.strstart:T-1,D===_?(z(t,!0),t.strm.avail_out===0?it:Z):t.last_lit&&(z(t,!1),t.strm.avail_out===0)?e:N}function ot(t,D){for(var S,f,u;;){if(t.lookahead<rt){if(xt(t),t.lookahead<rt&&D===d)return e;if(t.lookahead===0)break}if(S=0,t.lookahead>=T&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,S=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=T-1,S!==0&&t.prev_length<t.max_lazy_match&&t.strstart-S<=t.w_size-rt&&(t.match_length=J(t,S),t.match_length<=5&&(t.strategy===1||t.match_length===T&&4096<t.strstart-t.match_start)&&(t.match_length=T-1)),t.prev_length>=T&&t.match_length<=t.prev_length){for(u=t.strstart+t.lookahead-T,f=r._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-T),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=u&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,S=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=T-1,t.strstart++,f&&(z(t,!1),t.strm.avail_out===0))return e}else if(t.match_available){if((f=r._tr_tally(t,0,t.window[t.strstart-1]))&&z(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(f=r._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<T-1?t.strstart:T-1,D===_?(z(t,!0),t.strm.avail_out===0?it:Z):t.last_lit&&(z(t,!1),t.strm.avail_out===0)?e:N}function dt(t,D,S,f,u){this.good_length=t,this.max_lazy=D,this.nice_length=S,this.max_chain=f,this.func=u}function Ct(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=p,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*j),this.dyn_dtree=new s.Buf16(2*(2*x+1)),this.bl_tree=new s.Buf16(2*(2*R+1)),et(this.dyn_ltree),et(this.dyn_dtree),et(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(W+1),this.heap=new s.Buf16(2*I+1),et(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*I+1),et(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ct(t){var D;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=o,(D=t.state).pending=0,D.pending_out=0,D.wrap<0&&(D.wrap=-D.wrap),D.status=D.wrap?b:L,t.adler=D.wrap===2?0:1,D.last_flush=d,r._tr_init(D),n):ut(t,m)}function gt(t){var D=ct(t);return D===n&&function(S){S.window_size=2*S.w_size,et(S.head),S.max_lazy_match=h[S.level].max_lazy,S.good_match=h[S.level].good_length,S.nice_match=h[S.level].nice_length,S.max_chain_length=h[S.level].max_chain,S.strstart=0,S.block_start=0,S.lookahead=0,S.insert=0,S.match_length=S.prev_length=T-1,S.match_available=0,S.ins_h=0}(t.state),D}function Et(t,D,S,f,u,k){if(!t)return m;var P=1;if(D===i&&(D=6),f<0?(P=0,f=-f):15<f&&(P=2,f-=16),u<1||y<u||S!==p||f<8||15<f||D<0||9<D||k<0||c<k)return ut(t,m);f===8&&(f=9);var U=new Ct;return(t.state=U).strm=t,U.wrap=P,U.gzhead=null,U.w_bits=f,U.w_size=1<<U.w_bits,U.w_mask=U.w_size-1,U.hash_bits=u+7,U.hash_size=1<<U.hash_bits,U.hash_mask=U.hash_size-1,U.hash_shift=~~((U.hash_bits+T-1)/T),U.window=new s.Buf8(2*U.w_size),U.head=new s.Buf16(U.hash_size),U.prev=new s.Buf16(U.w_size),U.lit_bufsize=1<<u+6,U.pending_buf_size=4*U.lit_bufsize,U.pending_buf=new s.Buf8(U.pending_buf_size),U.d_buf=1*U.lit_bufsize,U.l_buf=3*U.lit_bufsize,U.level=D,U.strategy=k,U.method=S,gt(t)}h=[new dt(0,0,0,0,function(t,D){var S=65535;for(S>t.pending_buf_size-5&&(S=t.pending_buf_size-5);;){if(t.lookahead<=1){if(xt(t),t.lookahead===0&&D===d)return e;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var f=t.block_start+S;if((t.strstart===0||t.strstart>=f)&&(t.lookahead=t.strstart-f,t.strstart=f,z(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-rt&&(z(t,!1),t.strm.avail_out===0))return e}return t.insert=0,D===_?(z(t,!0),t.strm.avail_out===0?it:Z):(t.strstart>t.block_start&&(z(t,!1),t.strm.avail_out),e)}),new dt(4,4,8,4,mt),new dt(4,5,16,8,mt),new dt(4,6,32,32,mt),new dt(4,4,16,16,ot),new dt(8,16,32,32,ot),new dt(8,16,128,128,ot),new dt(8,32,128,256,ot),new dt(32,128,258,1024,ot),new dt(32,258,258,4096,ot)],g.deflateInit=function(t,D){return Et(t,D,p,15,8,0)},g.deflateInit2=Et,g.deflateReset=gt,g.deflateResetKeep=ct,g.deflateSetHeader=function(t,D){return t&&t.state?t.state.wrap!==2?m:(t.state.gzhead=D,n):m},g.deflate=function(t,D){var S,f,u,k;if(!t||!t.state||5<D||D<0)return t?ut(t,m):m;if(f=t.state,!t.output||!t.input&&t.avail_in!==0||f.status===666&&D!==_)return ut(t,t.avail_out===0?-5:m);if(f.strm=t,S=f.last_flush,f.last_flush=D,f.status===b)if(f.wrap===2)t.adler=0,Q(f,31),Q(f,139),Q(f,8),f.gzhead?(Q(f,(f.gzhead.text?1:0)+(f.gzhead.hcrc?2:0)+(f.gzhead.extra?4:0)+(f.gzhead.name?8:0)+(f.gzhead.comment?16:0)),Q(f,255&f.gzhead.time),Q(f,f.gzhead.time>>8&255),Q(f,f.gzhead.time>>16&255),Q(f,f.gzhead.time>>24&255),Q(f,f.level===9?2:2<=f.strategy||f.level<2?4:0),Q(f,255&f.gzhead.os),f.gzhead.extra&&f.gzhead.extra.length&&(Q(f,255&f.gzhead.extra.length),Q(f,f.gzhead.extra.length>>8&255)),f.gzhead.hcrc&&(t.adler=v(t.adler,f.pending_buf,f.pending,0)),f.gzindex=0,f.status=69):(Q(f,0),Q(f,0),Q(f,0),Q(f,0),Q(f,0),Q(f,f.level===9?2:2<=f.strategy||f.level<2?4:0),Q(f,3),f.status=L);else{var P=p+(f.w_bits-8<<4)<<8;P|=(2<=f.strategy||f.level<2?0:f.level<6?1:f.level===6?2:3)<<6,f.strstart!==0&&(P|=32),P+=31-P%31,f.status=L,X(f,P),f.strstart!==0&&(X(f,t.adler>>>16),X(f,65535&t.adler)),t.adler=1}if(f.status===69)if(f.gzhead.extra){for(u=f.pending;f.gzindex<(65535&f.gzhead.extra.length)&&(f.pending!==f.pending_buf_size||(f.gzhead.hcrc&&f.pending>u&&(t.adler=v(t.adler,f.pending_buf,f.pending-u,u)),O(t),u=f.pending,f.pending!==f.pending_buf_size));)Q(f,255&f.gzhead.extra[f.gzindex]),f.gzindex++;f.gzhead.hcrc&&f.pending>u&&(t.adler=v(t.adler,f.pending_buf,f.pending-u,u)),f.gzindex===f.gzhead.extra.length&&(f.gzindex=0,f.status=73)}else f.status=73;if(f.status===73)if(f.gzhead.name){u=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>u&&(t.adler=v(t.adler,f.pending_buf,f.pending-u,u)),O(t),u=f.pending,f.pending===f.pending_buf_size)){k=1;break}k=f.gzindex<f.gzhead.name.length?255&f.gzhead.name.charCodeAt(f.gzindex++):0,Q(f,k)}while(k!==0);f.gzhead.hcrc&&f.pending>u&&(t.adler=v(t.adler,f.pending_buf,f.pending-u,u)),k===0&&(f.gzindex=0,f.status=91)}else f.status=91;if(f.status===91)if(f.gzhead.comment){u=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>u&&(t.adler=v(t.adler,f.pending_buf,f.pending-u,u)),O(t),u=f.pending,f.pending===f.pending_buf_size)){k=1;break}k=f.gzindex<f.gzhead.comment.length?255&f.gzhead.comment.charCodeAt(f.gzindex++):0,Q(f,k)}while(k!==0);f.gzhead.hcrc&&f.pending>u&&(t.adler=v(t.adler,f.pending_buf,f.pending-u,u)),k===0&&(f.status=103)}else f.status=103;if(f.status===103&&(f.gzhead.hcrc?(f.pending+2>f.pending_buf_size&&O(t),f.pending+2<=f.pending_buf_size&&(Q(f,255&t.adler),Q(f,t.adler>>8&255),t.adler=0,f.status=L)):f.status=L),f.pending!==0){if(O(t),t.avail_out===0)return f.last_flush=-1,n}else if(t.avail_in===0&&M(D)<=M(S)&&D!==_)return ut(t,-5);if(f.status===666&&t.avail_in!==0)return ut(t,-5);if(t.avail_in!==0||f.lookahead!==0||D!==d&&f.status!==666){var U=f.strategy===2?function(E,F){for(var $;;){if(E.lookahead===0&&(xt(E),E.lookahead===0)){if(F===d)return e;break}if(E.match_length=0,$=r._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++,$&&(z(E,!1),E.strm.avail_out===0))return e}return E.insert=0,F===_?(z(E,!0),E.strm.avail_out===0?it:Z):E.last_lit&&(z(E,!1),E.strm.avail_out===0)?e:N}(f,D):f.strategy===3?function(E,F){for(var $,H,tt,_t,ft=E.window;;){if(E.lookahead<=q){if(xt(E),E.lookahead<=q&&F===d)return e;if(E.lookahead===0)break}if(E.match_length=0,E.lookahead>=T&&0<E.strstart&&(H=ft[tt=E.strstart-1])===ft[++tt]&&H===ft[++tt]&&H===ft[++tt]){_t=E.strstart+q;do;while(H===ft[++tt]&&H===ft[++tt]&&H===ft[++tt]&&H===ft[++tt]&&H===ft[++tt]&&H===ft[++tt]&&H===ft[++tt]&&H===ft[++tt]&&tt<_t);E.match_length=q-(_t-tt),E.match_length>E.lookahead&&(E.match_length=E.lookahead)}if(E.match_length>=T?($=r._tr_tally(E,1,E.match_length-T),E.lookahead-=E.match_length,E.strstart+=E.match_length,E.match_length=0):($=r._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++),$&&(z(E,!1),E.strm.avail_out===0))return e}return E.insert=0,F===_?(z(E,!0),E.strm.avail_out===0?it:Z):E.last_lit&&(z(E,!1),E.strm.avail_out===0)?e:N}(f,D):h[f.level].func(f,D);if(U!==it&&U!==Z||(f.status=666),U===e||U===it)return t.avail_out===0&&(f.last_flush=-1),n;if(U===N&&(D===1?r._tr_align(f):D!==5&&(r._tr_stored_block(f,0,0,!1),D===3&&(et(f.head),f.lookahead===0&&(f.strstart=0,f.block_start=0,f.insert=0))),O(t),t.avail_out===0))return f.last_flush=-1,n}return D!==_?n:f.wrap<=0?1:(f.wrap===2?(Q(f,255&t.adler),Q(f,t.adler>>8&255),Q(f,t.adler>>16&255),Q(f,t.adler>>24&255),Q(f,255&t.total_in),Q(f,t.total_in>>8&255),Q(f,t.total_in>>16&255),Q(f,t.total_in>>24&255)):(X(f,t.adler>>>16),X(f,65535&t.adler)),O(t),0<f.wrap&&(f.wrap=-f.wrap),f.pending!==0?n:1)},g.deflateEnd=function(t){var D;return t&&t.state?(D=t.state.status)!==b&&D!==69&&D!==73&&D!==91&&D!==103&&D!==L&&D!==666?ut(t,m):(t.state=null,D===L?ut(t,-3):n):m},g.deflateSetDictionary=function(t,D){var S,f,u,k,P,U,E,F,$=D.length;if(!t||!t.state||(k=(S=t.state).wrap)===2||k===1&&S.status!==b||S.lookahead)return m;for(k===1&&(t.adler=l(t.adler,D,$,0)),S.wrap=0,$>=S.w_size&&(k===0&&(et(S.head),S.strstart=0,S.block_start=0,S.insert=0),F=new s.Buf8(S.w_size),s.arraySet(F,D,$-S.w_size,S.w_size,0),D=F,$=S.w_size),P=t.avail_in,U=t.next_in,E=t.input,t.avail_in=$,t.next_in=0,t.input=D,xt(S);S.lookahead>=T;){for(f=S.strstart,u=S.lookahead-(T-1);S.ins_h=(S.ins_h<<S.hash_shift^S.window[f+T-1])&S.hash_mask,S.prev[f&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=f,f++,--u;);S.strstart=f,S.lookahead=T-1,xt(S)}return S.strstart+=S.lookahead,S.block_start=S.strstart,S.insert=S.lookahead,S.lookahead=0,S.match_length=S.prev_length=T-1,S.match_available=0,t.next_in=U,t.input=E,t.avail_in=P,S.wrap=k,n},g.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(a,C,g){C.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(a,C,g){C.exports=function(h,s){var r,l,v,w,d,_,n,m,i,c,o,p,y,I,x,R,j,W,T,q,rt,b,L,e,N;r=h.state,l=h.next_in,e=h.input,v=l+(h.avail_in-5),w=h.next_out,N=h.output,d=w-(s-h.avail_out),_=w+(h.avail_out-257),n=r.dmax,m=r.wsize,i=r.whave,c=r.wnext,o=r.window,p=r.hold,y=r.bits,I=r.lencode,x=r.distcode,R=(1<<r.lenbits)-1,j=(1<<r.distbits)-1;t:do{y<15&&(p+=e[l++]<<y,y+=8,p+=e[l++]<<y,y+=8),W=I[p&R];e:for(;;){if(p>>>=T=W>>>24,y-=T,(T=W>>>16&255)===0)N[w++]=65535&W;else{if(!(16&T)){if(!(64&T)){W=I[(65535&W)+(p&(1<<T)-1)];continue e}if(32&T){r.mode=12;break t}h.msg="invalid literal/length code",r.mode=30;break t}q=65535&W,(T&=15)&&(y<T&&(p+=e[l++]<<y,y+=8),q+=p&(1<<T)-1,p>>>=T,y-=T),y<15&&(p+=e[l++]<<y,y+=8,p+=e[l++]<<y,y+=8),W=x[p&j];r:for(;;){if(p>>>=T=W>>>24,y-=T,!(16&(T=W>>>16&255))){if(!(64&T)){W=x[(65535&W)+(p&(1<<T)-1)];continue r}h.msg="invalid distance code",r.mode=30;break t}if(rt=65535&W,y<(T&=15)&&(p+=e[l++]<<y,(y+=8)<T&&(p+=e[l++]<<y,y+=8)),n<(rt+=p&(1<<T)-1)){h.msg="invalid distance too far back",r.mode=30;break t}if(p>>>=T,y-=T,(T=w-d)<rt){if(i<(T=rt-T)&&r.sane){h.msg="invalid distance too far back",r.mode=30;break t}if(L=o,(b=0)===c){if(b+=m-T,T<q){for(q-=T;N[w++]=o[b++],--T;);b=w-rt,L=N}}else if(c<T){if(b+=m+c-T,(T-=c)<q){for(q-=T;N[w++]=o[b++],--T;);if(b=0,c<q){for(q-=T=c;N[w++]=o[b++],--T;);b=w-rt,L=N}}}else if(b+=c-T,T<q){for(q-=T;N[w++]=o[b++],--T;);b=w-rt,L=N}for(;2<q;)N[w++]=L[b++],N[w++]=L[b++],N[w++]=L[b++],q-=3;q&&(N[w++]=L[b++],1<q&&(N[w++]=L[b++]))}else{for(b=w-rt;N[w++]=N[b++],N[w++]=N[b++],N[w++]=N[b++],2<(q-=3););q&&(N[w++]=N[b++],1<q&&(N[w++]=N[b++]))}break}}break}}while(l<v&&w<_);l-=q=y>>3,p&=(1<<(y-=q<<3))-1,h.next_in=l,h.next_out=w,h.avail_in=l<v?v-l+5:5-(l-v),h.avail_out=w<_?_-w+257:257-(w-_),r.hold=p,r.bits=y}},{}],49:[function(a,C,g){var h=a("../utils/common"),s=a("./adler32"),r=a("./crc32"),l=a("./inffast"),v=a("./inftrees"),w=1,d=2,_=0,n=-2,m=1,i=852,c=592;function o(b){return(b>>>24&255)+(b>>>8&65280)+((65280&b)<<8)+((255&b)<<24)}function p(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new h.Buf16(320),this.work=new h.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(b){var L;return b&&b.state?(L=b.state,b.total_in=b.total_out=L.total=0,b.msg="",L.wrap&&(b.adler=1&L.wrap),L.mode=m,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new h.Buf32(i),L.distcode=L.distdyn=new h.Buf32(c),L.sane=1,L.back=-1,_):n}function I(b){var L;return b&&b.state?((L=b.state).wsize=0,L.whave=0,L.wnext=0,y(b)):n}function x(b,L){var e,N;return b&&b.state?(N=b.state,L<0?(e=0,L=-L):(e=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?n:(N.window!==null&&N.wbits!==L&&(N.window=null),N.wrap=e,N.wbits=L,I(b))):n}function R(b,L){var e,N;return b?(N=new p,(b.state=N).window=null,(e=x(b,L))!==_&&(b.state=null),e):n}var j,W,T=!0;function q(b){if(T){var L;for(j=new h.Buf32(512),W=new h.Buf32(32),L=0;L<144;)b.lens[L++]=8;for(;L<256;)b.lens[L++]=9;for(;L<280;)b.lens[L++]=7;for(;L<288;)b.lens[L++]=8;for(v(w,b.lens,0,288,j,0,b.work,{bits:9}),L=0;L<32;)b.lens[L++]=5;v(d,b.lens,0,32,W,0,b.work,{bits:5}),T=!1}b.lencode=j,b.lenbits=9,b.distcode=W,b.distbits=5}function rt(b,L,e,N){var it,Z=b.state;return Z.window===null&&(Z.wsize=1<<Z.wbits,Z.wnext=0,Z.whave=0,Z.window=new h.Buf8(Z.wsize)),N>=Z.wsize?(h.arraySet(Z.window,L,e-Z.wsize,Z.wsize,0),Z.wnext=0,Z.whave=Z.wsize):(N<(it=Z.wsize-Z.wnext)&&(it=N),h.arraySet(Z.window,L,e-N,it,Z.wnext),(N-=it)?(h.arraySet(Z.window,L,e-N,N,0),Z.wnext=N,Z.whave=Z.wsize):(Z.wnext+=it,Z.wnext===Z.wsize&&(Z.wnext=0),Z.whave<Z.wsize&&(Z.whave+=it))),0}g.inflateReset=I,g.inflateReset2=x,g.inflateResetKeep=y,g.inflateInit=function(b){return R(b,15)},g.inflateInit2=R,g.inflate=function(b,L){var e,N,it,Z,ut,M,et,O,z,Q,X,J,xt,mt,ot,dt,Ct,ct,gt,Et,t,D,S,f,u=0,k=new h.Buf8(4),P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!b||!b.state||!b.output||!b.input&&b.avail_in!==0)return n;(e=b.state).mode===12&&(e.mode=13),ut=b.next_out,it=b.output,et=b.avail_out,Z=b.next_in,N=b.input,M=b.avail_in,O=e.hold,z=e.bits,Q=M,X=et,D=_;t:for(;;)switch(e.mode){case m:if(e.wrap===0){e.mode=13;break}for(;z<16;){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}if(2&e.wrap&&O===35615){k[e.check=0]=255&O,k[1]=O>>>8&255,e.check=r(e.check,k,2,0),z=O=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&O)<<8)+(O>>8))%31){b.msg="incorrect header check",e.mode=30;break}if((15&O)!=8){b.msg="unknown compression method",e.mode=30;break}if(z-=4,t=8+(15&(O>>>=4)),e.wbits===0)e.wbits=t;else if(t>e.wbits){b.msg="invalid window size",e.mode=30;break}e.dmax=1<<t,b.adler=e.check=1,e.mode=512&O?10:12,z=O=0;break;case 2:for(;z<16;){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}if(e.flags=O,(255&e.flags)!=8){b.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){b.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=O>>8&1),512&e.flags&&(k[0]=255&O,k[1]=O>>>8&255,e.check=r(e.check,k,2,0)),z=O=0,e.mode=3;case 3:for(;z<32;){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}e.head&&(e.head.time=O),512&e.flags&&(k[0]=255&O,k[1]=O>>>8&255,k[2]=O>>>16&255,k[3]=O>>>24&255,e.check=r(e.check,k,4,0)),z=O=0,e.mode=4;case 4:for(;z<16;){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}e.head&&(e.head.xflags=255&O,e.head.os=O>>8),512&e.flags&&(k[0]=255&O,k[1]=O>>>8&255,e.check=r(e.check,k,2,0)),z=O=0,e.mode=5;case 5:if(1024&e.flags){for(;z<16;){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}e.length=O,e.head&&(e.head.extra_len=O),512&e.flags&&(k[0]=255&O,k[1]=O>>>8&255,e.check=r(e.check,k,2,0)),z=O=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(M<(J=e.length)&&(J=M),J&&(e.head&&(t=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),h.arraySet(e.head.extra,N,Z,J,t)),512&e.flags&&(e.check=r(e.check,N,J,Z)),M-=J,Z+=J,e.length-=J),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(M===0)break t;for(J=0;t=N[Z+J++],e.head&&t&&e.length<65536&&(e.head.name+=String.fromCharCode(t)),t&&J<M;);if(512&e.flags&&(e.check=r(e.check,N,J,Z)),M-=J,Z+=J,t)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(M===0)break t;for(J=0;t=N[Z+J++],e.head&&t&&e.length<65536&&(e.head.comment+=String.fromCharCode(t)),t&&J<M;);if(512&e.flags&&(e.check=r(e.check,N,J,Z)),M-=J,Z+=J,t)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;z<16;){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}if(O!==(65535&e.check)){b.msg="header crc mismatch",e.mode=30;break}z=O=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),b.adler=e.check=0,e.mode=12;break;case 10:for(;z<32;){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}b.adler=e.check=o(O),z=O=0,e.mode=11;case 11:if(e.havedict===0)return b.next_out=ut,b.avail_out=et,b.next_in=Z,b.avail_in=M,e.hold=O,e.bits=z,2;b.adler=e.check=1,e.mode=12;case 12:if(L===5||L===6)break t;case 13:if(e.last){O>>>=7&z,z-=7&z,e.mode=27;break}for(;z<3;){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}switch(e.last=1&O,z-=1,3&(O>>>=1)){case 0:e.mode=14;break;case 1:if(q(e),e.mode=20,L!==6)break;O>>>=2,z-=2;break t;case 2:e.mode=17;break;case 3:b.msg="invalid block type",e.mode=30}O>>>=2,z-=2;break;case 14:for(O>>>=7&z,z-=7&z;z<32;){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}if((65535&O)!=(O>>>16^65535)){b.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&O,z=O=0,e.mode=15,L===6)break t;case 15:e.mode=16;case 16:if(J=e.length){if(M<J&&(J=M),et<J&&(J=et),J===0)break t;h.arraySet(it,N,Z,J,ut),M-=J,Z+=J,et-=J,ut+=J,e.length-=J;break}e.mode=12;break;case 17:for(;z<14;){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}if(e.nlen=257+(31&O),O>>>=5,z-=5,e.ndist=1+(31&O),O>>>=5,z-=5,e.ncode=4+(15&O),O>>>=4,z-=4,286<e.nlen||30<e.ndist){b.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;z<3;){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}e.lens[P[e.have++]]=7&O,O>>>=3,z-=3}for(;e.have<19;)e.lens[P[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,S={bits:e.lenbits},D=v(0,e.lens,0,19,e.lencode,0,e.work,S),e.lenbits=S.bits,D){b.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;dt=(u=e.lencode[O&(1<<e.lenbits)-1])>>>16&255,Ct=65535&u,!((ot=u>>>24)<=z);){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}if(Ct<16)O>>>=ot,z-=ot,e.lens[e.have++]=Ct;else{if(Ct===16){for(f=ot+2;z<f;){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}if(O>>>=ot,z-=ot,e.have===0){b.msg="invalid bit length repeat",e.mode=30;break}t=e.lens[e.have-1],J=3+(3&O),O>>>=2,z-=2}else if(Ct===17){for(f=ot+3;z<f;){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}z-=ot,t=0,J=3+(7&(O>>>=ot)),O>>>=3,z-=3}else{for(f=ot+7;z<f;){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}z-=ot,t=0,J=11+(127&(O>>>=ot)),O>>>=7,z-=7}if(e.have+J>e.nlen+e.ndist){b.msg="invalid bit length repeat",e.mode=30;break}for(;J--;)e.lens[e.have++]=t}}if(e.mode===30)break;if(e.lens[256]===0){b.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,S={bits:e.lenbits},D=v(w,e.lens,0,e.nlen,e.lencode,0,e.work,S),e.lenbits=S.bits,D){b.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,S={bits:e.distbits},D=v(d,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,S),e.distbits=S.bits,D){b.msg="invalid distances set",e.mode=30;break}if(e.mode=20,L===6)break t;case 20:e.mode=21;case 21:if(6<=M&&258<=et){b.next_out=ut,b.avail_out=et,b.next_in=Z,b.avail_in=M,e.hold=O,e.bits=z,l(b,X),ut=b.next_out,it=b.output,et=b.avail_out,Z=b.next_in,N=b.input,M=b.avail_in,O=e.hold,z=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;dt=(u=e.lencode[O&(1<<e.lenbits)-1])>>>16&255,Ct=65535&u,!((ot=u>>>24)<=z);){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}if(dt&&!(240&dt)){for(ct=ot,gt=dt,Et=Ct;dt=(u=e.lencode[Et+((O&(1<<ct+gt)-1)>>ct)])>>>16&255,Ct=65535&u,!(ct+(ot=u>>>24)<=z);){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}O>>>=ct,z-=ct,e.back+=ct}if(O>>>=ot,z-=ot,e.back+=ot,e.length=Ct,dt===0){e.mode=26;break}if(32&dt){e.back=-1,e.mode=12;break}if(64&dt){b.msg="invalid literal/length code",e.mode=30;break}e.extra=15&dt,e.mode=22;case 22:if(e.extra){for(f=e.extra;z<f;){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}e.length+=O&(1<<e.extra)-1,O>>>=e.extra,z-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;dt=(u=e.distcode[O&(1<<e.distbits)-1])>>>16&255,Ct=65535&u,!((ot=u>>>24)<=z);){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}if(!(240&dt)){for(ct=ot,gt=dt,Et=Ct;dt=(u=e.distcode[Et+((O&(1<<ct+gt)-1)>>ct)])>>>16&255,Ct=65535&u,!(ct+(ot=u>>>24)<=z);){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}O>>>=ct,z-=ct,e.back+=ct}if(O>>>=ot,z-=ot,e.back+=ot,64&dt){b.msg="invalid distance code",e.mode=30;break}e.offset=Ct,e.extra=15&dt,e.mode=24;case 24:if(e.extra){for(f=e.extra;z<f;){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}e.offset+=O&(1<<e.extra)-1,O>>>=e.extra,z-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){b.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(et===0)break t;if(J=X-et,e.offset>J){if((J=e.offset-J)>e.whave&&e.sane){b.msg="invalid distance too far back",e.mode=30;break}xt=J>e.wnext?(J-=e.wnext,e.wsize-J):e.wnext-J,J>e.length&&(J=e.length),mt=e.window}else mt=it,xt=ut-e.offset,J=e.length;for(et<J&&(J=et),et-=J,e.length-=J;it[ut++]=mt[xt++],--J;);e.length===0&&(e.mode=21);break;case 26:if(et===0)break t;it[ut++]=e.length,et--,e.mode=21;break;case 27:if(e.wrap){for(;z<32;){if(M===0)break t;M--,O|=N[Z++]<<z,z+=8}if(X-=et,b.total_out+=X,e.total+=X,X&&(b.adler=e.check=e.flags?r(e.check,it,X,ut-X):s(e.check,it,X,ut-X)),X=et,(e.flags?O:o(O))!==e.check){b.msg="incorrect data check",e.mode=30;break}z=O=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;z<32;){if(M===0)break t;M--,O+=N[Z++]<<z,z+=8}if(O!==(4294967295&e.total)){b.msg="incorrect length check",e.mode=30;break}z=O=0}e.mode=29;case 29:D=1;break t;case 30:D=-3;break t;case 31:return-4;case 32:default:return n}return b.next_out=ut,b.avail_out=et,b.next_in=Z,b.avail_in=M,e.hold=O,e.bits=z,(e.wsize||X!==b.avail_out&&e.mode<30&&(e.mode<27||L!==4))&&rt(b,b.output,b.next_out,X-b.avail_out)?(e.mode=31,-4):(Q-=b.avail_in,X-=b.avail_out,b.total_in+=Q,b.total_out+=X,e.total+=X,e.wrap&&X&&(b.adler=e.check=e.flags?r(e.check,it,X,b.next_out-X):s(e.check,it,X,b.next_out-X)),b.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(Q==0&&X===0||L===4)&&D===_&&(D=-5),D)},g.inflateEnd=function(b){if(!b||!b.state)return n;var L=b.state;return L.window&&(L.window=null),b.state=null,_},g.inflateGetHeader=function(b,L){var e;return b&&b.state&&2&(e=b.state).wrap?((e.head=L).done=!1,_):n},g.inflateSetDictionary=function(b,L){var e,N=L.length;return b&&b.state?(e=b.state).wrap!==0&&e.mode!==11?n:e.mode===11&&s(1,L,N,0)!==e.check?-3:rt(b,L,N,N)?(e.mode=31,-4):(e.havedict=1,_):n},g.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(a,C,g){var h=a("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],v=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];C.exports=function(w,d,_,n,m,i,c,o){var p,y,I,x,R,j,W,T,q,rt=o.bits,b=0,L=0,e=0,N=0,it=0,Z=0,ut=0,M=0,et=0,O=0,z=null,Q=0,X=new h.Buf16(16),J=new h.Buf16(16),xt=null,mt=0;for(b=0;b<=15;b++)X[b]=0;for(L=0;L<n;L++)X[d[_+L]]++;for(it=rt,N=15;1<=N&&X[N]===0;N--);if(N<it&&(it=N),N===0)return m[i++]=20971520,m[i++]=20971520,o.bits=1,0;for(e=1;e<N&&X[e]===0;e++);for(it<e&&(it=e),b=M=1;b<=15;b++)if(M<<=1,(M-=X[b])<0)return-1;if(0<M&&(w===0||N!==1))return-1;for(J[1]=0,b=1;b<15;b++)J[b+1]=J[b]+X[b];for(L=0;L<n;L++)d[_+L]!==0&&(c[J[d[_+L]]++]=L);if(j=w===0?(z=xt=c,19):w===1?(z=s,Q-=257,xt=r,mt-=257,256):(z=l,xt=v,-1),b=e,R=i,ut=L=O=0,I=-1,x=(et=1<<(Z=it))-1,w===1&&852<et||w===2&&592<et)return 1;for(;;){for(W=b-ut,q=c[L]<j?(T=0,c[L]):c[L]>j?(T=xt[mt+c[L]],z[Q+c[L]]):(T=96,0),p=1<<b-ut,e=y=1<<Z;m[R+(O>>ut)+(y-=p)]=W<<24|T<<16|q|0,y!==0;);for(p=1<<b-1;O&p;)p>>=1;if(p!==0?(O&=p-1,O+=p):O=0,L++,--X[b]==0){if(b===N)break;b=d[_+c[L]]}if(it<b&&(O&x)!==I){for(ut===0&&(ut=it),R+=e,M=1<<(Z=b-ut);Z+ut<N&&!((M-=X[Z+ut])<=0);)Z++,M<<=1;if(et+=1<<Z,w===1&&852<et||w===2&&592<et)return 1;m[I=O&x]=it<<24|Z<<16|R-i|0}}return O!==0&&(m[R+O]=b-ut<<24|64<<16|0),o.bits=it,0}},{"../utils/common":41}],51:[function(a,C,g){C.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(a,C,g){var h=a("../utils/common"),s=0,r=1;function l(u){for(var k=u.length;0<=--k;)u[k]=0}var v=0,w=29,d=256,_=d+1+w,n=30,m=19,i=2*_+1,c=15,o=16,p=7,y=256,I=16,x=17,R=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],W=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],rt=new Array(2*(_+2));l(rt);var b=new Array(2*n);l(b);var L=new Array(512);l(L);var e=new Array(256);l(e);var N=new Array(w);l(N);var it,Z,ut,M=new Array(n);function et(u,k,P,U,E){this.static_tree=u,this.extra_bits=k,this.extra_base=P,this.elems=U,this.max_length=E,this.has_stree=u&&u.length}function O(u,k){this.dyn_tree=u,this.max_code=0,this.stat_desc=k}function z(u){return u<256?L[u]:L[256+(u>>>7)]}function Q(u,k){u.pending_buf[u.pending++]=255&k,u.pending_buf[u.pending++]=k>>>8&255}function X(u,k,P){u.bi_valid>o-P?(u.bi_buf|=k<<u.bi_valid&65535,Q(u,u.bi_buf),u.bi_buf=k>>o-u.bi_valid,u.bi_valid+=P-o):(u.bi_buf|=k<<u.bi_valid&65535,u.bi_valid+=P)}function J(u,k,P){X(u,P[2*k],P[2*k+1])}function xt(u,k){for(var P=0;P|=1&u,u>>>=1,P<<=1,0<--k;);return P>>>1}function mt(u,k,P){var U,E,F=new Array(c+1),$=0;for(U=1;U<=c;U++)F[U]=$=$+P[U-1]<<1;for(E=0;E<=k;E++){var H=u[2*E+1];H!==0&&(u[2*E]=xt(F[H]++,H))}}function ot(u){var k;for(k=0;k<_;k++)u.dyn_ltree[2*k]=0;for(k=0;k<n;k++)u.dyn_dtree[2*k]=0;for(k=0;k<m;k++)u.bl_tree[2*k]=0;u.dyn_ltree[2*y]=1,u.opt_len=u.static_len=0,u.last_lit=u.matches=0}function dt(u){8<u.bi_valid?Q(u,u.bi_buf):0<u.bi_valid&&(u.pending_buf[u.pending++]=u.bi_buf),u.bi_buf=0,u.bi_valid=0}function Ct(u,k,P,U){var E=2*k,F=2*P;return u[E]<u[F]||u[E]===u[F]&&U[k]<=U[P]}function ct(u,k,P){for(var U=u.heap[P],E=P<<1;E<=u.heap_len&&(E<u.heap_len&&Ct(k,u.heap[E+1],u.heap[E],u.depth)&&E++,!Ct(k,U,u.heap[E],u.depth));)u.heap[P]=u.heap[E],P=E,E<<=1;u.heap[P]=U}function gt(u,k,P){var U,E,F,$,H=0;if(u.last_lit!==0)for(;U=u.pending_buf[u.d_buf+2*H]<<8|u.pending_buf[u.d_buf+2*H+1],E=u.pending_buf[u.l_buf+H],H++,U===0?J(u,E,k):(J(u,(F=e[E])+d+1,k),($=j[F])!==0&&X(u,E-=N[F],$),J(u,F=z(--U),P),($=W[F])!==0&&X(u,U-=M[F],$)),H<u.last_lit;);J(u,y,k)}function Et(u,k){var P,U,E,F=k.dyn_tree,$=k.stat_desc.static_tree,H=k.stat_desc.has_stree,tt=k.stat_desc.elems,_t=-1;for(u.heap_len=0,u.heap_max=i,P=0;P<tt;P++)F[2*P]!==0?(u.heap[++u.heap_len]=_t=P,u.depth[P]=0):F[2*P+1]=0;for(;u.heap_len<2;)F[2*(E=u.heap[++u.heap_len]=_t<2?++_t:0)]=1,u.depth[E]=0,u.opt_len--,H&&(u.static_len-=$[2*E+1]);for(k.max_code=_t,P=u.heap_len>>1;1<=P;P--)ct(u,F,P);for(E=tt;P=u.heap[1],u.heap[1]=u.heap[u.heap_len--],ct(u,F,1),U=u.heap[1],u.heap[--u.heap_max]=P,u.heap[--u.heap_max]=U,F[2*E]=F[2*P]+F[2*U],u.depth[E]=(u.depth[P]>=u.depth[U]?u.depth[P]:u.depth[U])+1,F[2*P+1]=F[2*U+1]=E,u.heap[1]=E++,ct(u,F,1),2<=u.heap_len;);u.heap[--u.heap_max]=u.heap[1],function(ft,Ot){var St,It,ne,yt,ce,Dt,Rt=Ot.dyn_tree,Pe=Ot.max_code,qt=Ot.stat_desc.static_tree,Yt=Ot.stat_desc.has_stree,Xe=Ot.stat_desc.extra_bits,Le=Ot.stat_desc.extra_base,Bt=Ot.stat_desc.max_length,ie=0;for(yt=0;yt<=c;yt++)ft.bl_count[yt]=0;for(Rt[2*ft.heap[ft.heap_max]+1]=0,St=ft.heap_max+1;St<i;St++)Bt<(yt=Rt[2*Rt[2*(It=ft.heap[St])+1]+1]+1)&&(yt=Bt,ie++),Rt[2*It+1]=yt,Pe<It||(ft.bl_count[yt]++,ce=0,Le<=It&&(ce=Xe[It-Le]),Dt=Rt[2*It],ft.opt_len+=Dt*(yt+ce),Yt&&(ft.static_len+=Dt*(qt[2*It+1]+ce)));if(ie!==0){do{for(yt=Bt-1;ft.bl_count[yt]===0;)yt--;ft.bl_count[yt]--,ft.bl_count[yt+1]+=2,ft.bl_count[Bt]--,ie-=2}while(0<ie);for(yt=Bt;yt!==0;yt--)for(It=ft.bl_count[yt];It!==0;)Pe<(ne=ft.heap[--St])||(Rt[2*ne+1]!==yt&&(ft.opt_len+=(yt-Rt[2*ne+1])*Rt[2*ne],Rt[2*ne+1]=yt),It--)}}(u,k),mt(F,_t,u.bl_count)}function t(u,k,P){var U,E,F=-1,$=k[1],H=0,tt=7,_t=4;for($===0&&(tt=138,_t=3),k[2*(P+1)+1]=65535,U=0;U<=P;U++)E=$,$=k[2*(U+1)+1],++H<tt&&E===$||(H<_t?u.bl_tree[2*E]+=H:E!==0?(E!==F&&u.bl_tree[2*E]++,u.bl_tree[2*I]++):H<=10?u.bl_tree[2*x]++:u.bl_tree[2*R]++,F=E,_t=(H=0)===$?(tt=138,3):E===$?(tt=6,3):(tt=7,4))}function D(u,k,P){var U,E,F=-1,$=k[1],H=0,tt=7,_t=4;for($===0&&(tt=138,_t=3),U=0;U<=P;U++)if(E=$,$=k[2*(U+1)+1],!(++H<tt&&E===$)){if(H<_t)for(;J(u,E,u.bl_tree),--H!=0;);else E!==0?(E!==F&&(J(u,E,u.bl_tree),H--),J(u,I,u.bl_tree),X(u,H-3,2)):H<=10?(J(u,x,u.bl_tree),X(u,H-3,3)):(J(u,R,u.bl_tree),X(u,H-11,7));F=E,_t=(H=0)===$?(tt=138,3):E===$?(tt=6,3):(tt=7,4)}}l(M);var S=!1;function f(u,k,P,U){X(u,(v<<1)+(U?1:0),3),function(E,F,$,H){dt(E),Q(E,$),Q(E,~$),h.arraySet(E.pending_buf,E.window,F,$,E.pending),E.pending+=$}(u,k,P)}g._tr_init=function(u){S||(function(){var k,P,U,E,F,$=new Array(c+1);for(E=U=0;E<w-1;E++)for(N[E]=U,k=0;k<1<<j[E];k++)e[U++]=E;for(e[U-1]=E,E=F=0;E<16;E++)for(M[E]=F,k=0;k<1<<W[E];k++)L[F++]=E;for(F>>=7;E<n;E++)for(M[E]=F<<7,k=0;k<1<<W[E]-7;k++)L[256+F++]=E;for(P=0;P<=c;P++)$[P]=0;for(k=0;k<=143;)rt[2*k+1]=8,k++,$[8]++;for(;k<=255;)rt[2*k+1]=9,k++,$[9]++;for(;k<=279;)rt[2*k+1]=7,k++,$[7]++;for(;k<=287;)rt[2*k+1]=8,k++,$[8]++;for(mt(rt,_+1,$),k=0;k<n;k++)b[2*k+1]=5,b[2*k]=xt(k,5);it=new et(rt,j,d+1,_,c),Z=new et(b,W,0,n,c),ut=new et(new Array(0),T,0,m,p)}(),S=!0),u.l_desc=new O(u.dyn_ltree,it),u.d_desc=new O(u.dyn_dtree,Z),u.bl_desc=new O(u.bl_tree,ut),u.bi_buf=0,u.bi_valid=0,ot(u)},g._tr_stored_block=f,g._tr_flush_block=function(u,k,P,U){var E,F,$=0;0<u.level?(u.strm.data_type===2&&(u.strm.data_type=function(H){var tt,_t=4093624447;for(tt=0;tt<=31;tt++,_t>>>=1)if(1&_t&&H.dyn_ltree[2*tt]!==0)return s;if(H.dyn_ltree[18]!==0||H.dyn_ltree[20]!==0||H.dyn_ltree[26]!==0)return r;for(tt=32;tt<d;tt++)if(H.dyn_ltree[2*tt]!==0)return r;return s}(u)),Et(u,u.l_desc),Et(u,u.d_desc),$=function(H){var tt;for(t(H,H.dyn_ltree,H.l_desc.max_code),t(H,H.dyn_dtree,H.d_desc.max_code),Et(H,H.bl_desc),tt=m-1;3<=tt&&H.bl_tree[2*q[tt]+1]===0;tt--);return H.opt_len+=3*(tt+1)+5+5+4,tt}(u),E=u.opt_len+3+7>>>3,(F=u.static_len+3+7>>>3)<=E&&(E=F)):E=F=P+5,P+4<=E&&k!==-1?f(u,k,P,U):u.strategy===4||F===E?(X(u,2+(U?1:0),3),gt(u,rt,b)):(X(u,4+(U?1:0),3),function(H,tt,_t,ft){var Ot;for(X(H,tt-257,5),X(H,_t-1,5),X(H,ft-4,4),Ot=0;Ot<ft;Ot++)X(H,H.bl_tree[2*q[Ot]+1],3);D(H,H.dyn_ltree,tt-1),D(H,H.dyn_dtree,_t-1)}(u,u.l_desc.max_code+1,u.d_desc.max_code+1,$+1),gt(u,u.dyn_ltree,u.dyn_dtree)),ot(u),U&&dt(u)},g._tr_tally=function(u,k,P){return u.pending_buf[u.d_buf+2*u.last_lit]=k>>>8&255,u.pending_buf[u.d_buf+2*u.last_lit+1]=255&k,u.pending_buf[u.l_buf+u.last_lit]=255&P,u.last_lit++,k===0?u.dyn_ltree[2*P]++:(u.matches++,k--,u.dyn_ltree[2*(e[P]+d+1)]++,u.dyn_dtree[2*z(k)]++),u.last_lit===u.lit_bufsize-1},g._tr_align=function(u){X(u,2,3),J(u,y,rt),function(k){k.bi_valid===16?(Q(k,k.bi_buf),k.bi_buf=0,k.bi_valid=0):8<=k.bi_valid&&(k.pending_buf[k.pending++]=255&k.bi_buf,k.bi_buf>>=8,k.bi_valid-=8)}(u)}},{"../utils/common":41}],53:[function(a,C,g){C.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(a,C,g){(function(h){(function(s,r){if(!s.setImmediate){var l,v,w,d,_=1,n={},m=!1,i=s.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(s);c=c&&c.setTimeout?c:s,l={}.toString.call(s.process)==="[object process]"?function(I){process.nextTick(function(){p(I)})}:function(){if(s.postMessage&&!s.importScripts){var I=!0,x=s.onmessage;return s.onmessage=function(){I=!1},s.postMessage("","*"),s.onmessage=x,I}}()?(d="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",y,!1):s.attachEvent("onmessage",y),function(I){s.postMessage(d+I,"*")}):s.MessageChannel?((w=new MessageChannel).port1.onmessage=function(I){p(I.data)},function(I){w.port2.postMessage(I)}):i&&"onreadystatechange"in i.createElement("script")?(v=i.documentElement,function(I){var x=i.createElement("script");x.onreadystatechange=function(){p(I),x.onreadystatechange=null,v.removeChild(x),x=null},v.appendChild(x)}):function(I){setTimeout(p,0,I)},c.setImmediate=function(I){typeof I!="function"&&(I=new Function(""+I));for(var x=new Array(arguments.length-1),R=0;R<x.length;R++)x[R]=arguments[R+1];var j={callback:I,args:x};return n[_]=j,l(_),_++},c.clearImmediate=o}function o(I){delete n[I]}function p(I){if(m)setTimeout(p,0,I);else{var x=n[I];if(x){m=!0;try{(function(R){var j=R.callback,W=R.args;switch(W.length){case 0:j();break;case 1:j(W[0]);break;case 2:j(W[0],W[1]);break;case 3:j(W[0],W[1],W[2]);break;default:j.apply(r,W)}})(x)}finally{o(I),m=!1}}}}function y(I){I.source===s&&typeof I.data=="string"&&I.data.indexOf(d)===0&&p(+I.data.slice(d.length))}})(typeof self>"u"?h===void 0?this:h:self)}).call(this,typeof xr<"u"?xr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Dn);var Hn=Dn.exports;const Vn=Zn(Hn),Rn={A0:[841,1189],A1:[594,841],A2:[420,594],A3:[297,420],A4:[210,297],A5:[148,210],A6:[105,148]},rn=(B,Y)=>Math.round(B*Y);function Gn({din:B,width_cm:Y,height_cm:a}){return Y&&a?[Y*10,a*10]:B?Rn[B]:[210,297]}function Kn(B,Y,a,C){const g=document.createElement("canvas");g.width=Y,g.height=a;const h=g.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,Y,a);const s=B.naturalWidth,r=B.naturalHeight,l=s/r,v=Y/a;if(C==="stretch")h.drawImage(B,0,0,Y,a);else if(C==="fit"){let w=Y,d=Math.round(Y/l);d>a&&(d=a,w=Math.round(a*l));const _=Math.floor((Y-w)/2),n=Math.floor((a-d)/2);h.drawImage(B,_,n,w,d)}else{let w=s,d=Math.round(s/v);d>r&&(d=r,w=Math.round(r*v));const _=Math.floor((s-w)/2),n=Math.floor((r-d)/2);h.drawImage(B,_,n,w,d,0,0,Y,a)}return g}function qn(B){const Y=Math.ceil(Math.sqrt(B.width*B.width+B.height*B.height)),a=document.createElement("canvas");a.width=Y,a.height=Y;const C=a.getContext("2d");return C.fillStyle="#fff",C.fillRect(0,0,Y,Y),C.translate(Y/2,Y/2),C.rotate(Math.PI/4),C.drawImage(B,-B.width/2,-B.height/2),a}function Yn(B,Y="image/png",a){return new Promise(C=>B.toBlob(g=>C(g),Y,a))}async function Xn(B,{pause:Y=!0,cut:a=!0,vendorIdHex:C="",productIdHex:g="",iface:h=0,endpoint:s=1,align:r="left"}={}){if(!("usb"in navigator))throw new Error("WebUSB not supported");const l=[];if(C){const _=parseInt(C,16);if(Number.isFinite(_)){const n=g?parseInt(g,16):void 0;l.push(n?{vendorId:_,productId:n}:{vendorId:_})}}const v=await navigator.usb.requestDevice({filters:l.length?l:[{}]});await v.open(),v.configuration==null&&await v.selectConfiguration(1),await v.claimInterface(h);const w=_=>v.transferOut(s,new Uint8Array(_));await w([27,64]),await w([27,97,{left:0,center:1,right:2}[r]??0]);for(let _=0;_<B.length;_++){const n=B[_],m=Math.ceil(n.width/8),i=new Uint8Array(m*n.height);for(let R=0;R<n.height;R++)for(let j=0;j<n.width;j++){const W=(R*n.width+j)*4,T=n.data[W]<128?1:0,q=R*m+(j>>3),rt=7-(j&7);i[q]|=T<<rt}const c=0,o=m&255,p=m>>8&255,y=n.height&255,I=n.height>>8&255;await w([29,118,48,c,o,p,y,I]);const x=16384;for(let R=0;R<i.length;R+=x)await v.transferOut(s,i.subarray(R,Math.min(R+x,i.length)));if(await w([27,100,2]),Y&&_<B.length-1&&!confirm(`Strip ${_+1}/${B.length} printed. Continue?`))break}a&&await w([29,86,0])}function zn(B,Y,a){const C=B.slice();return C[36]=Y[a],C}function An(B,Y,a){const C=B.slice();return C[39]=Y[a],C}function On(B){let Y,a=B[39]+"",C;return{c(){Y=G("option"),C=he(a),this.h()},l(g){Y=V(g,"OPTION",{});var h=ht(Y);C=ue(h,a),h.forEach(lt),this.h()},h(){Y.__value=B[39],bt(Y,Y.__value)},m(g,h){Ye(g,Y,h),A(Y,C)},p:Ir,d(g){g&&lt(Y)}}}function Jn(B){let Y,a="Loading default image… or choose a file.";return{c(){Y=G("p"),Y.textContent=a,this.h()},l(C){Y=V(C,"P",{class:!0,"data-svelte-h":!0}),pt(Y)!=="svelte-1v7zxrp"&&(Y.textContent=a),this.h()},h(){K(Y,"class","muted svelte-rbj3si")},m(C,g){Ye(C,Y,g)},p:Ir,d(C){C&&lt(Y)}}}function Qn(B){let Y,a=Sr(B[4]),C=[];for(let g=0;g<a.length;g+=1)C[g]=Bn(zn(B,a,g));return{c(){Y=G("div");for(let g=0;g<C.length;g+=1)C[g].c();this.h()},l(g){Y=V(g,"DIV",{class:!0});var h=ht(Y);for(let s=0;s<C.length;s+=1)C[s].l(h);h.forEach(lt),this.h()},h(){K(Y,"class","strips svelte-rbj3si")},m(g,h){Ye(g,Y,h);for(let s=0;s<C.length;s+=1)C[s]&&C[s].m(Y,null)},p(g,h){if(h[0]&16){a=Sr(g[4]);let s;for(s=0;s<a.length;s+=1){const r=zn(g,a,s);C[s]?C[s].p(r,h):(C[s]=Bn(r),C[s].c(),C[s].m(Y,null))}for(;s<C.length;s+=1)C[s].d(1);C.length=a.length}},d(g){g&&lt(Y),Tn(C,g)}}}function Bn(B){let Y,a,C,g,h,s,r=B[36].name+"",l,v,w=B[36].canvas.width+"",d,_,n=B[36].canvas.height+"",m,i,c;return{c(){Y=G("div"),a=G("img"),h=at(),s=G("div"),l=he(r),v=he(" — "),d=he(w),_=he("×"),m=he(n),i=he("px"),c=at(),this.h()},l(o){Y=V(o,"DIV",{class:!0});var p=ht(Y);a=V(p,"IMG",{src:!0,alt:!0,class:!0}),h=st(p),s=V(p,"DIV",{class:!0});var y=ht(s);l=ue(y,r),v=ue(y," — "),d=ue(y,w),_=ue(y,"×"),m=ue(y,n),i=ue(y,"px"),y.forEach(lt),c=st(p),p.forEach(lt),this.h()},h(){Sn(a.src,C=B[36].canvas.toDataURL())||K(a,"src",C),K(a,"alt",g=B[36].name),K(a,"class","svelte-rbj3si"),K(s,"class","muted svelte-rbj3si"),K(Y,"class","stripItem svelte-rbj3si")},m(o,p){Ye(o,Y,p),A(Y,a),A(Y,h),A(Y,s),A(s,l),A(s,v),A(s,d),A(s,_),A(s,m),A(s,i),A(Y,c)},p(o,p){p[0]&16&&!Sn(a.src,C=o[36].canvas.toDataURL())&&K(a,"src",C),p[0]&16&&g!==(g=o[36].name)&&K(a,"alt",g),p[0]&16&&r!==(r=o[36].name+"")&&Er(l,r),p[0]&16&&w!==(w=o[36].canvas.width+"")&&Er(d,w),p[0]&16&&n!==(n=o[36].canvas.height+"")&&Er(m,n)},d(o){o&&lt(Y)}}}function $n(B){let Y,a,C,g="Tesselate",h,s,r=`Tesselate splits images into printable strips for thermal receipt
      printers, supporting all DIN formats (A0–A6) and custom banner sizes. It’s
      ideal for large-format or experimental printing with standard receipt
      printers, roll printers, and thermal printers.`,l,v,w,d,_,n,m="DIN",i,c,o,p,y,I="Custom Width (cm)",x,R,j,W,T,q="Custom Height (cm)",rt,b,L,e,N,it,Z="Mode",ut,M,et,O="fit",z,Q="fill",X,J="stretch",xt,mt,ot,dt="Direction",Ct,ct,gt,Et="vertical",t,D="horizontal",S,f="diagonal",u,k,P,U="Pixel size (px)",E,F,$,H,tt,_t,ft="Dither",Ot,St,It,ne="floyd",yt,ce="halftone",Dt,Rt="none",Pe,qt,Yt,Xe="Invert",Le,Bt,ie,fe,de,nn="Halftone cell",zr,Nt,Ar,Xt,se,sn="Download",Or,ae,an="Print",Br,Ne,Ge=(B[5]?"Working…":B[1])+"",Je,Tr,Tt,pe,on="Printer",Dr,Mt,me,_e,ln="Vendor ID (hex)",Rr,Jt,jr,ve,ge,un="Product ID (hex)",Pr,Qt,Lr,be,we,hn="Interface",Nr,Wt,Ur,Zt,ye,ke,cn="Endpoint",Fr,Ht,Mr,xe,Ce,fn="Dots/mm",Wr,jt,Zr,Ee,Ie,dn="Strip (mm)",Hr,Pt,Vr,Ue,Se,ze,pn="Printer max width (px)",Gr,Ut,Kr,Vt,Ae,Oe,mn="Align",qr,Lt,$t,_n="left",te,vn="center",ee,gn="right",Yr,Be,Te,bn="Pause",Xr,oe,Jr,De,Re,wn="Cut",Qr,le,$r,je,tn,yn,Fe=Sr(B[6]),At=[];for(let nt=0;nt<Fe.length;nt+=1)At[nt]=On(An(B,Fe,nt));function kn(nt,kt){return nt[4].length?Qn:Jn}let Qe=kn(B),Ft=Qe(B);return{c(){Y=G("div"),a=G("div"),C=G("h1"),C.textContent=g,h=at(),s=G("p"),s.textContent=r,l=at(),v=G("input"),w=at(),d=G("div"),_=G("div"),n=G("label"),n.textContent=m,i=at(),c=G("select");for(let nt=0;nt<At.length;nt+=1)At[nt].c();o=at(),p=G("div"),y=G("label"),y.textContent=I,x=at(),R=G("input"),j=at(),W=G("div"),T=G("label"),T.textContent=q,rt=at(),b=G("input"),L=at(),e=G("div"),N=G("div"),it=G("label"),it.textContent=Z,ut=at(),M=G("select"),et=G("option"),et.textContent=O,z=G("option"),z.textContent=Q,X=G("option"),X.textContent=J,xt=at(),mt=G("div"),ot=G("label"),ot.textContent=dt,Ct=at(),ct=G("select"),gt=G("option"),gt.textContent=Et,t=G("option"),t.textContent=D,S=G("option"),S.textContent=f,u=at(),k=G("div"),P=G("label"),P.textContent=U,E=at(),F=G("input"),$=at(),H=G("div"),tt=G("div"),_t=G("label"),_t.textContent=ft,Ot=at(),St=G("select"),It=G("option"),It.textContent=ne,yt=G("option"),yt.textContent=ce,Dt=G("option"),Dt.textContent=Rt,Pe=at(),qt=G("div"),Yt=G("label"),Yt.textContent=Xe,Le=at(),Bt=G("input"),ie=at(),fe=G("div"),de=G("label"),de.textContent=nn,zr=at(),Nt=G("input"),Ar=at(),Xt=G("div"),se=G("button"),se.textContent=sn,Or=at(),ae=G("button"),ae.textContent=an,Br=at(),Ne=G("p"),Je=he(Ge),Tr=at(),Tt=G("div"),pe=G("h3"),pe.textContent=on,Dr=at(),Mt=G("div"),me=G("div"),_e=G("label"),_e.textContent=ln,Rr=at(),Jt=G("input"),jr=at(),ve=G("div"),ge=G("label"),ge.textContent=un,Pr=at(),Qt=G("input"),Lr=at(),be=G("div"),we=G("label"),we.textContent=hn,Nr=at(),Wt=G("input"),Ur=at(),Zt=G("div"),ye=G("div"),ke=G("label"),ke.textContent=cn,Fr=at(),Ht=G("input"),Mr=at(),xe=G("div"),Ce=G("label"),Ce.textContent=fn,Wr=at(),jt=G("input"),Zr=at(),Ee=G("div"),Ie=G("label"),Ie.textContent=dn,Hr=at(),Pt=G("input"),Vr=at(),Ue=G("div"),Se=G("div"),ze=G("label"),ze.textContent=pn,Gr=at(),Ut=G("input"),Kr=at(),Vt=G("div"),Ae=G("div"),Oe=G("label"),Oe.textContent=mn,qr=at(),Lt=G("select"),$t=G("option"),$t.textContent=_n,te=G("option"),te.textContent=vn,ee=G("option"),ee.textContent=gn,Yr=at(),Be=G("div"),Te=G("label"),Te.textContent=bn,Xr=at(),oe=G("input"),Jr=at(),De=G("div"),Re=G("label"),Re.textContent=wn,Qr=at(),le=G("input"),$r=at(),je=G("div"),Ft.c(),this.h()},l(nt){Y=V(nt,"DIV",{class:!0});var kt=ht(Y);a=V(kt,"DIV",{class:!0});var vt=ht(a);C=V(vt,"H1",{class:!0,"data-svelte-h":!0}),pt(C)!=="svelte-l2tv6e"&&(C.textContent=g),h=st(vt),s=V(vt,"P",{class:!0,"data-svelte-h":!0}),pt(s)!=="svelte-1uz91ae"&&(s.textContent=r),l=st(vt),v=V(vt,"INPUT",{type:!0,accept:!0,class:!0}),w=st(vt),d=V(vt,"DIV",{class:!0});var re=ht(d);_=V(re,"DIV",{});var $e=ht(_);n=V($e,"LABEL",{class:!0,"data-svelte-h":!0}),pt(n)!=="svelte-qwiy2r"&&(n.textContent=m),i=st($e),c=V($e,"SELECT",{class:!0});var xn=ht(c);for(let en=0;en<At.length;en+=1)At[en].l(xn);xn.forEach(lt),$e.forEach(lt),o=st(re),p=V(re,"DIV",{});var tr=ht(p);y=V(tr,"LABEL",{class:!0,"data-svelte-h":!0}),pt(y)!=="svelte-13h7zre"&&(y.textContent=I),x=st(tr),R=V(tr,"INPUT",{type:!0,step:!0,class:!0}),tr.forEach(lt),j=st(re),W=V(re,"DIV",{});var er=ht(W);T=V(er,"LABEL",{class:!0,"data-svelte-h":!0}),pt(T)!=="svelte-1aydr0b"&&(T.textContent=q),rt=st(er),b=V(er,"INPUT",{type:!0,step:!0,class:!0}),er.forEach(lt),re.forEach(lt),L=st(vt),e=V(vt,"DIV",{class:!0});var Me=ht(e);N=V(Me,"DIV",{});var rr=ht(N);it=V(rr,"LABEL",{class:!0,"data-svelte-h":!0}),pt(it)!=="svelte-16wpful"&&(it.textContent=Z),ut=st(rr),M=V(rr,"SELECT",{class:!0});var nr=ht(M);et=V(nr,"OPTION",{"data-svelte-h":!0}),pt(et)!=="svelte-1ox0qsw"&&(et.textContent=O),z=V(nr,"OPTION",{"data-svelte-h":!0}),pt(z)!=="svelte-ojnp86"&&(z.textContent=Q),X=V(nr,"OPTION",{"data-svelte-h":!0}),pt(X)!=="svelte-19g2w9o"&&(X.textContent=J),nr.forEach(lt),rr.forEach(lt),xt=st(Me),mt=V(Me,"DIV",{});var ir=ht(mt);ot=V(ir,"LABEL",{class:!0,"data-svelte-h":!0}),pt(ot)!=="svelte-1k63le1"&&(ot.textContent=dt),Ct=st(ir),ct=V(ir,"SELECT",{class:!0});var sr=ht(ct);gt=V(sr,"OPTION",{"data-svelte-h":!0}),pt(gt)!=="svelte-lztc1q"&&(gt.textContent=Et),t=V(sr,"OPTION",{"data-svelte-h":!0}),pt(t)!=="svelte-4ixlgm"&&(t.textContent=D),S=V(sr,"OPTION",{"data-svelte-h":!0}),pt(S)!=="svelte-1j2ut9m"&&(S.textContent=f),sr.forEach(lt),ir.forEach(lt),u=st(Me),k=V(Me,"DIV",{});var ar=ht(k);P=V(ar,"LABEL",{class:!0,"data-svelte-h":!0}),pt(P)!=="svelte-1tk1v8o"&&(P.textContent=U),E=st(ar),F=V(ar,"INPUT",{type:!0,step:!0,min:!0,class:!0}),ar.forEach(lt),Me.forEach(lt),$=st(vt),H=V(vt,"DIV",{class:!0});var We=ht(H);tt=V(We,"DIV",{});var or=ht(tt);_t=V(or,"LABEL",{class:!0,"data-svelte-h":!0}),pt(_t)!=="svelte-1b6xat8"&&(_t.textContent=ft),Ot=st(or),St=V(or,"SELECT",{class:!0});var lr=ht(St);It=V(lr,"OPTION",{"data-svelte-h":!0}),pt(It)!=="svelte-dxg5ae"&&(It.textContent=ne),yt=V(lr,"OPTION",{"data-svelte-h":!0}),pt(yt)!=="svelte-hdobsm"&&(yt.textContent=ce),Dt=V(lr,"OPTION",{"data-svelte-h":!0}),pt(Dt)!=="svelte-8dsaj2"&&(Dt.textContent=Rt),lr.forEach(lt),or.forEach(lt),Pe=st(We),qt=V(We,"DIV",{});var ur=ht(qt);Yt=V(ur,"LABEL",{class:!0,"data-svelte-h":!0}),pt(Yt)!=="svelte-12rf0kw"&&(Yt.textContent=Xe),Le=st(ur),Bt=V(ur,"INPUT",{type:!0,class:!0}),ur.forEach(lt),ie=st(We),fe=V(We,"DIV",{});var hr=ht(fe);de=V(hr,"LABEL",{class:!0,"data-svelte-h":!0}),pt(de)!=="svelte-1r22cu7"&&(de.textContent=nn),zr=st(hr),Nt=V(hr,"INPUT",{type:!0,step:!0,class:!0}),hr.forEach(lt),We.forEach(lt),Ar=st(vt),Xt=V(vt,"DIV",{class:!0,style:!0});var cr=ht(Xt);se=V(cr,"BUTTON",{class:!0,"data-svelte-h":!0}),pt(se)!=="svelte-1fy8inz"&&(se.textContent=sn),Or=st(cr),ae=V(cr,"BUTTON",{class:!0,"data-svelte-h":!0}),pt(ae)!=="svelte-1bc3bu5"&&(ae.textContent=an),cr.forEach(lt),Br=st(vt),Ne=V(vt,"P",{class:!0});var Cn=ht(Ne);Je=ue(Cn,Ge),Cn.forEach(lt),Tr=st(vt),Tt=V(vt,"DIV",{class:!0});var Gt=ht(Tt);pe=V(Gt,"H3",{class:!0,"data-svelte-h":!0}),pt(pe)!=="svelte-5ef4qq"&&(pe.textContent=on),Dr=st(Gt),Mt=V(Gt,"DIV",{class:!0});var Ze=ht(Mt);me=V(Ze,"DIV",{});var fr=ht(me);_e=V(fr,"LABEL",{class:!0,"data-svelte-h":!0}),pt(_e)!=="svelte-nfk8vb"&&(_e.textContent=ln),Rr=st(fr),Jt=V(fr,"INPUT",{placeholder:!0,class:!0}),fr.forEach(lt),jr=st(Ze),ve=V(Ze,"DIV",{});var dr=ht(ve);ge=V(dr,"LABEL",{class:!0,"data-svelte-h":!0}),pt(ge)!=="svelte-1313xps"&&(ge.textContent=un),Pr=st(dr),Qt=V(dr,"INPUT",{placeholder:!0,class:!0}),dr.forEach(lt),Lr=st(Ze),be=V(Ze,"DIV",{});var pr=ht(be);we=V(pr,"LABEL",{class:!0,"data-svelte-h":!0}),pt(we)!=="svelte-v7kanb"&&(we.textContent=hn),Nr=st(pr),Wt=V(pr,"INPUT",{type:!0,min:!0,class:!0}),pr.forEach(lt),Ze.forEach(lt),Ur=st(Gt),Zt=V(Gt,"DIV",{class:!0});var He=ht(Zt);ye=V(He,"DIV",{});var mr=ht(ye);ke=V(mr,"LABEL",{class:!0,"data-svelte-h":!0}),pt(ke)!=="svelte-1pn3nlb"&&(ke.textContent=cn),Fr=st(mr),Ht=V(mr,"INPUT",{type:!0,min:!0,class:!0}),mr.forEach(lt),Mr=st(He),xe=V(He,"DIV",{});var _r=ht(xe);Ce=V(_r,"LABEL",{class:!0,"data-svelte-h":!0}),pt(Ce)!=="svelte-1ciqefv"&&(Ce.textContent=fn),Wr=st(_r),jt=V(_r,"INPUT",{type:!0,step:!0,min:!0,class:!0}),_r.forEach(lt),Zr=st(He),Ee=V(He,"DIV",{});var vr=ht(Ee);Ie=V(vr,"LABEL",{class:!0,"data-svelte-h":!0}),pt(Ie)!=="svelte-1bko2kh"&&(Ie.textContent=dn),Hr=st(vr),Pt=V(vr,"INPUT",{type:!0,step:!0,min:!0,class:!0}),vr.forEach(lt),He.forEach(lt),Vr=st(Gt),Ue=V(Gt,"DIV",{class:!0});var En=ht(Ue);Se=V(En,"DIV",{});var gr=ht(Se);ze=V(gr,"LABEL",{class:!0,"data-svelte-h":!0}),pt(ze)!=="svelte-brceij"&&(ze.textContent=pn),Gr=st(gr),Ut=V(gr,"INPUT",{type:!0,step:!0,class:!0}),gr.forEach(lt),En.forEach(lt),Kr=st(Gt),Vt=V(Gt,"DIV",{class:!0});var Ve=ht(Vt);Ae=V(Ve,"DIV",{});var br=ht(Ae);Oe=V(br,"LABEL",{class:!0,"data-svelte-h":!0}),pt(Oe)!=="svelte-18ezb4d"&&(Oe.textContent=mn),qr=st(br),Lt=V(br,"SELECT",{class:!0});var wr=ht(Lt);$t=V(wr,"OPTION",{"data-svelte-h":!0}),pt($t)!=="svelte-dm3ioe"&&($t.textContent=_n),te=V(wr,"OPTION",{"data-svelte-h":!0}),pt(te)!=="svelte-1x1wx6q"&&(te.textContent=vn),ee=V(wr,"OPTION",{"data-svelte-h":!0}),pt(ee)!=="svelte-gdc71y"&&(ee.textContent=gn),wr.forEach(lt),br.forEach(lt),Yr=st(Ve),Be=V(Ve,"DIV",{});var yr=ht(Be);Te=V(yr,"LABEL",{class:!0,"data-svelte-h":!0}),pt(Te)!=="svelte-1masae"&&(Te.textContent=bn),Xr=st(yr),oe=V(yr,"INPUT",{type:!0,class:!0}),yr.forEach(lt),Jr=st(Ve),De=V(Ve,"DIV",{});var kr=ht(De);Re=V(kr,"LABEL",{class:!0,"data-svelte-h":!0}),pt(Re)!=="svelte-cejm98"&&(Re.textContent=wn),Qr=st(kr),le=V(kr,"INPUT",{type:!0,class:!0}),kr.forEach(lt),Ve.forEach(lt),Gt.forEach(lt),vt.forEach(lt),$r=st(kt),je=V(kt,"DIV",{class:!0});var In=ht(je);Ft.l(In),In.forEach(lt),kt.forEach(lt),this.h()},h(){K(C,"class","svelte-rbj3si"),K(s,"class","desc"),K(v,"type","file"),K(v,"accept","image/*"),K(v,"class","svelte-rbj3si"),K(n,"class","svelte-rbj3si"),K(c,"class","svelte-rbj3si"),B[2].din===void 0&&Ke(()=>B[12].call(c)),K(y,"class","svelte-rbj3si"),K(R,"type","number"),K(R,"step","0.1"),K(R,"class","svelte-rbj3si"),K(T,"class","svelte-rbj3si"),K(b,"type","number"),K(b,"step","0.1"),K(b,"class","svelte-rbj3si"),K(d,"class","row svelte-rbj3si"),K(it,"class","svelte-rbj3si"),et.__value="fit",bt(et,et.__value),z.__value="fill",bt(z,z.__value),X.__value="stretch",bt(X,X.__value),K(M,"class","svelte-rbj3si"),B[2].mode===void 0&&Ke(()=>B[15].call(M)),K(ot,"class","svelte-rbj3si"),gt.__value="vertical",bt(gt,gt.__value),t.__value="horizontal",bt(t,t.__value),S.__value="diagonal",bt(S,S.__value),K(ct,"class","svelte-rbj3si"),B[2].direction===void 0&&Ke(()=>B[16].call(ct)),K(P,"class","svelte-rbj3si"),K(F,"type","number"),K(F,"step","1"),K(F,"min","1"),K(F,"class","svelte-rbj3si"),K(e,"class","row svelte-rbj3si"),K(_t,"class","svelte-rbj3si"),It.__value="floyd",bt(It,It.__value),yt.__value="halftone",bt(yt,yt.__value),Dt.__value="none",bt(Dt,Dt.__value),K(St,"class","svelte-rbj3si"),B[2].dither===void 0&&Ke(()=>B[18].call(St)),K(Yt,"class","svelte-rbj3si"),K(Bt,"type","checkbox"),K(Bt,"class","svelte-rbj3si"),K(de,"class","svelte-rbj3si"),K(Nt,"type","number"),K(Nt,"step","1"),K(Nt,"class","svelte-rbj3si"),K(H,"class","row svelte-rbj3si"),K(se,"class","svelte-rbj3si"),K(ae,"class","svelte-rbj3si"),K(Xt,"class","row svelte-rbj3si"),Un(Xt,"margin-top","10px"),K(Ne,"class","muted svelte-rbj3si"),K(pe,"class","svelte-rbj3si"),K(_e,"class","svelte-rbj3si"),K(Jt,"placeholder","e.g. 04b8"),K(Jt,"class","svelte-rbj3si"),K(ge,"class","svelte-rbj3si"),K(Qt,"placeholder","optional"),K(Qt,"class","svelte-rbj3si"),K(we,"class","svelte-rbj3si"),K(Wt,"type","number"),K(Wt,"min","0"),K(Wt,"class","svelte-rbj3si"),K(Mt,"class","row svelte-rbj3si"),K(ke,"class","svelte-rbj3si"),K(Ht,"type","number"),K(Ht,"min","1"),K(Ht,"class","svelte-rbj3si"),K(Ce,"class","svelte-rbj3si"),K(jt,"type","number"),K(jt,"step","1"),K(jt,"min","1"),K(jt,"class","svelte-rbj3si"),K(Ie,"class","svelte-rbj3si"),K(Pt,"type","number"),K(Pt,"step","0.1"),K(Pt,"min","1"),K(Pt,"class","svelte-rbj3si"),K(Zt,"class","row svelte-rbj3si"),K(ze,"class","svelte-rbj3si"),K(Ut,"type","number"),K(Ut,"step","1"),K(Ut,"class","svelte-rbj3si"),K(Ue,"class","row svelte-rbj3si"),K(Oe,"class","svelte-rbj3si"),$t.__value="left",bt($t,$t.__value),te.__value="center",bt(te,te.__value),ee.__value="right",bt(ee,ee.__value),K(Lt,"class","svelte-rbj3si"),B[3].align===void 0&&Ke(()=>B[28].call(Lt)),K(Te,"class","svelte-rbj3si"),K(oe,"type","checkbox"),K(oe,"class","svelte-rbj3si"),K(Re,"class","svelte-rbj3si"),K(le,"type","checkbox"),K(le,"class","svelte-rbj3si"),K(Vt,"class","row svelte-rbj3si"),K(Tt,"class","printer-box svelte-rbj3si"),K(a,"class","panel controls svelte-rbj3si"),K(je,"class","panel svelte-rbj3si"),K(Y,"class","grid svelte-rbj3si")},m(nt,kt){Ye(nt,Y,kt),A(Y,a),A(a,C),A(a,h),A(a,s),A(a,l),A(a,v),B[11](v),A(a,w),A(a,d),A(d,_),A(_,n),A(_,i),A(_,c);for(let vt=0;vt<At.length;vt+=1)At[vt]&&At[vt].m(c,null);Kt(c,B[2].din,!0),A(d,o),A(d,p),A(p,y),A(p,x),A(p,R),bt(R,B[2].width_cm),A(d,j),A(d,W),A(W,T),A(W,rt),A(W,b),bt(b,B[2].height_cm),A(a,L),A(a,e),A(e,N),A(N,it),A(N,ut),A(N,M),A(M,et),A(M,z),A(M,X),Kt(M,B[2].mode,!0),A(e,xt),A(e,mt),A(mt,ot),A(mt,Ct),A(mt,ct),A(ct,gt),A(ct,t),A(ct,S),Kt(ct,B[2].direction,!0),A(e,u),A(e,k),A(k,P),A(k,E),A(k,F),bt(F,B[2].pixel_size_px),A(a,$),A(a,H),A(H,tt),A(tt,_t),A(tt,Ot),A(tt,St),A(St,It),A(St,yt),A(St,Dt),Kt(St,B[2].dither,!0),A(H,Pe),A(H,qt),A(qt,Yt),A(qt,Le),A(qt,Bt),Bt.checked=B[2].invert,A(H,ie),A(H,fe),A(fe,de),A(fe,zr),A(fe,Nt),bt(Nt,B[2].halftone_cell),A(a,Ar),A(a,Xt),A(Xt,se),A(Xt,Or),A(Xt,ae),A(a,Br),A(a,Ne),A(Ne,Je),A(a,Tr),A(a,Tt),A(Tt,pe),A(Tt,Dr),A(Tt,Mt),A(Mt,me),A(me,_e),A(me,Rr),A(me,Jt),bt(Jt,B[3].vendorIdHex),A(Mt,jr),A(Mt,ve),A(ve,ge),A(ve,Pr),A(ve,Qt),bt(Qt,B[3].productIdHex),A(Mt,Lr),A(Mt,be),A(be,we),A(be,Nr),A(be,Wt),bt(Wt,B[3].iface),A(Tt,Ur),A(Tt,Zt),A(Zt,ye),A(ye,ke),A(ye,Fr),A(ye,Ht),bt(Ht,B[3].endpoint),A(Zt,Mr),A(Zt,xe),A(xe,Ce),A(xe,Wr),A(xe,jt),bt(jt,B[2].printer_dots_per_mm),A(Zt,Zr),A(Zt,Ee),A(Ee,Ie),A(Ee,Hr),A(Ee,Pt),bt(Pt,B[2].strip_mm),A(Tt,Vr),A(Tt,Ue),A(Ue,Se),A(Se,ze),A(Se,Gr),A(Se,Ut),bt(Ut,B[2].printer_max_width_px),A(Tt,Kr),A(Tt,Vt),A(Vt,Ae),A(Ae,Oe),A(Ae,qr),A(Ae,Lt),A(Lt,$t),A(Lt,te),A(Lt,ee),Kt(Lt,B[3].align,!0),A(Vt,Yr),A(Vt,Be),A(Be,Te),A(Be,Xr),A(Be,oe),oe.checked=B[3].pause,A(Vt,Jr),A(Vt,De),A(De,Re),A(De,Qr),A(De,le),le.checked=B[3].cut,A(Y,$r),A(Y,je),Ft.m(je,null),tn||(yn=[wt(v,"change",B[7]),wt(c,"change",B[12]),wt(c,"change",B[10]),wt(R,"input",B[13]),wt(R,"change",B[10]),wt(b,"input",B[14]),wt(b,"change",B[10]),wt(M,"change",B[15]),wt(M,"change",B[10]),wt(ct,"change",B[16]),wt(ct,"change",B[10]),wt(F,"input",B[17]),wt(F,"change",B[10]),wt(St,"change",B[18]),wt(St,"change",B[10]),wt(Bt,"change",B[19]),wt(Bt,"change",B[10]),wt(Nt,"input",B[20]),wt(Nt,"change",B[10]),wt(se,"click",B[8]),wt(ae,"click",B[9]),wt(Jt,"input",B[21]),wt(Qt,"input",B[22]),wt(Wt,"input",B[23]),wt(Ht,"input",B[24]),wt(jt,"input",B[25]),wt(jt,"change",B[10]),wt(Pt,"input",B[26]),wt(Pt,"change",B[10]),wt(Ut,"input",B[27]),wt(Ut,"change",B[10]),wt(Lt,"change",B[28]),wt(oe,"change",B[29]),wt(le,"change",B[30])],tn=!0)},p(nt,kt){if(kt[0]&64){Fe=Sr(nt[6]);let vt;for(vt=0;vt<Fe.length;vt+=1){const re=An(nt,Fe,vt);At[vt]?At[vt].p(re,kt):(At[vt]=On(re),At[vt].c(),At[vt].m(c,null))}for(;vt<At.length;vt+=1)At[vt].d(1);At.length=Fe.length}kt[0]&68&&Kt(c,nt[2].din),kt[0]&68&&zt(R.value)!==nt[2].width_cm&&bt(R,nt[2].width_cm),kt[0]&68&&zt(b.value)!==nt[2].height_cm&&bt(b,nt[2].height_cm),kt[0]&68&&Kt(M,nt[2].mode),kt[0]&68&&Kt(ct,nt[2].direction),kt[0]&68&&zt(F.value)!==nt[2].pixel_size_px&&bt(F,nt[2].pixel_size_px),kt[0]&68&&Kt(St,nt[2].dither),kt[0]&68&&(Bt.checked=nt[2].invert),kt[0]&68&&zt(Nt.value)!==nt[2].halftone_cell&&bt(Nt,nt[2].halftone_cell),kt[0]&34&&Ge!==(Ge=(nt[5]?"Working…":nt[1])+"")&&Er(Je,Ge),kt[0]&8&&Jt.value!==nt[3].vendorIdHex&&bt(Jt,nt[3].vendorIdHex),kt[0]&8&&Qt.value!==nt[3].productIdHex&&bt(Qt,nt[3].productIdHex),kt[0]&8&&zt(Wt.value)!==nt[3].iface&&bt(Wt,nt[3].iface),kt[0]&8&&zt(Ht.value)!==nt[3].endpoint&&bt(Ht,nt[3].endpoint),kt[0]&68&&zt(jt.value)!==nt[2].printer_dots_per_mm&&bt(jt,nt[2].printer_dots_per_mm),kt[0]&68&&zt(Pt.value)!==nt[2].strip_mm&&bt(Pt,nt[2].strip_mm),kt[0]&68&&zt(Ut.value)!==nt[2].printer_max_width_px&&bt(Ut,nt[2].printer_max_width_px),kt[0]&8&&Kt(Lt,nt[3].align),kt[0]&8&&(oe.checked=nt[3].pause),kt[0]&8&&(le.checked=nt[3].cut),Qe===(Qe=kn(nt))&&Ft?Ft.p(nt,kt):(Ft.d(1),Ft=Qe(nt),Ft&&(Ft.c(),Ft.m(je,null)))},i:Ir,o:Ir,d(nt){nt&&lt(Y),B[11](null),Tn(At,nt),Ft.d(),tn=!1,Nn(yn)}}}function ti(B,Y=1){if(Y=Math.max(1,Math.floor(Y||1)),Y<=1)return B;const{width:a,height:C,data:g}=B;for(let h=0;h<C;h+=Y)for(let s=0;s<a;s+=Y){const r=(h*a+s)*4,l=g[r];for(let v=h;v<Math.min(h+Y,C);v++)for(let w=s;w<Math.min(s+Y,a);w++){const d=(v*a+w)*4;g[d]=g[d+1]=g[d+2]=l,g[d+3]=255}}return B}function ei(B,Y,a){let C=null,g="",h,s="",r={din:"A3",width_cm:void 0,height_cm:void 0,printer_dots_per_mm:8,strip_mm:60,mode:"fit",dither:"floyd",halftone_cell:8,invert:!1,direction:"vertical",printer_max_width_px:576,pixel_size_px:1},l={vendorIdHex:"",productIdHex:"",iface:0,endpoint:1,align:"left",pause:!0,cut:!0},v=[],w=!1;const d=Object.keys(Rn);function _(Q){a(1,s=Q??"")}Fn(async()=>{try{g="palm.jpg",await m()}catch(Q){console.warn("Could not load default image",Q),_("Load an image to begin.")}});async function n(Q){var J;const X=(J=Q.target.files)==null?void 0:J[0];X&&(g=URL.createObjectURL(X),await m())}async function m(){g&&(C=new Image,C.crossOrigin="anonymous",C.src=g,await C.decode(),await i())}async function i(){if(!C)return;a(5,w=!0),_("Processing…"),a(4,v=[]);const[Q,X]=Gn(r),J=rn(Q,r.printer_dots_per_mm),xt=rn(X,r.printer_dots_per_mm);let mt=Kn(C,J,xt,r.mode);r.direction==="diagonal"&&(mt=qn(mt));const dt=mt.getContext("2d").getImageData(0,0,mt.width,mt.height),Ct=new Worker(new URL(""+new URL("../workers/worker-Cwvvch6N.js",import.meta.url).href,import.meta.url),{type:"module"}),ct=await new Promise((t,D)=>{Ct.onmessage=S=>{var f,u;if(!((f=S.data)!=null&&f.ok)){D(new Error(((u=S.data)==null?void 0:u.error)||"Worker failed")),Ct.terminate();return}t(S.data.imageData),Ct.terminate()},Ct.onerror=S=>D(S),Ct.postMessage({imageData:dt,settings:r},[dt.data.buffer])});ti(ct,Number(r.pixel_size_px)||1);const gt=document.createElement("canvas");gt.width=ct.width,gt.height=ct.height,gt.getContext("2d").putImageData(ct,0,0);const Et=rn(r.strip_mm,r.printer_dots_per_mm);if(r.direction==="vertical"){const t=Math.ceil(gt.width/Et);for(let D=0;D<t;D++){const S=D*Et,f=Math.min(Et,gt.width-S),u=gt.height,k=document.createElement("canvas");k.width=Et,k.height=u;const P=k.getContext("2d");P.fillStyle="#fff",P.fillRect(0,0,k.width,k.height),P.drawImage(gt,S,0,f,u,0,0,f,u),v.push({canvas:k,name:`vstrip_${String(D+1).padStart(2,"0")}.png`})}}else if(r.direction==="horizontal"){const t=Math.ceil(gt.height/Et),D=[];for(let f=0;f<t;f++){const u=f*Et,k=Math.min(Et,gt.height-u),P=gt.width,U=document.createElement("canvas");U.width=P,U.height=Et;const E=U.getContext("2d");E.fillStyle="#fff",E.fillRect(0,0,P,Et),E.drawImage(gt,0,u,P,k,0,0,P,k);const F=document.createElement("canvas");F.width=Et,F.height=P;const $=F.getContext("2d");$.translate(Et,0),$.rotate(Math.PI/2),$.imageSmoothingEnabled=!1,$.drawImage(U,0,0);let H=F;if(F.width!==r.printer_max_width_px){const tt=document.createElement("canvas"),_t=r.printer_max_width_px/F.width;tt.width=r.printer_max_width_px,tt.height=Math.round(F.height*_t);const ft=tt.getContext("2d");ft.imageSmoothingEnabled=!1,ft.drawImage(F,0,0,tt.width,tt.height),H=tt}D.push({canvas:H,name:`hstrip_tmp_${String(f+1).padStart(2,"0")}.png`})}const S=D.reverse();a(4,v=S.map((f,u)=>({canvas:f.canvas,name:`hstrip_${String(u+1).padStart(2,"0")}.png`})))}else{const t=gt.width,D=gt.height,S=r.printer_max_width_px,f=Math.ceil(t/S);for(let u=0;u<f;u++){const k=u*S,P=Math.min(S,t-k),U=document.createElement("canvas");U.width=S,U.height=D;const E=U.getContext("2d");E.fillStyle="#fff",E.fillRect(0,0,U.width,U.height),E.drawImage(gt,k,0,P,D,0,0,P,D),v.push({canvas:U,name:`diagstrip_${String(u+1).padStart(2,"0")}.png`})}}a(5,w=!1),_(`Generated ${v.length} strips.`)}async function c(){try{if(!v.length){_("Nothing to download. Generate strips first.");return}const Q=new Vn,X=Q.folder("tesselated_strips")||Q;for(const ot of v){const dt=await Yn(ot.canvas);X.file(ot.name,dt)}const J=await Q.generateAsync({type:"blob"}),xt=URL.createObjectURL(J),mt=document.createElement("a");mt.href=xt,mt.download="tesselated_strips.zip",document.body.appendChild(mt),mt.click(),mt.remove(),URL.revokeObjectURL(xt),_("ZIP downloaded.")}catch(Q){console.error(Q),_("Download failed."),alert("Download failed: "+((Q==null?void 0:Q.message)||Q))}}async function o(){try{if(!v.length){_("Nothing to print. Generate strips first.");return}const Q=v.map(X=>X.canvas.getContext("2d").getImageData(0,0,X.canvas.width,X.canvas.height));_("Opening printer…"),await Xn(Q,{pause:l.pause,cut:l.cut,vendorIdHex:l.vendorIdHex,productIdHex:l.productIdHex,iface:Number(l.iface)||0,endpoint:Number(l.endpoint)||1,align:l.align}),_("Print job sent.")}catch(Q){console.error(Q),_("Print failed."),alert("Print failed: "+((Q==null?void 0:Q.message)||Q||"Check WebUSB support and your Vendor/Product IDs, interface, endpoint."))}}function p(){C&&!w&&i()}function y(Q){Mn[Q?"unshift":"push"](()=>{h=Q,a(0,h)})}function I(){r.din=qe(this),a(2,r),a(6,d)}function x(){r.width_cm=zt(this.value),a(2,r),a(6,d)}function R(){r.height_cm=zt(this.value),a(2,r),a(6,d)}function j(){r.mode=qe(this),a(2,r),a(6,d)}function W(){r.direction=qe(this),a(2,r),a(6,d)}function T(){r.pixel_size_px=zt(this.value),a(2,r),a(6,d)}function q(){r.dither=qe(this),a(2,r),a(6,d)}function rt(){r.invert=this.checked,a(2,r),a(6,d)}function b(){r.halftone_cell=zt(this.value),a(2,r),a(6,d)}function L(){l.vendorIdHex=this.value,a(3,l)}function e(){l.productIdHex=this.value,a(3,l)}function N(){l.iface=zt(this.value),a(3,l)}function it(){l.endpoint=zt(this.value),a(3,l)}function Z(){r.printer_dots_per_mm=zt(this.value),a(2,r),a(6,d)}function ut(){r.strip_mm=zt(this.value),a(2,r),a(6,d)}function M(){r.printer_max_width_px=zt(this.value),a(2,r),a(6,d)}function et(){l.align=qe(this),a(3,l)}function O(){l.pause=this.checked,a(3,l)}function z(){l.cut=this.checked,a(3,l)}return[h,s,r,l,v,w,d,n,c,o,p,y,I,x,R,j,W,T,q,rt,b,L,e,N,it,Z,ut,M,et,O,z]}class si extends jn{constructor(Y){super(),Pn(this,Y,ei,$n,Ln,{},null,[-1,-1])}}export{si as component,ii as universal};
